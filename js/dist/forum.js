/*! For license information please see forum.js.LICENSE.txt */
(()=>{var e={24(e,t,a){var r=a(163),n=a(110),s=a(996),i=a(312),o=a(166),c=a(766),l=a(760);function u(){"use strict";var t=n(),a=t.m(u),m=(Object.getPrototypeOf?Object.getPrototypeOf(a):a.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))}var f={throw:1,return:2,break:3,continue:3};function d(e){var t,a;return function(r){t||(t={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return a(r.a,f[e],t)},delegateYield:function(e,n,s){return t.resultName=n,a(r.d,l(e),s)},finish:function(e){return a(r.f,e)}},a=function(e,a,n){r.p=t.prev,r.n=t.next;try{return e(a,n)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(e.exports=u=function(){return{wrap:function(e,a,r,n){return t.w(d(e),a,r,n&&n.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:o,async:function(e,t,a,r,n){return(p(t)?i:s)(d(e),t,a,r,n)},keys:c,values:l}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},110(e,t,a){var r=a(397);function n(){var t,a,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",o=s.toStringTag||"@@toStringTag";function c(e,n,s,i){var o=n&&n.prototype instanceof u?n:u,c=Object.create(o.prototype);return r(c,"_invoke",function(e,r,n){var s,i,o,c=0,u=n||[],m=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,a){return s=e,i=0,o=t,p.n=a,l}};function f(e,r){for(i=e,o=r,a=0;!m&&c&&!n&&a<u.length;a++){var n,s=u[a],f=p.p,d=s[2];e>3?(n=d===r)&&(o=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=t):s[0]<=f&&((n=e<2&&f<s[1])?(i=0,p.v=r,p.n=s[1]):f<d&&(n=e<3||s[0]>r||r>d)&&(s[4]=e,s[5]=r,p.n=d,i=0))}if(n||e>1)return l;throw m=!0,r}return function(n,u,d){if(c>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,d),i=u,o=d;(a=i<2?t:o)||!m;){s||(i?i<3?(i>1&&(p.n=-1),f(i,o)):p.n=o:p.v=o);try{if(c=2,s){if(i||(n="next"),a=s[n]){if(!(a=a.call(s,o)))throw TypeError("iterator result is not an object");if(!a.done)return a;o=a.value,i<2&&(i=0)}else 1===i&&(a=s.return)&&a.call(s),i<2&&(o=TypeError("The iterator does not provide a '"+n+"' method"),i=1);s=t}else if((a=(m=p.n<0)?o:e.call(r,p))!==l)break}catch(e){s=t,i=1,o=e}finally{c=1}}return{value:a,done:m}}}(e,s,i),!0),c}var l={};function u(){}function m(){}function p(){}a=Object.getPrototypeOf;var f=[][i]?a(a([][i]())):(r(a={},i,function(){return this}),a),d=p.prototype=u.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,r(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return m.prototype=p,r(d,"constructor",p),r(p,"constructor",m),m.displayName="GeneratorFunction",r(p,o,"GeneratorFunction"),r(d),r(d,o,"Generator"),r(d,i,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:c,m:h}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},163(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},166(e,t,a){var r=a(163),n=a(397);e.exports=function e(t,a){function s(e,n,i,o){try{var c=t[e](n),l=c.value;return l instanceof r?a.resolve(l.v).then(function(e){s("next",e,i,o)},function(e){s("throw",e,i,o)}):a.resolve(l).then(function(e){c.value=e,i(c)},function(e){return s("throw",e,i,o)})}catch(e){o(e)}}var i;this.next||(n(e.prototype),n(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(e,t,r){function n(){return new a(function(t,a){s(e,r,t,a)})}return i=i?i.then(n,n):n()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},183(e,t,a){var r=a(24)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},312(e,t,a){var r=a(110),n=a(166);e.exports=function(e,t,a,s,i){return new n(r().w(e,t,a,s),i||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},397(e){function t(a,r,n,s){var i=Object.defineProperty;try{i({},"",{})}catch(a){i=0}e.exports=t=function(e,a,r,n){function s(a,r){t(e,a,function(e){return this._invoke(a,r,e)})}a?i?i(e,a,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[a]=r:(s("next",0),s("throw",1),s("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(a,r,n,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},735(e){function t(a){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},760(e,t,a){var r=a(735).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],a=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},766(e){e.exports=function(e){var t=Object(e),a=[];for(var r in t)a.unshift(r);return function e(){for(;a.length;)if((r=a.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},912(e){e.exports=function(){"use strict";var e=6e4,t=36e5,a="millisecond",r="second",n="minute",s="hour",i="day",o="week",c="month",l="quarter",u="year",m="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}},v=function(e,t,a){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(a)+e},y={s:v,z:function(e){var t=-e.utcOffset(),a=Math.abs(t),r=Math.floor(a/60),n=a%60;return(t<=0?"+":"-")+v(r,2,"0")+":"+v(n,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var r=12*(a.year()-t.year())+(a.month()-t.month()),n=t.clone().add(r,c),s=a-n<0,i=t.clone().add(r+(s?-1:1),c);return+(-(r+(a-n)/(s?n-i:i-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:o,d:i,D:m,h:s,m:n,s:r,ms:a,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},k="en",b={};b[k]=h;var g="$isDayjsObject",N=function(e){return e instanceof S||!(!e||!e[g])},w=function e(t,a,r){var n;if(!t)return k;if("string"==typeof t){var s=t.toLowerCase();b[s]&&(n=s),a&&(b[s]=a,n=s);var i=t.split("-");if(!n&&i.length>1)return e(i[0])}else{var o=t.name;b[o]=t,n=o}return!r&&n&&(k=n),n||!r&&k},P=function(e,t){if(N(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new S(a)},x=y;x.l=w,x.i=N,x.w=function(e,t){return P(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function h(e){this.$L=w(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[g]=!0}var v=h.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var n=r[2]-1||0,s=(r[7]||"0").substring(0,3);return a?new Date(Date.UTC(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return x},v.isValid=function(){return!(this.$d.toString()===p)},v.isSame=function(e,t){var a=P(e);return this.startOf(t)<=a&&a<=this.endOf(t)},v.isAfter=function(e,t){return P(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<P(e)},v.$g=function(e,t,a){return x.u(e)?this[t]:this.set(a,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var a=this,l=!!x.u(t)||t,p=x.p(e),f=function(e,t){var r=x.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return l?r:r.endOf(i)},d=function(e,t){return x.w(a.toDate()[e].apply(a.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},h=this.$W,v=this.$M,y=this.$D,k="set"+(this.$u?"UTC":"");switch(p){case u:return l?f(1,0):f(31,11);case c:return l?f(1,v):f(0,v+1);case o:var b=this.$locale().weekStart||0,g=(h<b?h+7:h)-b;return f(l?y-g:y+(6-g),v);case i:case m:return d(k+"Hours",0);case s:return d(k+"Minutes",1);case n:return d(k+"Seconds",2);case r:return d(k+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var o,l=x.p(e),p="set"+(this.$u?"UTC":""),f=(o={},o[i]=p+"Date",o[m]=p+"Date",o[c]=p+"Month",o[u]=p+"FullYear",o[s]=p+"Hours",o[n]=p+"Minutes",o[r]=p+"Seconds",o[a]=p+"Milliseconds",o)[l],d=l===i?this.$D+(t-this.$W):t;if(l===c||l===u){var h=this.clone().set(m,1);h.$d[f](d),h.init(),this.$d=h.set(m,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](d);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[x.p(e)]()},v.add=function(a,l){var m,p=this;a=Number(a);var f=x.p(l),d=function(e){var t=P(p);return x.w(t.date(t.date()+Math.round(e*a)),p)};if(f===c)return this.set(c,this.$M+a);if(f===u)return this.set(u,this.$y+a);if(f===i)return d(1);if(f===o)return d(7);var h=(m={},m[n]=e,m[s]=t,m[r]=1e3,m)[f]||1,v=this.$d.getTime()+a*h;return x.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",n=x.z(this),s=this.$H,i=this.$m,o=this.$M,c=a.weekdays,l=a.months,u=a.meridiem,m=function(e,a,n,s){return e&&(e[a]||e(t,r))||n[a].slice(0,s)},f=function(e){return x.s(s%12||12,e,"0")},h=u||function(e,t,a){var r=e<12?"AM":"PM";return a?r.toLowerCase():r};return r.replace(d,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return x.s(t.$y,4,"0");case"M":return o+1;case"MM":return x.s(o+1,2,"0");case"MMM":return m(a.monthsShort,o,l,3);case"MMMM":return m(l,o);case"D":return t.$D;case"DD":return x.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return m(a.weekdaysMin,t.$W,c,2);case"ddd":return m(a.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(s);case"HH":return x.s(s,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return h(s,i,!0);case"A":return h(s,i,!1);case"m":return String(i);case"mm":return x.s(i,2,"0");case"s":return String(t.$s);case"ss":return x.s(t.$s,2,"0");case"SSS":return x.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(a,m,p){var f,d=this,h=x.p(m),v=P(a),y=(v.utcOffset()-this.utcOffset())*e,k=this-v,b=function(){return x.m(d,v)};switch(h){case u:f=b()/12;break;case c:f=b();break;case l:f=b()/3;break;case o:f=(k-y)/6048e5;break;case i:f=(k-y)/864e5;break;case s:f=k/t;break;case n:f=k/e;break;case r:f=k/1e3;break;default:f=k}return p?f:x.a(f)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),r=w(e,t,!0);return r&&(a.$L=r),a},v.clone=function(){return x.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},h}(),M=S.prototype;return P.prototype=M,[["$ms",a],["$s",r],["$m",n],["$H",s],["$W",i],["$M",c],["$y",u],["$D",m]].forEach(function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),P.extend=function(e,t){return e.$i||(e(t,S,P),e.$i=!0),P},P.locale=w,P.isDayjs=N,P.unix=function(e){return P(1e3*e)},P.en=b[k],P.Ls=b,P.p={},P}()},996(e,t,a){var r=a(312);e.exports=function(e,t,a,n,s){var i=r(e,t,a,n,s);return i.next().then(function(e){return e.done?e.value:i.next()})},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=flarum.core.compat["forum/app"];var t=a.n(e);const r=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/IndexPage"];var s=a.n(n);const i=flarum.core.compat["common/components/LinkButton"];var o=a.n(i);const c=flarum.core.compat["common/extenders"];var l=a.n(c);const u=flarum.core.compat["common/Model"];var p=a.n(u);function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f(e,t)}var h=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).name=p().attribute("name"),t.slug=p().attribute("slug"),t.logoPath=p().attribute("logoPath"),t.logoUrl=p().attribute("logoUrl"),t}return d(t,e),t}(p()),v=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).name=p().attribute("name"),t.slug=p().attribute("slug"),t.startDate=p().attribute("startDate",p().transformDate),t.endDate=p().attribute("endDate",p().transformDate),t}return d(t,e),t}(p()),y=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).name=p().attribute("name"),t.seasonId=p().attribute("seasonId"),t.weekNumber=p().attribute("weekNumber"),t.season=p().hasOne("season"),t}return d(t,e),t}(p()),k=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).weekId=p().attribute("weekId"),t.homeTeamId=p().attribute("homeTeamId"),t.awayTeamId=p().attribute("awayTeamId"),t.matchDate=p().attribute("matchDate",p().transformDate),t.cutoffDate=p().attribute("cutoffDate",p().transformDate),t.allowDraw=p().attribute("allowDraw"),t.status=p().attribute("status"),t.homeScore=p().attribute("homeScore"),t.awayScore=p().attribute("awayScore"),t.result=p().attribute("result"),t.canPick=p().attribute("canPick"),t.week=p().hasOne("week"),t.homeTeam=p().hasOne("homeTeam"),t.awayTeam=p().hasOne("awayTeam"),t}return d(t,e),t}(p()),b=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).userId=p().attribute("userId"),t.eventId=p().attribute("eventId"),t.selectedOutcome=p().attribute("selectedOutcome"),t.isCorrect=p().attribute("isCorrect"),t.event=p().hasOne("event"),t.user=p().hasOne("user"),t}return d(t,e),t}(p()),g=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).userId=p().attribute("userId"),t.seasonId=p().attribute("seasonId"),t.totalPoints=p().attribute("totalPoints"),t.totalPicks=p().attribute("totalPicks"),t.correctPicks=p().attribute("correctPicks"),t.accuracy=p().attribute("accuracy"),t.user=p().hasOne("user"),t.season=p().hasOne("season"),t}return d(t,e),t}(p());const N=[(new(l().Store)).add("pickem-teams",h),new(l().Model)(h).attribute("name").attribute("slug").attribute("logoPath").attribute("logoUrl"),(new(l().Store)).add("pickem-seasons",v),new(l().Model)(v).attribute("name").attribute("slug").attribute("startDate",p().transformDate).attribute("endDate",p().transformDate),(new(l().Store)).add("pickem-weeks",y),new(l().Model)(y).attribute("name").attribute("seasonId").attribute("weekNumber").hasOne("season"),(new(l().Store)).add("pickem-events",k),new(l().Model)(k).attribute("weekId").attribute("homeTeamId").attribute("awayTeamId").attribute("matchDate",p().transformDate).attribute("cutoffDate",p().transformDate).attribute("allowDraw").attribute("status").attribute("homeScore").attribute("awayScore").attribute("result").attribute("canPick").hasOne("week").hasOne("homeTeam").hasOne("awayTeam"),(new(l().Store)).add("pickem-picks",b),new(l().Model)(b).attribute("userId").attribute("eventId").attribute("selectedOutcome").attribute("isCorrect").hasOne("event").hasOne("user"),(new(l().Store)).add("pickem-user-scores",g),new(l().Model)(g).attribute("userId").attribute("seasonId").attribute("totalPoints").attribute("totalPicks").attribute("correctPicks").attribute("accuracy").hasOne("user").hasOne("season")];function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},w.apply(null,arguments)}function P(e,t,a,r,n,s,i){try{var o=e[s](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function x(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var s=e.apply(t,a);function i(e){P(s,r,n,i,o,"next",e)}function o(e){P(s,r,n,i,o,"throw",e)}i(void 0)})}}var S=a(183),M=a.n(S);const z=flarum.core.compat["common/components/Page"];var D=a.n(z);const _=flarum.core.compat["common/components/LoadingIndicator"];var $=a.n(_);const L=flarum.core.compat["common/utils/extractText"];var O=a.n(L);const T=flarum.core.compat["common/Component"];var I=a.n(T);const C=flarum.core.compat["common/components/Button"];var j=a.n(C);const E=flarum.core.compat["common/components/Placeholder"];var A=a.n(E),H=a(912),Y=a.n(H),F=function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var a=t.prototype;return a.view=function(){var e=this.attrs,t=e.event,a=e.pick,r=e.onMakePick,n=e.isLoading;if(!t||"function"!=typeof t.id)return null;var s=t.homeTeam(),i=t.awayTeam(),o=t.canPick(),c=t.status(),l=t.result(),u=t.homeScore(),p=t.awayScore(),f=app.forum.attribute("pickem.reverseDisplay"),d="-",h="-";try{d=Y()(t.matchDate()).format("DD MMM YYYY, HH:mm")}catch(e){d=String(t.matchDate())}try{h=Y()(t.cutoffDate()).format("DD MMM YYYY, HH:mm")}catch(e){h=String(t.cutoffDate())}var v=t.cutoffDate(),y=v?this.getCountdown(v):null,k=f?i:s,b=f?s:i,g=f?app.translator.trans("huseyinfiliz-pickem.lib.common.away"):app.translator.trans("huseyinfiliz-pickem.lib.common.home"),N=f?app.translator.trans("huseyinfiliz-pickem.lib.common.home"):app.translator.trans("huseyinfiliz-pickem.lib.common.away"),w=f?p:u,P=f?u:p,x=f?"away":"home",S=f?"home":"away";return m("div",{className:"EventCard"},m("div",{className:"EventCard-status "+c},app.translator.trans("huseyinfiliz-pickem.lib.status."+c)),m("div",{className:"EventCard-teams"},m("div",{className:"team-container"},this.renderTeamLogo(k),m("div",{className:"team-name"},k?k.name():g)),m("div",{className:"vs"},app.translator.trans("huseyinfiliz-pickem.lib.common.vs")),m("div",{className:"team-container"},this.renderTeamLogo(b),m("div",{className:"team-name"},b?b.name():N))),"finished"===c&&null!==u&&null!==p&&m("div",{className:"EventCard-score"},m("div",{className:"score-number"},w),m("div",{className:"score-separator"},"-"),m("div",{className:"score-number"},P)),m("div",{className:"EventCard-info"},m("div",null,m("i",{className:"fas fa-calendar"}),m("strong",null,app.translator.trans("huseyinfiliz-pickem.lib.headers.match_date"),":")," ",d),m("div",null,m("i",{className:"fas fa-clock"}),m("strong",null,app.translator.trans("huseyinfiliz-pickem.lib.headers.cutoff_date"),":")," ",h),y&&o&&m("div",null,m("span",{className:"EventCard-countdown "+(y.urgent?"urgent":"")},m("i",{className:"fas fa-hourglass-half"}),y.text)),l&&m("div",null,m("i",{className:"fas fa-flag-checkered"}),m("strong",null,app.translator.trans("huseyinfiliz-pickem.lib.common.result"),":")," ",this.formatResult(l,s,i))),app.session.user&&o&&m("div",{className:"EventCard-picks"},m(j(),{className:"Button "+(a&&a.selectedOutcome()===x?"Button--pickem-selected":""),onclick:function(){return r(Number(t.id()),x)},loading:n,disabled:n},k?k.name():g),t.allowDraw()&&m(j(),{className:"Button "+(a&&"draw"===a.selectedOutcome()?"Button--pickem-selected":""),onclick:function(){return r(Number(t.id()),"draw")},loading:n,disabled:n},app.translator.trans("huseyinfiliz-pickem.lib.common.draw")),m(j(),{className:"Button "+(a&&a.selectedOutcome()===S?"Button--pickem-selected":""),onclick:function(){return r(Number(t.id()),S)},loading:n,disabled:n},b?b.name():N)),a&&!o&&m("div",{className:"EventCard-pick-result"},app.translator.trans("huseyinfiliz-pickem.forum.picks.your_pick"),": ",m("strong",null,this.formatResult(a.selectedOutcome(),s,i)),null!==a.isCorrect()&&m("span",{className:a.isCorrect()?"correct":"incorrect"},a.isCorrect()?" âœ“ "+app.translator.trans("huseyinfiliz-pickem.lib.status.correct"):" âœ— "+app.translator.trans("huseyinfiliz-pickem.lib.status.incorrect"))))},a.renderTeamLogo=function(e){if(!e)return m("div",{className:"team-logo"},m("span",null,"?"));var t=e.logoUrl(),a=e.name()||app.translator.trans("core.lib.username.deleted_text");if(t)return m("div",{className:"team-logo"},m("img",{src:t,alt:String(a)}));var r=String(a),n=r.charAt(0).toUpperCase(),s=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c","#e67e22","#34495e"],i=r.charCodeAt(0)%s.length;return m("div",{className:"team-logo",style:"background-color: "+s[i]+";"},m("span",null,n))},a.getCountdown=function(e){try{var t=Y()(),a=Y()(e).diff(t);if(a<=0)return null;var r=Math.floor(a/36e5),n=Math.floor(a%36e5/6e4);if(r<1)return{text:app.translator.trans("huseyinfiliz-pickem.lib.time.minutes_remaining",{minutes:n}),urgent:n<30};if(r<24)return{text:app.translator.trans("huseyinfiliz-pickem.lib.time.hours_remaining",{hours:r,minutes:n}),urgent:r<2};var s=Math.floor(r/24);return{text:app.translator.trans("huseyinfiliz-pickem.lib.time.days_remaining",{days:s}),urgent:!1}}catch(e){return null}},a.formatResult=function(e,t,a){return"home"===e?t?t.name():app.translator.trans("huseyinfiliz-pickem.lib.common.home"):"away"===e?a?a.name():app.translator.trans("huseyinfiliz-pickem.lib.common.away"):"draw"===e?app.translator.trans("huseyinfiliz-pickem.lib.common.draw"):e},t}(I()),B=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).selectedSeason="all",t.selectedWeek="all",t.selectedTeam="all",t.selectedStatus="all",t.loading=!1,t.events=[],t.hasMore=!1,t.limit=10,t.pickLoading=new Set,t}d(t,e);var a=t.prototype;return a.oninit=function(t){e.prototype.oninit.call(this,t);var a=app.store.all("pickem-seasons");1===a.length&&(this.selectedSeason=a[0].id()),this.loadEvents(!0)},a.buildFilters=function(){var e=this,t={},a=[];if("all"!==this.selectedWeek)t.week=this.selectedWeek;else if("all"!==this.selectedSeason){var r=app.store.all("pickem-weeks").filter(function(t){return t.seasonId()==e.selectedSeason});a.push.apply(a,r.map(function(e){return e.id()})),a.push("null"),t.week=a.join(",")}return"all"!==this.selectedTeam&&(t.team=this.selectedTeam),"all"!==this.selectedStatus&&(t.status=this.selectedStatus),t},a.loadEvents=function(e){var t=this;void 0===e&&(e=!1),this.loading=!0,m.redraw();var a=e?0:this.events.length,r=this.buildFilters();app.store.find("pickem-events",{include:"homeTeam,awayTeam,week",filter:r,sort:"-matchDate",page:{limit:this.limit,offset:a}}).then(function(a){t.events=e?a:[].concat(t.events,a),t.hasMore=a.length>=t.limit,t.fetchPicksForEvents(a)}).catch(function(e){console.error(e)}).finally(function(){t.loading=!1,m.redraw()})},a.fetchPicksForEvents=function(e){var t=this;if(app.session.user&&app.forum.attribute("pickem.makePicks")){var a=this.attrs.picks||{},r=e.filter(function(e){return!a[String(e.id())]});if(0!==r.length){var n=r.map(function(e){return e.id()}).join(",");app.store.find("pickem-picks",{filter:{user:app.session.user.id(),event:n}}).then(function(e){if(Array.isArray(e)&&e.length>0){var a=e.reduce(function(e,t){var a=t.event()?t.event().id():t.attribute("eventId");return a&&(e[String(a)]=t),e},{}),r=w({},t.attrs.picks,a);t.attrs.onPickChange(r),m.redraw()}})}}},a.makePick=function(){var e=x(M().mark(function e(t,a){var r,n,s,i,o,c,l,u=this;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=String(t),n=this.attrs.picks[r],this.pickLoading.add(t),m.redraw(),e.prev=1,s=function(e){var t=w({},u.attrs.picks);null===e?delete t[r]:t[r]=e,u.attrs.onPickChange(t)},!n||n.selectedOutcome()!==a){e.next=3;break}return e.next=2,n.delete();case 2:s(null),app.alerts.show({type:"success"},app.translator.trans("huseyinfiliz-pickem.lib.messages.deleted")),e.next=7;break;case 3:if(!n){e.next=5;break}return e.next=4,n.save({selectedOutcome:a});case 4:i=e.sent,s(i),app.alerts.show({type:"success"},app.translator.trans("huseyinfiliz-pickem.lib.messages.saved")),e.next=7;break;case 5:return o=app.store.createRecord("pickem-picks"),e.next=6,o.save({eventId:t,selectedOutcome:a});case 6:c=e.sent,s(c),app.alerts.show({type:"success"},app.translator.trans("huseyinfiliz-pickem.lib.messages.saved"));case 7:e.next=9;break;case 8:e.prev=8,l=e.catch(1),console.error("Pick error:",l),l.response&&l.response.errors&&l.response.errors[0]?app.alerts.show({type:"error"},l.response.errors[0].detail):app.alerts.show({type:"error"},app.translator.trans("huseyinfiliz-pickem.lib.messages.invalid_outcome"));case 9:return e.prev=9,this.pickLoading.delete(t),m.redraw(),e.finish(9);case 10:case"end":return e.stop()}},e,this,[[1,8,9,10]])}));return function(t,a){return e.apply(this,arguments)}}(),a.view=function(){var e=this,t=app.store.all("pickem-seasons"),a=app.store.all("pickem-teams"),r=this.events.length>0,n=[];"all"!==this.selectedSeason&&(n=app.store.all("pickem-weeks").filter(function(t){return t.seasonId()==e.selectedSeason}).sort(function(e,t){return parseInt(String(e.weekNumber()||0))-parseInt(String(t.weekNumber()||0))}));var s=this.attrs.picks||{};return m("div",null,m("div",{className:"EventsTab-filters PickemPage-filters"},m("div",{className:"FilterGroup"},m("label",null,m("i",{className:"fas fa-calendar-alt"}),m("span",null,app.translator.trans("huseyinfiliz-pickem.lib.common.season"))),m("select",{className:"FormControl",value:this.selectedSeason,onchange:function(t){e.selectedSeason=t.target.value,e.selectedWeek="all",e.loadEvents(!0)}},m("option",{value:"all"},app.translator.trans("huseyinfiliz-pickem.lib.filters.all")),t.map(function(e){return m("option",{value:e.id()},e.name())}))),m("div",{className:"FilterGroup"},m("label",null,m("i",{className:"fas fa-calendar-week"}),m("span",null,app.translator.trans("huseyinfiliz-pickem.lib.common.week"))),m("select",{className:"FormControl",value:this.selectedWeek,disabled:"all"===this.selectedSeason||0===n.length,onchange:function(t){e.selectedWeek=t.target.value,e.loadEvents(!0)}},m("option",{value:"all"},app.translator.trans("huseyinfiliz-pickem.lib.filters.all")),n.map(function(e){return m("option",{value:e.id()},e.name())}))),m("div",{className:"FilterGroup"},m("label",null,m("i",{className:"fas fa-users"}),m("span",null,app.translator.trans("huseyinfiliz-pickem.lib.common.team"))),m("select",{className:"FormControl",value:this.selectedTeam,onchange:function(t){e.selectedTeam=t.target.value,e.loadEvents(!0)}},m("option",{value:"all"},app.translator.trans("huseyinfiliz-pickem.lib.filters.all")),a.map(function(e){return m("option",{value:e.id()},e.name())}))),m("div",{className:"FilterGroup"},m("label",null,m("i",{className:"fas fa-filter"}),m("span",null,app.translator.trans("huseyinfiliz-pickem.lib.common.status"))),m("select",{className:"FormControl",value:this.selectedStatus,onchange:function(t){e.selectedStatus=t.target.value,e.loadEvents(!0)}},m("option",{value:"all"},app.translator.trans("huseyinfiliz-pickem.lib.filters.all")),m("option",{value:"scheduled"},app.translator.trans("huseyinfiliz-pickem.lib.status.scheduled")),m("option",{value:"closed"},app.translator.trans("huseyinfiliz-pickem.lib.status.closed")),m("option",{value:"finished"},app.translator.trans("huseyinfiliz-pickem.lib.status.finished"))))),r||this.loading?m("div",{className:"MatchesList"},this.events.map(function(t){var a=String(t.id()),r=s[a],n=e.pickLoading.has(Number(t.id()));return m(F,{event:t,pick:r,onMakePick:function(t,a){return e.makePick(t,a)},isLoading:n})})):m(A(),{text:app.translator.trans("huseyinfiliz-pickem.lib.messages.no_matches")}),this.hasMore&&m("div",{className:"LoadMore"},m(j(),{className:"Button Button--primary",loading:this.loading,onclick:function(){return e.loadEvents(!1)}},app.translator.trans("huseyinfiliz-pickem.lib.buttons.load_more"))))},t}(I()),R=function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var a=t.prototype;return a.view=function(){var e=this;if(!app.session.user)return m("div",{className:"MyPicksPage-empty"},m("p",null,app.translator.trans("huseyinfiliz-pickem.lib.messages.login_required")));var t=this.attrs,a=t.picks,r=t.loading,n=t.hasMore,s=t.onLoadMore,i=Object.values(a||{}),o=app.forum.attribute("pickem.reverseDisplay");if(!(i&&0!==i.length||r))return m("div",{className:"MyPicksPage-empty"},m("i",{className:"fas fa-clipboard-list",style:"font-size: 48px; opacity: 0.3; margin-bottom: 16px;"}),m("p",null,app.translator.trans("huseyinfiliz-pickem.lib.messages.no_data")));var c=i.filter(function(e){var t=e.event();return!1!==t&&null!==t}).sort(function(e,t){var a=e.event(),r=t.event();if(!a||!r)return 0;var n=a.matchDate()?new Date(a.matchDate()).getTime():0;return(r.matchDate()?new Date(r.matchDate()).getTime():0)-n});return m("div",null,m("div",{className:"PickemList PickemList--my-picks"},m("div",{className:"PickemList-header"},m("div",{className:"PickemList-cell type-match"},app.translator.trans("huseyinfiliz-pickem.lib.common.match")),m("div",{className:"PickemList-cell type-date"},app.translator.trans("huseyinfiliz-pickem.lib.common.date")),m("div",{className:"PickemList-cell type-pick"},app.translator.trans("huseyinfiliz-pickem.forum.picks.your_pick")),m("div",{className:"PickemList-cell type-result"},app.translator.trans("huseyinfiliz-pickem.lib.common.result")),m("div",{className:"PickemList-cell type-status"},app.translator.trans("huseyinfiliz-pickem.lib.common.status"))),m("div",{className:"PickemList-body"},c.map(function(t){var a=t.event();if(!a)return null;var r=a.homeTeam(),n=a.awayTeam(),s=t.id(),i=t.isCorrect(),c="pending";!0===i&&(c="correct"),!1===i&&(c="incorrect");var l="-";try{l=dayjs(a.matchDate()).format("DD MMM YYYY")}catch(e){}var u=o?n?n.name():app.translator.trans("huseyinfiliz-pickem.lib.common.away"):r?r.name():app.translator.trans("huseyinfiliz-pickem.lib.common.home"),p=o?r?r.name():app.translator.trans("huseyinfiliz-pickem.lib.common.home"):n?n.name():app.translator.trans("huseyinfiliz-pickem.lib.common.away");return m("div",{key:String(s),className:"PickemList-item "+c},m("div",{className:"PickemList-cell type-match"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.lib.common.match")),m("span",{className:"value"},u," ",app.translator.trans("huseyinfiliz-pickem.lib.common.vs")," ",p)),m("div",{className:"PickemList-cell type-date"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.lib.common.date")),m("span",{className:"value"},l)),m("div",{className:"PickemList-cell type-pick"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.forum.picks.your_pick")),m("span",{className:"value"},e.formatResult(t.selectedOutcome(),r,n))),m("div",{className:"PickemList-cell type-result"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.lib.common.result")),m("span",{className:"value"},a.result()?e.formatResult(a.result(),r,n):"-")),m("div",{className:"PickemList-cell type-status"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.lib.common.status")),m("span",{className:"value"},null===i?m("span",{className:"PickStatus PickStatus--pending"},m("i",{className:"fas fa-hourglass-half"})," ",app.translator.trans("huseyinfiliz-pickem.lib.status.pending")):i?m("span",{className:"PickStatus PickStatus--correct"},m("i",{className:"fas fa-check"})," ",app.translator.trans("huseyinfiliz-pickem.lib.status.correct")):m("span",{className:"PickStatus PickStatus--incorrect"},m("i",{className:"fas fa-times"})," ",app.translator.trans("huseyinfiliz-pickem.lib.status.incorrect")))))}))),n&&m("div",{className:"LoadMore"},m(j(),{className:"Button Button--primary",onclick:s,loading:r},app.translator.trans("huseyinfiliz-pickem.lib.buttons.load_more"))))},a.formatResult=function(e,t,a){return"home"===e?t?t.name():app.translator.trans("huseyinfiliz-pickem.lib.common.home"):"away"===e?a?a.name():app.translator.trans("huseyinfiliz-pickem.lib.common.away"):"draw"===e?app.translator.trans("huseyinfiliz-pickem.lib.common.draw"):e},t}(I());const W=flarum.core.compat["common/helpers/avatar"];var G=a.n(W),U=function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var a=t.prototype;return a.view=function(){var e=this.attrs,t=e.userScores,a=e.myScore,r=e.hasMore,n=e.loading,s=e.onLoadMore;return t&&t.length>0||n?m("div",{className:"LeaderboardTab"},this.renderMyRankCard(a),m("div",{className:"Leaderboard"},t.length>=3&&this.renderPodium(t.slice(0,3)),this.renderList(t),r&&m("div",{className:"LoadMore"},m(j(),{className:"Button Button--primary",loading:n,onclick:s},app.translator.trans("huseyinfiliz-pickem.lib.buttons.load_more"))))):m("div",{className:"LeaderboardTab"},m("p",null,app.translator.trans("huseyinfiliz-pickem.lib.messages.no_data")))},a.renderMyRankCard=function(e){if(!e||!app.session.user)return null;var t=e.attribute("rank"),a=e.totalPoints(),r=e.correctPicks(),n=e.accuracy();return m("div",{className:"MyRankCard"},m("div",{className:"MyRankCard-content"},m("div",{className:"MyRankCard-user"},m("div",{className:"avatar"},G()(app.session.user,{className:"Avatar"})),m("div",{className:"info"},m("span",{className:"label"},app.translator.trans("huseyinfiliz-pickem.forum.picks.your_pick")),m("span",{className:"rank"},"#",t))),m("div",{className:"MyRankCard-stats"},m("div",{className:"stat"},m("span",{className:"label"},app.translator.trans("huseyinfiliz-pickem.lib.common.points")),m("span",{className:"value"},a)),m("div",{className:"stat"},m("span",{className:"label"},app.translator.trans("huseyinfiliz-pickem.lib.headers.correct")),m("span",{className:"value"},r)),m("div",{className:"stat"},m("span",{className:"label"},app.translator.trans("huseyinfiliz-pickem.lib.headers.accuracy")),m("span",{className:"value"},n,"%")))))},a.renderPodium=function(e){var t=["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"],a=["first","second","third"];return m("div",{className:"Podium"},e.map(function(e,r){var n=e&&("function"==typeof e.user?e.user():e.user),s="function"==typeof e.totalPoints?e.totalPoints():e.totalPoints,i="function"==typeof e.correctPicks?e.correctPicks():e.correctPicks,o=app.session.user&&n&&app.session.user.id()===n.id();return m("div",{className:"Podium-card "+a[r]+" "+(o?"is-me":""),key:r},m("div",{className:"medal"},t[r]),m("div",{className:"rank"},"#",r+1),m("div",{className:"podium-avatar",style:{marginBottom:"5px"}},n?G()(n,{className:"Avatar"}):null),m("div",{className:"username"},n?"function"==typeof n.displayName?n.displayName():n.displayName:app.translator.trans("core.lib.username.deleted_text")),m("div",{className:"points"},s,m("small",null,app.translator.trans("huseyinfiliz-pickem.lib.common.points"))),m("div",{className:"stats"},m("div",{className:"stat"},m("div",{className:"label"},app.translator.trans("huseyinfiliz-pickem.lib.headers.correct")),m("div",{className:"value"},i)),m("div",{className:"stat"},m("div",{className:"label"},app.translator.trans("huseyinfiliz-pickem.lib.headers.accuracy")),m("div",{className:"value"},e.accuracy(),"%"))))}))},a.renderList=function(e){return m("div",{className:"PickemList"},m("div",{className:"PickemList-header"},m("div",{className:"PickemList-cell type-rank"},app.translator.trans("huseyinfiliz-pickem.lib.headers.rank")),m("div",{className:"PickemList-cell type-player"},app.translator.trans("huseyinfiliz-pickem.lib.headers.player")),m("div",{className:"PickemList-cell type-stat"},app.translator.trans("huseyinfiliz-pickem.lib.common.points")),m("div",{className:"PickemList-cell type-stat"},app.translator.trans("huseyinfiliz-pickem.lib.headers.correct")),m("div",{className:"PickemList-cell type-stat"},app.translator.trans("huseyinfiliz-pickem.lib.headers.total")),m("div",{className:"PickemList-cell type-stat"},app.translator.trans("huseyinfiliz-pickem.lib.headers.accuracy"))),m("div",{className:"PickemList-body"},e.map(function(e,t){var a=e&&("function"==typeof e.user?e.user():e.user),r=e&&("function"==typeof e.id?e.id():e.id)||t,n="function"==typeof e.totalPoints?e.totalPoints():e.totalPoints,s="function"==typeof e.correctPicks?e.correctPicks():e.correctPicks,i="function"==typeof e.totalPicks?e.totalPicks():e.totalPicks,o="function"==typeof e.accuracy?e.accuracy():0,c=app.session.user&&a&&app.session.user.id()===a.id();return m("div",{key:String(r),className:"PickemList-item "+(t<3?"top-"+(t+1):"")+" "+(c?"is-me":"")},m("div",{className:"PickemList-cell type-rank"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.lib.headers.rank")),m("span",{className:"value"},"#",t+1)),m("div",{className:"PickemList-cell type-player"},m("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},a?G()(a,{className:"Avatar--small"}):null,m("span",{className:"value"},a?"function"==typeof a.displayName?a.displayName():a.displayName:app.translator.trans("core.lib.username.deleted_text")))),m("div",{className:"PickemList-cell type-stat"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.lib.common.points")),m("span",{className:"value"},m("strong",null,n))),m("div",{className:"PickemList-cell type-stat"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.lib.headers.correct")),m("span",{className:"value"},s)),m("div",{className:"PickemList-cell type-stat"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.lib.headers.total")),m("span",{className:"value"},i)),m("div",{className:"PickemList-cell type-stat"},m("span",{className:"mobile-label"},app.translator.trans("huseyinfiliz-pickem.lib.headers.accuracy")),m("span",{className:"value"},o,"%")))})))},t}(I());const V=flarum.core.compat["common/helpers/listItems"];var J=a.n(V),Z=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).activeTab="matches",t.loading=!0,t.picks={},t.myPicksLoading=!1,t.myPicksHasMore=!1,t.userScores=[],t.leaderboardLoading=!1,t.leaderboardHasMore=!1,t.myScore=null,t.filterDataLoaded=!1,t}d(t,e);var a=t.prototype;return a.oninit=function(t){e.prototype.oninit.call(this,t),app.forum.attribute("pickem.canView")?(this.activeTab="matches",this.loading=!0,this.picks={},this.myPicksLoading=!1,this.myPicksHasMore=!1,this.userScores=[],this.leaderboardLoading=!1,this.leaderboardHasMore=!1,this.myScore=null,this.filterDataLoaded=!1,this.loadInitialData()):m.route.set("/")},a.oncreate=function(t){e.prototype.oncreate.call(this,t),app.setTitle(O()(app.translator.trans("huseyinfiliz-pickem.lib.nav.pickem")))},a.loadInitialData=function(){var e=x(M().mark(function e(){var t,a;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],app.session.user&&app.forum.attribute("pickem.makePicks")&&(t.push(this.loadPicks(0)),t.push(this.loadMyRank())),t.push(this.loadLeaderboard(0)),t.push(this.loadFilterData()),e.next=1,Promise.all(t);case 1:e.next=3;break;case 2:e.prev=2,a=e.catch(0),console.error("Error loading initial data:",a);case 3:return e.prev=3,this.loading=!1,this.filterDataLoaded=!0,m.redraw(),e.finish(3);case 4:case"end":return e.stop()}},e,this,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),a.loadMyRank=function(){var e=x(M().mark(function e(){var t,a;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(app.session.user){e.next=1;break}return e.abrupt("return");case 1:return e.prev=1,e.next=2,app.store.find("pickem-user-scores",{filter:{user:app.session.user.id()},page:{limit:1}});case 2:(t=e.sent)&&t.length>0&&(this.myScore=t[0]),e.next=4;break;case 3:e.prev=3,a=e.catch(1),console.error("Error loading my rank:",a);case 4:case"end":return e.stop()}},e,this,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),a.loadPicks=function(){var e=x(M().mark(function e(t){var a,r,n,s;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=0),app.session.user&&app.forum.attribute("pickem.makePicks")){e.next=1;break}return e.abrupt("return");case 1:return this.myPicksLoading=!0,m.redraw(),a=20,e.prev=2,e.next=3,app.store.find("pickem-picks",{filter:{user:app.session.user.id()},include:"event,event.homeTeam,event.awayTeam",page:{offset:t,limit:a}});case 3:(r=e.sent)&&Array.isArray(r)&&(n=r.reduce(function(e,t){try{var a=t&&("function"==typeof t.event?t.event():t.event);a&&"function"==typeof a.id&&(e[String(a.id())]=t)}catch(e){console.warn("Invalid pick:",e)}return e},{}),this.picks=w({},this.picks,n),this.myPicksHasMore=r.length>=a),e.next=5;break;case 4:e.prev=4,s=e.catch(2),console.error("Error loading picks:",s);case 5:return e.prev=5,this.myPicksLoading=!1,m.redraw(),e.finish(5);case 6:case"end":return e.stop()}},e,this,[[2,4,5,6]])}));return function(t){return e.apply(this,arguments)}}(),a.loadLeaderboard=function(){var e=x(M().mark(function e(t){var a,r,n,s;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=0),this.leaderboardLoading=!0,m.redraw(),a=20,e.prev=1,e.next=2,app.store.find("pickem-user-scores",{include:"user",page:{offset:t,limit:a}});case 2:r=e.sent,0===t?this.userScores=r:(n=this.userScores).push.apply(n,r),this.leaderboardHasMore=r.length>=a,e.next=4;break;case 3:e.prev=3,s=e.catch(1),console.error("Error loading leaderboard:",s);case 4:return e.prev=4,this.leaderboardLoading=!1,m.redraw(),e.finish(4);case 5:case"end":return e.stop()}},e,this,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}(),a.loadFilterData=function(){var e=x(M().mark(function e(){var t;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,Promise.all([app.store.find("pickem-public-seasons"),app.store.find("pickem-public-teams"),app.store.find("pickem-public-weeks")]);case 1:e.next=3;break;case 2:e.prev=2,t=e.catch(0),console.error("Error loading filter data:",t);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),a.view=function(){return m("div",{className:"IndexPage PickemPage"},m("header",{className:"Hero PickemHero"},m("div",{className:"container"},m("div",{className:"containerNarrow"},m("h1",{className:"Hero-title"},m("i",{className:"icon fas fa-trophy"})," ",app.translator.trans("huseyinfiliz-pickem.lib.nav.pickem"))))),m("div",{className:"container"},m("div",{className:"sideNavContainer"},m("nav",{className:"IndexPage-nav sideNav"},m("ul",null,J()(s().prototype.sidebarItems().toArray()))),m("div",{className:"IndexPage-results sideNavOffset"},m("div",{className:"PickemPage-tabs"},this.renderTab("matches",app.translator.trans("huseyinfiliz-pickem.lib.nav.matches")),app.session.user&&app.forum.attribute("pickem.makePicks")&&this.renderTab("my_picks",app.translator.trans("huseyinfiliz-pickem.lib.nav.my_picks")),this.renderTab("leaderboard",app.translator.trans("huseyinfiliz-pickem.lib.nav.leaderboard"))),this.loading?m($(),null):m("div",{className:"PickemPage-tabContent"},this.renderAllTabs())))))},a.renderTab=function(e,t){var a=this,r=this.activeTab===e;return m("button",{className:"Button Button--flat PickemPage-tab "+(r?"active":""),onclick:function(){a.activeTab=e}},t)},a.renderAllTabs=function(){var e=this;return m("[",null,m("div",{className:"PickemPage-tabPane "+("matches"===this.activeTab?"active":"")},this.filterDataLoaded&&m(B,{picks:this.picks,onPickChange:function(t){e.picks=t}})),app.session.user&&app.forum.attribute("pickem.makePicks")&&m("div",{className:"PickemPage-tabPane "+("my_picks"===this.activeTab?"active":"")},m(R,{picks:this.picks,loading:this.myPicksLoading,hasMore:this.myPicksHasMore,onLoadMore:function(){return e.loadPicks(Object.keys(e.picks).length)}})),m("div",{className:"PickemPage-tabPane "+("leaderboard"===this.activeTab?"active":"")},m(U,{userScores:this.userScores,myScore:this.myScore,hasMore:this.leaderboardHasMore,loading:this.leaderboardLoading,onLoadMore:function(){return e.loadLeaderboard(e.userScores.length)}})))},t}(D());const q=flarum.core.compat["forum/components/Notification"];var Q=function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var a=t.prototype;return a.icon=function(){return"fas fa-trophy"},a.href=function(){return app.route("pickem")},a.content=function(){var e=this.attrs.notification.content()||{},t=e.homeTeam||app.translator.trans("huseyinfiliz-pickem.lib.common.home"),a=e.awayTeam||app.translator.trans("huseyinfiliz-pickem.lib.common.away"),r=void 0!==e.homeScore?e.homeScore:0,n=void 0!==e.awayScore?e.awayScore:0;return app.forum.attribute("pickem.reverseDisplay")?app.translator.trans("huseyinfiliz-pickem.forum.notification",{home:a,hScore:n,aScore:r,away:t}):app.translator.trans("huseyinfiliz-pickem.forum.notification",{home:t,hScore:r,aScore:n,away:a})},a.excerpt=function(){return null},t}(a.n(q)());t().initializers.add("huseyinfiliz/pickem",function(){N.forEach(function(e){return e.extend(t())}),t().routes.pickem={path:"/pickem",component:Z},(0,r.extend)(s().prototype,"navItems",function(e){t().forum.attribute("pickem.canView")&&e.add("pickem",o().component({href:t().route("pickem"),icon:"fas fa-trophy"},t().translator.trans("huseyinfiliz-pickem.lib.nav.pickem")),85)}),t().notificationComponents.pickem_event_result=Q})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map