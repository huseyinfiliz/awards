/*! For license information please see forum.js.LICENSE.txt */
(()=>{var t={24:(t,e,r)=>{var a=r(163),n=r(110),o=r(996),s=r(312),i=r(166),u=r(766),c=r(760);function l(){"use strict";var e=n(),r=e.m(l),d=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function m(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))}var f={throw:1,return:2,break:3,continue:3};function p(t){var e,r;return function(a){e||(e={stop:function(){return r(a.a,2)},catch:function(){return a.v},abrupt:function(t,e){return r(a.a,f[t],e)},delegateYield:function(t,n,o){return e.resultName=n,r(a.d,c(t),o)},finish:function(t){return r(a.f,t)}},r=function(t,r,n){a.p=e.prev,a.n=e.next;try{return t(r,n)}finally{e.next=a.n}}),e.resultName&&(e[e.resultName]=a.v,e.resultName=void 0),e.sent=a.v,e.next=a.n;try{return t.call(this,e)}finally{a.p=e.prev,a.n=e.next}}}return(t.exports=l=function(){return{wrap:function(t,r,a,n){return e.w(p(t),r,a,n&&n.reverse())},isGeneratorFunction:m,mark:e.m,awrap:function(t,e){return new a(t,e)},AsyncIterator:i,async:function(t,e,r,a,n){return(m(e)?s:o)(p(t),e,r,a,n)},keys:u,values:c}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},110:(t,e,r)=>{var a=r(397);function n(){var e,r,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function u(t,n,o,s){var i=n&&n.prototype instanceof l?n:l,u=Object.create(i.prototype);return a(u,"_invoke",function(t,a,n){var o,s,i,u=0,l=n||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return o=t,s=0,i=e,m.n=r,c}};function f(t,a){for(s=t,i=a,r=0;!d&&u&&!n&&r<l.length;r++){var n,o=l[r],f=m.p,p=o[2];t>3?(n=p===a)&&(i=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((n=t<2&&f<o[1])?(s=0,m.v=a,m.n=o[1]):f<p&&(n=t<3||o[0]>a||a>p)&&(o[4]=t,o[5]=a,m.n=p,s=0))}if(n||t>1)return c;throw d=!0,a}return function(n,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),s=l,i=p;(r=s<2?e:i)||!d;){o||(s?s<3?(s>1&&(m.n=-1),f(s,i)):m.n=i:m.v=i);try{if(u=2,o){if(s||(n="next"),r=o[n]){if(!(r=r.call(o,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=o.return)&&r.call(o),s<2&&(i=TypeError("The iterator does not provide a '"+n+"' method"),s=1);o=e}else if((r=(d=m.n<0)?i:t.call(a,m))!==c)break}catch(t){o=e,s=1,i=t}finally{u=1}}return{value:r,done:d}}}(t,o,s),!0),u}var c={};function l(){}function d(){}function m(){}r=Object.getPrototypeOf;var f=[][s]?r(r([][s]())):(a(r={},s,function(){return this}),r),p=m.prototype=l.prototype=Object.create(f);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,a(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return d.prototype=m,a(p,"constructor",m),a(m,"constructor",d),d.displayName="GeneratorFunction",a(m,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,s,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(t.exports=n=function(){return{w:u,m:h}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},163:t=>{t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},166:(t,e,r)=>{var a=r(163),n=r(397);t.exports=function t(e,r){function o(t,n,s,i){try{var u=e[t](n),c=u.value;return c instanceof a?r.resolve(c.v).then(function(t){o("next",t,s,i)},function(t){o("throw",t,s,i)}):r.resolve(c).then(function(t){u.value=t,s(u)},function(t){return o("throw",t,s,i)})}catch(t){i(t)}}var s;this.next||(n(t.prototype),n(t.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(t,e,a){function n(){return new r(function(e,r){o(t,a,e,r)})}return s=s?s.then(n,n):n()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},183:(t,e,r)=>{var a=r(24)();t.exports=a;try{regeneratorRuntime=a}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},312:(t,e,r)=>{var a=r(110),n=r(166);t.exports=function(t,e,r,o,s){return new n(a().w(t,e,r,o),s||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},397:t=>{function e(r,a,n,o){var s=Object.defineProperty;try{s({},"",{})}catch(r){s=0}t.exports=e=function(t,r,a,n){function o(r,a){e(t,r,function(t){return this._invoke(r,a,t)})}r?s?s(t,r,{value:a,enumerable:!n,configurable:!n,writable:!n}):t[r]=a:(o("next",0),o("throw",1),o("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,a,n,o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},735:t=>{function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},760:(t,e,r)=>{var a=r(735).default;t.exports=function(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(a(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},766:t=>{t.exports=function(t){var e=Object(t),r=[];for(var a in e)r.unshift(a);return function t(){for(;r.length;)if((a=r.pop())in e)return t.value=a,t.done=!1,t;return t.done=!0,t}},t.exports.__esModule=!0,t.exports.default=t.exports},996:(t,e,r)=>{var a=r(312);t.exports=function(t,e,r,n,o){var s=a(t,e,r,n,o);return s.next().then(function(t){return t.done?t.value:s.next()})},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["forum/app"];var e=r.n(t);const a=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/IndexPage"];var o=r.n(n);const s=flarum.core.compat["common/components/LinkButton"];var i=r.n(s);const u=flarum.core.compat["common/extenders"];var c=r.n(u);function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function d(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,l(t,e)}const f=flarum.core.compat["common/Model"];var p=r.n(f),h=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=p().attribute("name"),e.slug=p().attribute("slug"),e.year=p().attribute("year"),e.description=p().attribute("description"),e.startsAt=p().attribute("startsAt",p().transformDate),e.endsAt=p().attribute("endsAt",p().transformDate),e.status=p().attribute("status"),e.showLiveVotes=p().attribute("showLiveVotes"),e.imageUrl=p().attribute("imageUrl"),e.createdAt=p().attribute("createdAt",p().transformDate),e.updatedAt=p().attribute("updatedAt",p().transformDate),e.categories=p().hasMany("categories"),e.categoryCount=p().attribute("categoryCount"),e.nomineeCount=p().attribute("nomineeCount"),e.voteCount=p().attribute("voteCount"),e.canViewResults=p().attribute("canViewResults"),e}d(e,t);var r=e.prototype;return r.isDraft=function(){return"draft"===this.status()},r.isActive=function(){return"active"===this.status()},r.hasEnded=function(){return"ended"===this.status()},r.isPublished=function(){return"published"===this.status()},r.isVotingOpen=function(){var t=new Date,e=this.startsAt(),r=this.endsAt();return this.isActive()&&e&&r&&t>=e&&t<=r},r.canShowVotes=function(){return this.isPublished()||this.isActive()&&this.showLiveVotes()},e}(p()),v=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=p().attribute("name"),e.slug=p().attribute("slug"),e.description=p().attribute("description"),e.sortOrder=p().attribute("sortOrder"),e.allowOther=p().attribute("allowOther"),e.createdAt=p().attribute("createdAt",p().transformDate),e.updatedAt=p().attribute("updatedAt",p().transformDate),e.award=p().hasOne("award"),e.nominees=p().hasMany("nominees"),e.votes=p().hasMany("votes"),e.otherSuggestions=p().hasMany("otherSuggestions"),e.nomineeCount=p().attribute("nomineeCount"),e.voteCount=p().attribute("voteCount"),e.userVoteIds=p().attribute("userVoteIds"),e}d(e,t);var r=e.prototype;return r.hasUserVoted=function(){var t=this.userVoteIds();return t&&t.length>0},r.getUserVotedNomineeIds=function(){return this.userVoteIds()||[]},e}(p()),g=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=p().attribute("name"),e.description=p().attribute("description"),e.slug=p().attribute("slug"),e.imageUrl=p().attribute("imageUrl"),e.metadata=p().attribute("metadata"),e.sortOrder=p().attribute("sortOrder"),e.createdAt=p().attribute("createdAt",p().transformDate),e.updatedAt=p().attribute("updatedAt",p().transformDate),e.category=p().hasOne("category"),e.voteCount=p().attribute("voteCount"),e.votePercentage=p().attribute("votePercentage"),e.rank=p().attribute("rank"),e.isWinner=p().attribute("isWinner"),e.isRunnerUp=p().attribute("isRunnerUp"),e.isThirdPlace=p().attribute("isThirdPlace"),e}return d(e,t),e}(p()),y=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).createdAt=p().attribute("createdAt",p().transformDate),e.nomineeId=p().attribute("nomineeId"),e.categoryId=p().attribute("categoryId"),e.nominee=p().hasOne("nominee"),e.category=p().hasOne("category"),e.user=p().hasOne("user"),e}return d(e,t),e}(p()),w=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=p().attribute("name"),e.status=p().attribute("status"),e.createdAt=p().attribute("createdAt",p().transformDate),e.updatedAt=p().attribute("updatedAt",p().transformDate),e.category=p().hasOne("category"),e.user=p().hasOne("user"),e.mergedToNominee=p().hasOne("mergedToNominee"),e}d(e,t);var r=e.prototype;return r.isPending=function(){return"pending"===this.status()},r.isApproved=function(){return"approved"===this.status()},r.isRejected=function(){return"rejected"===this.status()},r.isMerged=function(){return"merged"===this.status()},e}(p());const b=[(new(c().Store)).add("awards",h).add("award-categories",v).add("award-nominees",g).add("award-votes",y).add("award-other-suggestions",w)];function N(t,e,r,a,n,o,s){try{var i=t[o](s),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(a,n)}function x(t){return function(){var e=this,r=arguments;return new Promise(function(a,n){var o=t.apply(e,r);function s(t){N(o,a,n,s,i,"next",t)}function i(t){N(o,a,n,s,i,"throw",t)}s(void 0)})}}var C=r(183),A=r.n(C);const _=flarum.core.compat["common/components/Page"];var O=r.n(_);const S=flarum.core.compat["common/components/LoadingIndicator"];var V=r.n(S);const P=flarum.core.compat["common/components/Select"];var z=r.n(P);const I=flarum.core.compat["common/helpers/listItems"];var k=r.n(I);const M=flarum.core.compat["common/utils/extractText"];var T=r.n(M);const j=flarum.core.compat["common/Component"];var E=r.n(j),D=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).loading=!1,e}d(r,t);var a=r.prototype;return a.view=function(){var t=this,r=this.attrs.nominee,a=this.attrs.category,n=this.attrs.award,o=e().store.all("award-votes"),s=r.id(),i=a.id(),u=o.find(function(t){var e,r,a=(null==t.nomineeId?void 0:t.nomineeId())||(null==(e=t.data)||null==(e=e.relationships)||null==(e=e.nominee)||null==(e=e.data)?void 0:e.id),n=(null==t.categoryId?void 0:t.categoryId())||(null==(r=t.data)||null==(r=r.relationships)||null==(r=r.category)||null==(r=r.data)?void 0:r.id);return String(a)===String(s)&&String(n)===String(i)}),c=!!u,l=n.isVotingOpen()&&e().session.user,d=n.canShowVotes(),f=l&&!this.loading;return m("div",{className:"NomineeCard "+(c?"NomineeCard--voted":"")+" "+(f?"NomineeCard--clickable":"")+" "+(this.loading?"NomineeCard--loading":""),onclick:f?function(){return t.toggleVote(r,a,u)}:void 0,role:f?"button":void 0,tabindex:f?0:void 0,onkeydown:f?function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.toggleVote(r,a,u))}:void 0},m("div",{className:"NomineeCard-image"},r.imageUrl()?m("img",{src:r.imageUrl(),alt:r.name(),loading:"lazy"}):m("div",{className:"NomineeCard-placeholder"},m("i",{className:"fas fa-user"})),c?m("div",{className:"NomineeCard-check"},m("i",{className:"fas fa-check"})):null),m("div",{className:"NomineeCard-content"},m("h3",{className:"NomineeCard-title"},r.name()),r.description()?m("p",{className:"NomineeCard-description"},r.description()):null,d?m("div",{className:"NomineeCard-stats"},m("span",{className:"NomineeCard-votes"},e().translator.trans("huseyinfiliz-awards.forum.results.votes",{count:r.voteCount()||0}))):null,this.loading?m("div",{className:"NomineeCard-loading"},m("i",{className:"fas fa-spinner fa-spin"})):null))},a.toggleVote=function(t,r,a){var n=this;if(e().session.user){this.loading=!0,m.redraw();var o=r.id();a?a.delete().then(function(){e().alerts.show({type:"success"},e().translator.trans("huseyinfiliz-awards.forum.voting.vote_removed")),n.loading=!1,m.redraw()}).catch(function(t){throw n.loading=!1,m.redraw(),t}):e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/award-votes",body:{data:{attributes:{nomineeId:t.id()}}}}).then(function(t){e().store.all("award-votes").filter(function(t){var e,r=(null==t.categoryId?void 0:t.categoryId())||(null==(e=t.data)||null==(e=e.relationships)||null==(e=e.category)||null==(e=e.data)?void 0:e.id);return String(r)===String(o)}).forEach(function(t){return e().store.remove(t)}),e().store.pushPayload(t),e().alerts.show({type:"success"},e().translator.trans("huseyinfiliz-awards.forum.voting.vote_saved")),n.loading=!1,m.redraw()}).catch(function(t){throw n.loading=!1,m.redraw(),t})}},r}(E());const L=flarum.core.compat["common/components/Button"];var U=r.n(L);const F=flarum.core.compat["common/components/Modal"];var R=r.n(F);const B=flarum.core.compat["common/utils/Stream"];var G=r.n(B);const H=flarum.core.compat["common/components/Alert"];var q=r.n(H),W=function(t){function r(){return t.apply(this,arguments)||this}d(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.category=this.attrs.category,this.name=G()(""),this.success=!1},a.className=function(){return"HFAwardsModal HFAwardsSuggestionModal Modal--small"},a.title=function(){return e().translator.trans("huseyinfiliz-awards.forum.other.suggest")},a.content=function(){var t=this;return this.success?m("div",{className:"Modal-body"},m("div",{className:"Form-group"},m(q(),{type:"success"},e().translator.trans("huseyinfiliz-awards.forum.other.success"))),m("div",{className:"Form-group"},m(U(),{className:"Button Button--primary",onclick:function(){return t.hide()}},e().translator.trans("core.lib.modal.close")))):m("div",{className:"Modal-body"},m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.forum.other.placeholder")),m("input",{className:"FormControl",bidi:this.name,required:!0})),m("div",{className:"Form-group"},m(U(),{className:"Button Button--primary",type:"submit",loading:this.loading,disabled:!this.name()},e().translator.trans("huseyinfiliz-awards.forum.other.submit"))))},a.onsubmit=function(t){var r=this;t.preventDefault(),this.loading=!0,e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/award-other-suggestions",body:{data:{attributes:{categoryId:this.category.id(),name:this.name()}}},errorHandler:this.onerror.bind(this)}).then(function(t){r.success=!0,r.loading=!1,m.redraw()}).catch(function(){r.loading=!1,m.redraw()})},r}(R()),Y=function(t){function r(){return t.apply(this,arguments)||this}return d(r,t),r.prototype.view=function(){var t=this.attrs.category;return m("div",{className:"NomineeCard NomineeCard--other"},m("div",{className:"NomineeCard-image"},m("div",{className:"NomineeCard-placeholder"},m("i",{className:"fas fa-plus"}))),m("div",{className:"NomineeCard-content"},m("h3",{className:"NomineeCard-title"},e().translator.trans("huseyinfiliz-awards.forum.other.suggest")),m(U(),{className:"Button Button--text",onclick:function(){return e().modal.show(W,{category:t})}},e().translator.trans("huseyinfiliz-awards.forum.other.suggest"))))},r}(E()),J=function(t){function r(){return t.apply(this,arguments)||this}return d(r,t),r.prototype.view=function(){var t=this.attrs.category,r=this.attrs.award,a=t.nominees()||[];return m("div",{className:"CategoryCard",id:"category-"+t.id()},m("div",{className:"CategoryCard-header"},m("h2",null,t.name()),m("p",null,t.description())),m("div",{className:"CategoryCard-grid"},a.map(function(e){return m(D,{nominee:e,category:t,award:r})}),t.allowOther()&&r.isVotingOpen()&&e().session.user&&m(Y,{category:t})),0===a.length&&!t.allowOther()&&m("div",{className:"EmptyState"},m("p",null,e().translator.trans("huseyinfiliz-awards.forum.empty.no_nominees"))))},r}(E()),K=function(t){function r(){return t.apply(this,arguments)||this}d(r,t);var a=r.prototype;return a.formatEndDate=function(t){if(!t)return"";var r=new Date,a=t.getTime()-r.getTime();if(a<=0)return e().translator.trans("huseyinfiliz-awards.forum.voting.ended");var n=Math.floor(a/864e5),o=Math.floor(a%864e5/36e5);return n>0?e().translator.trans("huseyinfiliz-awards.forum.voting.ends_in_days",{days:n}):o>0?e().translator.trans("huseyinfiliz-awards.forum.voting.ends_in_hours",{hours:o}):e().translator.trans("huseyinfiliz-awards.forum.voting.ends_soon")},a.view=function(){var t=this.attrs.award,r=t.categories()||[],a=t.endsAt();return m("div",{className:"VotingView"},m("div",{className:"VotingView-status"},t.isVotingOpen()?m("span",{className:"TagLabel Label--success"},this.formatEndDate(a)):m("span",{className:"TagLabel Label--warning"},e().translator.trans("huseyinfiliz-awards.forum.error.voting_closed"))),m("div",{className:"VotingView-content"},0===r.length?m("div",{className:"EmptyState"},m("p",null,e().translator.trans("huseyinfiliz-awards.forum.empty.no_categories"))):r.map(function(e){return m(J,{category:e,award:t})})))},r}(E()),Q=function(t){function r(){return t.apply(this,arguments)||this}return d(r,t),r.prototype.view=function(){var t=this.attrs.category,r=this.attrs.award,a=(t.nominees()||[]).sort(function(t,e){return(e.voteCount()||0)-(t.voteCount()||0)}).slice(0,3),n=r.canShowVotes();return m("div",{className:"CategoryCard CategoryResultCard",id:"category-"+t.id()},m("div",{className:"CategoryCard-header"},m("h2",null,t.name()),m("p",null,t.description())),m("div",{className:"CategoryCard-grid"},a.map(function(t,r){var a=0===r,o=1===r,s=2===r;return m("div",{className:"NomineeCard "+(a?"NomineeCard--winner":"")},m("div",{className:"NomineeCard-image"},t.imageUrl()?m("img",{src:t.imageUrl(),alt:t.name()}):m("div",{className:"NomineeCard-placeholder"},m("i",{className:"fas fa-user"})),a&&m("div",{className:"NomineeCard-badge NomineeCard-badge--gold"},m("i",{className:"fas fa-medal"})),o&&m("div",{className:"NomineeCard-badge NomineeCard-badge--silver"},m("i",{className:"fas fa-medal"})),s&&m("div",{className:"NomineeCard-badge NomineeCard-badge--bronze"},m("i",{className:"fas fa-medal"}))),m("div",{className:"NomineeCard-content"},m("h3",{className:"NomineeCard-title"},t.name()),t.description()?m("p",{className:"NomineeCard-description"},t.description()):null,a&&m("div",{className:"TagLabel Label--success"},e().translator.trans("huseyinfiliz-awards.forum.results.winner")),o&&m("div",{className:"TagLabel Label--info"},e().translator.trans("huseyinfiliz-awards.forum.results.runner_up")),n&&m("div",{className:"NomineeCard-stats"},m("span",{className:"NomineeCard-votes"},e().translator.trans("huseyinfiliz-awards.forum.results.votes",{count:t.voteCount()})),m("span",{className:"NomineeCard-percentage"},e().translator.trans("huseyinfiliz-awards.forum.results.percentage",{percent:t.votePercentage()})))))})))},r}(E()),X=function(t){function r(){return t.apply(this,arguments)||this}return d(r,t),r.prototype.view=function(){var t=this.attrs.award,r=t.categories()||[];return m("div",{className:"ResultsView"},m("div",{className:"ResultsView-status"},m("span",{className:"TagLabel Label--info"},e().translator.trans("huseyinfiliz-awards.forum.page.results_published"))),m("div",{className:"ResultsView-content"},0===r.length?m("div",{className:"EmptyState"},m("p",null,e().translator.trans("huseyinfiliz-awards.forum.empty.no_categories"))):r.map(function(e){return m(Q,{category:e,award:t})})))},r}(E()),Z=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).loading=!0,e.awards=[],e.selectedAward=null,e}d(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.loadAwards()},a.oncreate=function(r){t.prototype.oncreate.call(this,r);var a=e().forum.attribute("awardsNavTitle")||"Awards";e().setTitle(T()(a))},a.loadAwards=function(){var t=x(A().mark(function t(){var r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),t.prev=1,t.next=2,e().store.find("awards",{include:"categories,categories.nominees"});case 2:if(r=t.sent,this.awards=(r||[]).filter(function(t){return t.isActive()||t.isPublished()||t.hasEnded()}),this.selectedAward=this.awards.find(function(t){return t.isActive()})||this.awards.find(function(t){return t.isPublished()})||this.awards[0]||null,!e().session.user){t.next=3;break}return t.next=3,this.loadUserVotes();case 3:t.next=5;break;case 4:t.prev=4,a=t.catch(1),console.error("Failed to load awards:",a);case 5:this.loading=!1,m.redraw();case 6:case"end":return t.stop()}},t,this,[[1,4]])}));return function(){return t.apply(this,arguments)}}(),a.loadUserVotes=function(){var t=x(A().mark(function t(){var r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,e().store.find("award-votes");case 1:t.next=3;break;case 2:t.prev=2,r=t.catch(0),console.error("Failed to load user votes:",r);case 3:case"end":return t.stop()}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),a.view=function(){var t=e().forum.attribute("awardsNavTitle")||"Awards";return m("div",{className:"IndexPage huseyinfiliz-awards"},this.hero(t),m("div",{className:"container"},m("div",{className:"sideNavContainer"},m("nav",{className:"IndexPage-nav sideNav"},m("ul",null,k()(o().prototype.sidebarItems().toArray()))),m("div",{className:"IndexPage-results sideNavOffset"},this.loading?m(V(),null):this.content()))))},a.hero=function(t){return m("header",{className:"Hero AwardsHero"},m("div",{className:"container"},m("div",{className:"containerNarrow"},m("h1",{className:"Hero-title"},m("i",{className:"icon fas fa-trophy"})," ",t),this.selectedAward?m("div",{className:"Hero-subtitle"},this.selectedAward.description()):null)))},a.content=function(){return 0===this.awards.length?m("div",{className:"EmptyState"},m("i",{className:"fas fa-trophy"}),m("h2",null,e().translator.trans("huseyinfiliz-awards.forum.empty.no_awards")),m("p",null,e().translator.trans("huseyinfiliz-awards.forum.empty.no_awards_description"))):m("div",{className:"AwardsPage-content"},this.awards.length>1?this.renderAwardSelector():null,this.selectedAward?this.renderCategoryNav():null,this.selectedAward?this.renderAwardView():null)},a.renderAwardSelector=function(){var t,e=this,r={};return this.awards.forEach(function(t){r[String(t.id())]=t.name()+" ("+t.year()+")"}),m("div",{className:"AwardsPage-selector"},m(z(),{value:String(null==(t=this.selectedAward)?void 0:t.id()),options:r,onchange:function(t){e.selectedAward=e.awards.find(function(e){return String(e.id())===t})||null,m.redraw()}}))},a.renderCategoryNav=function(){var t,e=this,r=(null==(t=this.selectedAward)||null==t.categories?void 0:t.categories())||[];return 0===r.length?null:m("div",{className:"AwardsPage-categoryNav"},r.map(function(t){return m("button",{key:t.id(),className:"Button Button--text AwardsPage-categoryLink",onclick:function(){return e.scrollToCategory(t.id())}},t.name())}))},a.scrollToCategory=function(t){if(t){var e=document.getElementById("category-"+t);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},a.renderAwardView=function(){var t=this.selectedAward;return t.canViewResults()?m(X,{award:t}):t.isActive()||t.hasEnded()?m(K,{award:t}):m("div",{className:"EmptyState"},m("p",null,e().translator.trans("huseyinfiliz-awards.forum.error.not_available")))},r}(O());e().initializers.add("huseyinfiliz/awards",function(){b.forEach(function(t){return t.extend(e())}),e().routes.awards={path:"/awards",component:Z},(0,a.extend)(o().prototype,"navItems",function(t){if(!1!==e().forum.attribute("canViewAwards")){var r=e().forum.attribute("awardsNavTitle")||"Awards";t.add("awards",i().component({href:e().route("awards"),icon:"fas fa-trophy"},r),85)}})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map