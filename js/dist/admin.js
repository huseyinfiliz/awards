/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={24:(t,e,r)=>{var a=r(163),n=r(110),s=r(996),i=r(312),o=r(166),l=r(766),u=r(760);function c(){"use strict";var e=n(),r=e.m(c),d=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function m(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))}var h={throw:1,return:2,break:3,continue:3};function p(t){var e,r;return function(a){e||(e={stop:function(){return r(a.a,2)},catch:function(){return a.v},abrupt:function(t,e){return r(a.a,h[t],e)},delegateYield:function(t,n,s){return e.resultName=n,r(a.d,u(t),s)},finish:function(t){return r(a.f,t)}},r=function(t,r,n){a.p=e.prev,a.n=e.next;try{return t(r,n)}finally{e.next=a.n}}),e.resultName&&(e[e.resultName]=a.v,e.resultName=void 0),e.sent=a.v,e.next=a.n;try{return t.call(this,e)}finally{a.p=e.prev,a.n=e.next}}}return(t.exports=c=function(){return{wrap:function(t,r,a,n){return e.w(p(t),r,a,n&&n.reverse())},isGeneratorFunction:m,mark:e.m,awrap:function(t,e){return new a(t,e)},AsyncIterator:o,async:function(t,e,r,a,n){return(m(e)?i:s)(p(t),e,r,a,n)},keys:l,values:u}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports},110:(t,e,r)=>{var a=r(397);function n(){var e,r,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",o=s.toStringTag||"@@toStringTag";function l(t,n,s,i){var o=n&&n.prototype instanceof c?n:c,l=Object.create(o.prototype);return a(l,"_invoke",function(t,a,n){var s,i,o,l=0,c=n||[],d=!1,m={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return s=t,i=0,o=e,m.n=r,u}};function h(t,a){for(i=t,o=a,r=0;!d&&l&&!n&&r<c.length;r++){var n,s=c[r],h=m.p,p=s[2];t>3?(n=p===a)&&(o=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=e):s[0]<=h&&((n=t<2&&h<s[1])?(i=0,m.v=a,m.n=s[1]):h<p&&(n=t<3||s[0]>a||a>p)&&(s[4]=t,s[5]=a,m.n=p,i=0))}if(n||t>1)return u;throw d=!0,a}return function(n,c,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),i=c,o=p;(r=i<2?e:o)||!d;){s||(i?i<3?(i>1&&(m.n=-1),h(i,o)):m.n=o:m.v=o);try{if(l=2,s){if(i||(n="next"),r=s[n]){if(!(r=r.call(s,o)))throw TypeError("iterator result is not an object");if(!r.done)return r;o=r.value,i<2&&(i=0)}else 1===i&&(r=s.return)&&r.call(s),i<2&&(o=TypeError("The iterator does not provide a '"+n+"' method"),i=1);s=e}else if((r=(d=m.n<0)?o:t.call(a,m))!==u)break}catch(t){s=e,i=1,o=t}finally{l=1}}return{value:r,done:d}}}(t,s,i),!0),l}var u={};function c(){}function d(){}function m(){}r=Object.getPrototypeOf;var h=[][i]?r(r([][i]())):(a(r={},i,function(){return this}),r),p=m.prototype=c.prototype=Object.create(h);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,a(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return d.prototype=m,a(p,"constructor",m),a(m,"constructor",d),d.displayName="GeneratorFunction",a(m,o,"GeneratorFunction"),a(p),a(p,o,"Generator"),a(p,i,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(t.exports=n=function(){return{w:l,m:f}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},163:t=>{t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},166:(t,e,r)=>{var a=r(163),n=r(397);t.exports=function t(e,r){function s(t,n,i,o){try{var l=e[t](n),u=l.value;return u instanceof a?r.resolve(u.v).then(function(t){s("next",t,i,o)},function(t){s("throw",t,i,o)}):r.resolve(u).then(function(t){l.value=t,i(l)},function(t){return s("throw",t,i,o)})}catch(t){o(t)}}var i;this.next||(n(t.prototype),n(t.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(t,e,a){function n(){return new r(function(e,r){s(t,a,e,r)})}return i=i?i.then(n,n):n()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},183:(t,e,r)=>{var a=r(24)();t.exports=a;try{regeneratorRuntime=a}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},312:(t,e,r)=>{var a=r(110),n=r(166);t.exports=function(t,e,r,s,i){return new n(a().w(t,e,r,s),i||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},397:t=>{function e(r,a,n,s){var i=Object.defineProperty;try{i({},"",{})}catch(r){i=0}t.exports=e=function(t,r,a,n){function s(r,a){e(t,r,function(t){return this._invoke(r,a,t)})}r?i?i(t,r,{value:a,enumerable:!n,configurable:!n,writable:!n}):t[r]=a:(s("next",0),s("throw",1),s("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,a,n,s)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},735:t=>{function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},760:(t,e,r)=>{var a=r(735).default;t.exports=function(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(a(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},766:t=>{t.exports=function(t){var e=Object(t),r=[];for(var a in e)r.unshift(a);return function t(){for(;r.length;)if((a=r.pop())in e)return t.value=a,t.done=!1,t;return t.done=!0,t}},t.exports.__esModule=!0,t.exports.default=t.exports},996:(t,e,r)=>{var a=r(312);t.exports=function(t,e,r,n,s){var i=a(t,e,r,n,s);return i.next().then(function(t){return t.done?t.value:i.next()})},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["admin/app"];var e=r.n(t);const a=flarum.core.compat["common/extenders"];var n=r.n(a);function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}const o=flarum.core.compat["common/Model"];var l=r.n(o),u=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=l().attribute("name"),e.slug=l().attribute("slug"),e.year=l().attribute("year"),e.description=l().attribute("description"),e.startsAt=l().attribute("startsAt",l().transformDate),e.endsAt=l().attribute("endsAt",l().transformDate),e.status=l().attribute("status"),e.showLiveVotes=l().attribute("showLiveVotes"),e.imageUrl=l().attribute("imageUrl"),e.createdAt=l().attribute("createdAt",l().transformDate),e.updatedAt=l().attribute("updatedAt",l().transformDate),e.categories=l().hasMany("categories"),e.categoryCount=l().attribute("categoryCount"),e.nomineeCount=l().attribute("nomineeCount"),e.voteCount=l().attribute("voteCount"),e.canViewResults=l().attribute("canViewResults"),e}i(e,t);var r=e.prototype;return r.isDraft=function(){return"draft"===this.status()},r.isActive=function(){return"active"===this.status()},r.hasEnded=function(){return"ended"===this.status()},r.isPublished=function(){return"published"===this.status()},r.isVotingOpen=function(){var t=new Date,e=this.startsAt(),r=this.endsAt();return this.isActive()&&e&&r&&t>=e&&t<=r},r.canShowVotes=function(){return this.isPublished()||this.isActive()&&this.showLiveVotes()},e}(l()),c=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=l().attribute("name"),e.slug=l().attribute("slug"),e.description=l().attribute("description"),e.sortOrder=l().attribute("sortOrder"),e.allowOther=l().attribute("allowOther"),e.createdAt=l().attribute("createdAt",l().transformDate),e.updatedAt=l().attribute("updatedAt",l().transformDate),e.award=l().hasOne("award"),e.nominees=l().hasMany("nominees"),e.votes=l().hasMany("votes"),e.otherSuggestions=l().hasMany("otherSuggestions"),e.nomineeCount=l().attribute("nomineeCount"),e.voteCount=l().attribute("voteCount"),e.userVoteIds=l().attribute("userVoteIds"),e}i(e,t);var r=e.prototype;return r.hasUserVoted=function(){var t=this.userVoteIds();return t&&t.length>0},r.getUserVotedNomineeIds=function(){return this.userVoteIds()||[]},e}(l()),d=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=l().attribute("name"),e.description=l().attribute("description"),e.slug=l().attribute("slug"),e.imageUrl=l().attribute("imageUrl"),e.metadata=l().attribute("metadata"),e.sortOrder=l().attribute("sortOrder"),e.createdAt=l().attribute("createdAt",l().transformDate),e.updatedAt=l().attribute("updatedAt",l().transformDate),e.category=l().hasOne("category"),e.voteCount=l().attribute("voteCount"),e.votePercentage=l().attribute("votePercentage"),e.rank=l().attribute("rank"),e.isWinner=l().attribute("isWinner"),e.isRunnerUp=l().attribute("isRunnerUp"),e.isThirdPlace=l().attribute("isThirdPlace"),e}return i(e,t),e}(l()),h=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).createdAt=l().attribute("createdAt",l().transformDate),e.nomineeId=l().attribute("nomineeId"),e.categoryId=l().attribute("categoryId"),e.nominee=l().hasOne("nominee"),e.category=l().hasOne("category"),e.user=l().hasOne("user"),e}return i(e,t),e}(l()),p=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=l().attribute("name"),e.status=l().attribute("status"),e.createdAt=l().attribute("createdAt",l().transformDate),e.updatedAt=l().attribute("updatedAt",l().transformDate),e.category=l().hasOne("category"),e.user=l().hasOne("user"),e.mergedToNominee=l().hasOne("mergedToNominee"),e}i(e,t);var r=e.prototype;return r.isPending=function(){return"pending"===this.status()},r.isApproved=function(){return"approved"===this.status()},r.isRejected=function(){return"rejected"===this.status()},r.isMerged=function(){return"merged"===this.status()},e}(l());const f=[(new(n().Store)).add("awards",u).add("award-categories",c).add("award-nominees",d).add("award-votes",h).add("award-other-suggestions",p)],g=flarum.core.compat["admin/components/ExtensionPage"];var v=r.n(g);const w=flarum.core.compat["common/components/Button"];var y=r.n(w);function b(t,e,r,a,n,s,i){try{var o=t[s](i),l=o.value}catch(t){return void r(t)}o.done?e(l):Promise.resolve(l).then(a,n)}function x(t){return function(){var e=this,r=arguments;return new Promise(function(a,n){var s=t.apply(e,r);function i(t){b(s,a,n,i,o,"next",t)}function o(t){b(s,a,n,i,o,"throw",t)}i(void 0)})}}var N=r(183),k=r.n(N);const A=flarum.core.compat["common/Component"];var z=r.n(A);const _=flarum.core.compat["common/components/LoadingIndicator"];var C=r.n(_);const S=flarum.core.compat["common/components/Modal"];var F=r.n(S);const I=flarum.core.compat["common/utils/Stream"];var T=r.n(I),O=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=void 0,e.slug=void 0,e.year=void 0,e.description=void 0,e.startsAt=void 0,e.endsAt=void 0,e.status=void 0,e.showLiveVotes=void 0,e.imageUrl=void 0,e}i(r,t);var a=r.prototype;return a.oninit=function(e){var r,a;t.prototype.oninit.call(this,e);var n=this.attrs.award;this.name=T()((null==n?void 0:n.name())||""),this.slug=T()((null==n?void 0:n.slug())||""),this.year=T()((null==n?void 0:n.year())||(new Date).getFullYear()),this.description=T()((null==n?void 0:n.description())||""),this.startsAt=T()((null==n||null==(r=n.startsAt())?void 0:r.toISOString().slice(0,16))||""),this.endsAt=T()((null==n||null==(a=n.endsAt())?void 0:a.toISOString().slice(0,16))||""),this.status=T()((null==n?void 0:n.status())||"draft"),this.showLiveVotes=T()((null==n?void 0:n.showLiveVotes())||!1),this.imageUrl=T()((null==n?void 0:n.imageUrl())||"")},a.className=function(){return"HFAwardsModal HFAwardsAwardModal Modal--large"},a.title=function(){return this.attrs.award?e().translator.trans("huseyinfiliz-awards.admin.awards.edit_title"):e().translator.trans("huseyinfiliz-awards.admin.awards.create_title")},a.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.name")),m("input",{className:"FormControl",bidi:this.name})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.slug")),m("input",{className:"FormControl",bidi:this.slug})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.year")),m("input",{className:"FormControl",type:"number",bidi:this.year})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.description")),m("textarea",{className:"FormControl",bidi:this.description,rows:3})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.starts_at")),m("input",{className:"FormControl",type:"datetime-local",bidi:this.startsAt})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.ends_at")),m("input",{className:"FormControl",type:"datetime-local",bidi:this.endsAt})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.status")),m("select",{className:"FormControl",value:this.status(),onchange:function(e){return t.status(e.target.value)}},m("option",{value:"draft"},e().translator.trans("huseyinfiliz-awards.admin.awards.status_draft")),m("option",{value:"active"},e().translator.trans("huseyinfiliz-awards.admin.awards.status_active")),m("option",{value:"ended"},e().translator.trans("huseyinfiliz-awards.admin.awards.status_ended")),m("option",{value:"published"},e().translator.trans("huseyinfiliz-awards.admin.awards.status_published")))),m("div",{className:"Form-group"},m("label",{className:"checkbox"},m("input",{type:"checkbox",checked:this.showLiveVotes(),onchange:function(e){return t.showLiveVotes(e.target.checked)}}),e().translator.trans("huseyinfiliz-awards.admin.awards.show_live_votes"))),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.image_url")),m("input",{className:"FormControl",bidi:this.imageUrl})),m("div",{className:"Form-group"},m(y(),{className:"Button Button--primary",type:"submit",loading:this.loading},e().translator.trans("huseyinfiliz-awards.lib.buttons.save")))))},a.onsubmit=function(){var t=x(k().mark(function t(r){var a,n,s,i;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),this.loading=!0,a={name:this.name(),slug:this.slug()||this.name().toLowerCase().replace(/\s+/g,"-"),year:this.year(),description:this.description(),startsAt:this.startsAt()?new Date(this.startsAt()).toISOString():null,endsAt:this.endsAt()?new Date(this.endsAt()).toISOString():null,status:this.status(),showLiveVotes:this.showLiveVotes(),imageUrl:this.imageUrl()},t.prev=1,!this.attrs.award){t.next=3;break}return t.next=2,this.attrs.award.save(a);case 2:t.next=4;break;case 3:return t.next=4,e().store.createRecord("awards").save(a);case 4:null==(n=(s=this.attrs).onsubmit)||n.call(s),e().modal.close(),t.next=6;break;case 5:throw t.prev=5,i=t.catch(1),this.loading=!1,m.redraw(),i;case 6:case"end":return t.stop()}},t,this,[[1,5]])}));return function(e){return t.apply(this,arguments)}}(),r}(F()),B=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).loading=!0,e.awards=[],e}i(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.loadAwards()},a.loadAwards=function(){var t=x(k().mark(function t(){var r,a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),t.prev=1,t.next=2,e().store.find("awards");case 2:r=t.sent,this.awards=r||[],t.next=4;break;case 3:t.prev=3,a=t.catch(1),console.error("Failed to load awards:",a),this.awards=[];case 4:this.loading=!1,m.redraw();case 5:case"end":return t.stop()}},t,this,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),a.view=function(){var t=this;return this.loading?m(C(),null):m("div",{className:"AwardsTab"},m("div",{className:"AwardsTab-header"},m(y(),{className:"Button Button--primary",icon:"fas fa-plus",onclick:function(){return t.openModal()}},e().translator.trans("huseyinfiliz-awards.admin.awards.create"))),m("table",{className:"AwardsTab-table Table"},m("thead",null,m("tr",null,m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.name")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.year")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.status")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.categories")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.votes")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.actions")))),m("tbody",null,0===this.awards.length?m("tr",null,m("td",{colSpan:6,className:"AwardsTab-empty"},e().translator.trans("huseyinfiliz-awards.admin.awards.empty"))):this.awards.map(function(r){return m("tr",{key:r.id()},m("td",null,m("strong",null,r.name()),m("div",{className:"helpText"},r.slug())),m("td",null,r.year()),m("td",null,m("span",{className:"AwardStatus AwardStatus--"+r.status()},t.statusLabel(r.status()))),m("td",null,(null==r.categoryCount?void 0:r.categoryCount())||0),m("td",null,(null==r.voteCount?void 0:r.voteCount())||0),m("td",{className:"AwardsTab-actions"},m(y(),{className:"Button Button--icon",icon:"fas fa-edit",onclick:function(){return t.openModal(r)}}),"ended"===r.status()&&m(y(),{className:"Button Button--icon Button--primary",icon:"fas fa-bullhorn",onclick:function(){return t.publishResults(r)},title:e().translator.trans("huseyinfiliz-awards.admin.awards.publish")}),m(y(),{className:"Button Button--icon Button--danger",icon:"fas fa-trash",onclick:function(){return t.deleteAward(r)}})))}))))},a.statusLabel=function(t){return{draft:e().translator.trans("huseyinfiliz-awards.admin.awards.status_draft"),active:e().translator.trans("huseyinfiliz-awards.admin.awards.status_active"),ended:e().translator.trans("huseyinfiliz-awards.admin.awards.status_ended"),published:e().translator.trans("huseyinfiliz-awards.admin.awards.status_published")}[t]||t},a.openModal=function(t){var r=this;e().modal.show(O,{award:t,onsubmit:function(){return r.loadAwards()}})},a.publishResults=function(){var t=x(k().mark(function t(r){var a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.awards.publish_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/awards/"+r.id()+"/publish"});case 2:this.loadAwards(),t.next=4;break;case 3:t.prev=3,a=t.catch(1),console.error("Failed to publish results:",a);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),a.deleteAward=function(){var t=x(k().mark(function t(r){var a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.awards.delete_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,r.delete();case 2:this.loadAwards(),t.next=4;break;case 3:t.prev=3,a=t.catch(1),console.error("Failed to delete award:",a);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),r}(z());const M=flarum.core.compat["common/components/Select"];var P=r.n(M),U=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=void 0,e.slug=void 0,e.description=void 0,e.sortOrder=void 0,e.allowOther=void 0,e.suggestions=void 0,e.showSuggestions=void 0,e}i(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e);var r=this.attrs.category;this.name=T()((null==r?void 0:r.name())||""),this.slug=T()((null==r?void 0:r.slug())||""),this.description=T()((null==r?void 0:r.description())||""),this.sortOrder=T()((null==r?void 0:r.sortOrder())||0),this.allowOther=T()((null==r?void 0:r.allowOther())||!1),this.suggestions=T()([]),this.showSuggestions=T()(!1)},a.className=function(){return"HFAwardsModal HFAwardsCategoryModal"},a.title=function(){return this.attrs.category?e().translator.trans("huseyinfiliz-awards.admin.categories.edit_title"):e().translator.trans("huseyinfiliz-awards.admin.categories.create_title")},a.searchCategories=function(){var t=x(k().mark(function t(r){var a,n,s,i;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length<2)){t.next=1;break}return this.suggestions([]),this.showSuggestions(!1),m.redraw(),t.abrupt("return");case 1:return t.prev=1,t.next=2,e().request({method:"GET",url:e().forum.attribute("apiUrl")+"/award-categories/autocomplete",params:{"filter[q]":r}});case 2:a=t.sent,n=(a.data||[]).map(function(t){var e,r;return{name:(null==(e=t.attributes)?void 0:e.name)||"",description:(null==(r=t.attributes)?void 0:r.description)||null}}).filter(function(t){return t.name&&t.name.toLowerCase()!==r.toLowerCase()}),s=n.filter(function(t,e,r){return e===r.findIndex(function(e){return e.name===t.name})}),this.suggestions(s),this.showSuggestions(s.length>0),t.next=4;break;case 3:t.prev=3,i=t.catch(1),console.error("Autocomplete error:",i),this.suggestions([]),this.showSuggestions(!1);case 4:m.redraw();case 5:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),a.selectSuggestion=function(t){this.name(t.name),t.description&&this.description(t.description),this.showSuggestions(!1),this.suggestions([]),m.redraw()},a.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group",style:{position:"relative"}},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.categories.name")),m("input",{className:"FormControl",value:this.name(),oninput:function(e){var r=e.target.value;t.name(r),t.searchCategories(r)},onfocus:function(){t.suggestions().length>0&&(t.showSuggestions(!0),m.redraw())},onblur:function(){setTimeout(function(){t.showSuggestions(!1),m.redraw()},200)}}),this.showSuggestions()&&this.suggestions().length>0?m("ul",{className:"Dropdown-menu",style:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,display:"block",maxHeight:"200px",overflowY:"auto"}},this.suggestions().map(function(e,r){return m("li",{key:r},m("button",{type:"button",className:"Button Button--link",onclick:function(){return t.selectSuggestion(e)},style:{width:"100%",textAlign:"left",padding:"8px 12px"}},String(e.name)))})):null),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.categories.slug")),m("input",{className:"FormControl",bidi:this.slug})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.categories.description")),m("textarea",{className:"FormControl",bidi:this.description,rows:3})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.categories.sort_order")),m("input",{className:"FormControl",type:"number",bidi:this.sortOrder})),m("div",{className:"Form-group"},m("label",{className:"checkbox"},m("input",{type:"checkbox",checked:this.allowOther(),onchange:function(e){return t.allowOther(e.target.checked)}}),e().translator.trans("huseyinfiliz-awards.admin.categories.allow_other")),m("div",{className:"helpText"},e().translator.trans("huseyinfiliz-awards.admin.categories.allow_other_help"))),m("div",{className:"Form-group"},m(y(),{className:"Button Button--primary",type:"submit",loading:this.loading},e().translator.trans("huseyinfiliz-awards.lib.buttons.save")))))},a.onsubmit=function(){var t=x(k().mark(function t(r){var a,n,s,i;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),this.loading=!0,a={name:this.name(),slug:this.slug()||this.name().toLowerCase().replace(/\s+/g,"-"),description:this.description(),sortOrder:this.sortOrder(),allowOther:this.allowOther()},this.attrs.category||(a.relationships={award:{data:{type:"awards",id:this.attrs.awardId}}}),t.prev=1,!this.attrs.category){t.next=3;break}return t.next=2,this.attrs.category.save(a);case 2:t.next=4;break;case 3:return t.next=4,e().store.createRecord("award-categories").save(a);case 4:null==(n=(s=this.attrs).onsubmit)||n.call(s),e().modal.close(),t.next=6;break;case 5:throw t.prev=5,i=t.catch(1),this.loading=!1,m.redraw(),i;case 6:case"end":return t.stop()}},t,this,[[1,5]])}));return function(e){return t.apply(this,arguments)}}(),r}(F()),j=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).loading=!0,e.awards=[],e.categories=[],e.selectedAwardId="",e}i(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.loadAwards()},a.loadAwards=function(){var t=x(k().mark(function t(){var r,a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),t.prev=1,t.next=2,e().store.find("awards");case 2:if(r=t.sent,this.awards=r||[],!(this.awards.length>0)||this.selectedAwardId){t.next=3;break}return this.selectedAwardId=String(this.awards[0].id()),t.next=3,this.loadCategories();case 3:t.next=5;break;case 4:t.prev=4,a=t.catch(1),console.error("Failed to load awards:",a);case 5:this.loading=!1,m.redraw();case 6:case"end":return t.stop()}},t,this,[[1,4]])}));return function(){return t.apply(this,arguments)}}(),a.loadCategories=function(){var t=x(k().mark(function t(){var r,a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.selectedAwardId){t.next=1;break}return this.categories=[],t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-categories",{filter:{award:this.selectedAwardId}});case 2:r=t.sent,this.categories=(r||[]).sort(function(t,e){return(t.sortOrder()||0)-(e.sortOrder()||0)}),t.next=4;break;case 3:t.prev=3,a=t.catch(1),console.error("Failed to load categories:",a),this.categories=[];case 4:m.redraw();case 5:case"end":return t.stop()}},t,this,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),a.moveCategory=function(){var t=x(k().mark(function t(e,r){var a,n,s,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==(a=this.categories.indexOf(e))){t.next=1;break}return t.abrupt("return");case 1:if(!((n="up"===r?a-1:a+1)<0||n>=this.categories.length)){t.next=2;break}return t.abrupt("return");case 2:return s=this.categories[a],this.categories[a]=this.categories[n],this.categories[n]=s,t.prev=3,i=this.categories.map(function(t,e){return t.save({sortOrder:e})}),t.next=4,Promise.all(i);case 4:return t.next=5,this.loadCategories();case 5:t.next=7;break;case 6:return t.prev=6,o=t.catch(3),console.error("Failed to reorder category:",o),t.next=7,this.loadCategories();case 7:case"end":return t.stop()}},t,this,[[3,6]])}));return function(e,r){return t.apply(this,arguments)}}(),a.view=function(){var t=this;if(this.loading)return m(C(),null);var r={};return this.awards.forEach(function(t){r[String(t.id())]=t.name()+" ("+t.year()+")"}),m("div",{className:"CategoriesTab"},m("div",{className:"CategoriesTab-header"},m(P(),{value:this.selectedAwardId,options:r,onchange:function(e){t.selectedAwardId=e,t.loadCategories()}}),m(y(),{className:"Button Button--primary",icon:"fas fa-plus",onclick:function(){return t.openModal()},disabled:!this.selectedAwardId},e().translator.trans("huseyinfiliz-awards.admin.categories.create"))),m("table",{className:"CategoriesTab-table Table"},m("thead",null,m("tr",null,m("th",{style:{width:"80px"}},e().translator.trans("huseyinfiliz-awards.admin.categories.sort_order")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.name")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.nominees")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.votes")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.allow_other")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.actions")))),m("tbody",null,0===this.categories.length?m("tr",null,m("td",{colSpan:6,className:"CategoriesTab-empty"},e().translator.trans("huseyinfiliz-awards.admin.categories.empty"))):this.categories.map(function(r,a){return m("tr",{key:r.id()},m("td",{className:"CategoriesTab-sort"},m(y(),{className:"Button Button--icon",icon:"fas fa-chevron-up",onclick:function(){return t.moveCategory(r,"up")},disabled:0===a,title:e().translator.trans("huseyinfiliz-awards.admin.categories.move_up")}),m(y(),{className:"Button Button--icon",icon:"fas fa-chevron-down",onclick:function(){return t.moveCategory(r,"down")},disabled:a===t.categories.length-1,title:e().translator.trans("huseyinfiliz-awards.admin.categories.move_down")})),m("td",null,m("strong",null,r.name()),m("div",{className:"helpText"},r.description())),m("td",null,(null==r.nomineeCount?void 0:r.nomineeCount())||0),m("td",null,(null==r.voteCount?void 0:r.voteCount())||0),m("td",null,r.allowOther()?"Yes":"No"),m("td",{className:"CategoriesTab-actions"},m(y(),{className:"Button Button--icon",icon:"fas fa-edit",onclick:function(){return t.openModal(r)}}),m(y(),{className:"Button Button--icon Button--danger",icon:"fas fa-trash",onclick:function(){return t.deleteCategory(r)}})))}))))},a.openModal=function(t){var r=this;e().modal.show(U,{category:t,awardId:this.selectedAwardId,onsubmit:function(){return r.loadCategories()}})},a.deleteCategory=function(){var t=x(k().mark(function t(r){var a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.categories.delete_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,r.delete();case 2:this.loadCategories(),t.next=4;break;case 3:t.prev=3,a=t.catch(1),console.error("Failed to delete category:",a);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),r}(z()),D=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name=void 0,e.description=void 0,e.slug=void 0,e.imageUrl=void 0,e.sortOrder=void 0,e.suggestions=void 0,e.showSuggestions=void 0,e.uploadLoading=!1,e}i(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e);var r=this.attrs.nominee;this.name=T()((null==r?void 0:r.name())||""),this.description=T()((null==r?void 0:r.description())||""),this.slug=T()((null==r?void 0:r.slug())||""),this.imageUrl=T()((null==r?void 0:r.imageUrl())||""),this.sortOrder=T()((null==r?void 0:r.sortOrder())||0),this.suggestions=T()([]),this.showSuggestions=T()(!1)},a.className=function(){return"HFAwardsModal HFAwardsNomineeModal"},a.title=function(){return this.attrs.nominee?e().translator.trans("huseyinfiliz-awards.admin.nominees.edit_title"):e().translator.trans("huseyinfiliz-awards.admin.nominees.create_title")},a.searchNominees=function(){var t=x(k().mark(function t(r){var a,n,s,i;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length<2)){t.next=1;break}return this.suggestions([]),this.showSuggestions(!1),m.redraw(),t.abrupt("return");case 1:return t.prev=1,t.next=2,e().request({method:"GET",url:e().forum.attribute("apiUrl")+"/award-nominees/autocomplete",params:{"filter[q]":r}});case 2:a=t.sent,n=(a.data||[]).map(function(t){var e,r,a;return{name:(null==(e=t.attributes)?void 0:e.name)||"",description:(null==(r=t.attributes)?void 0:r.description)||null,imageUrl:(null==(a=t.attributes)?void 0:a.imageUrl)||null}}).filter(function(t){return t.name&&t.name.toLowerCase()!==r.toLowerCase()}),s=n.filter(function(t,e,r){return e===r.findIndex(function(e){return e.name===t.name})}),this.suggestions(s),this.showSuggestions(s.length>0),t.next=4;break;case 3:t.prev=3,i=t.catch(1),console.error("Autocomplete error:",i),this.suggestions([]),this.showSuggestions(!1);case 4:m.redraw();case 5:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),a.selectSuggestion=function(t){this.name(t.name),t.description&&this.description(t.description),t.imageUrl&&this.imageUrl(t.imageUrl),this.showSuggestions(!1),this.suggestions([]),m.redraw()},a.handleUpload=function(){var t=x(k().mark(function t(r){var a,n,s,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((a=r.target).files&&0!==a.files.length){t.next=1;break}return t.abrupt("return");case 1:return n=a.files[0],(s=new FormData).append("files[]",n),this.uploadLoading=!0,m.redraw(),t.prev=2,t.next=3,e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/fof/upload",body:s,serialize:function(t){return t}});case 3:(i=t.sent)&&i.data&&i.data[0]&&i.data[0].attributes&&(this.imageUrl(i.data[0].attributes.url),e().alerts.show({type:"success"},e().translator.trans("huseyinfiliz-awards.admin.nominees.upload_success"))),t.next=5;break;case 4:t.prev=4,o=t.catch(2),console.error("Image upload failed:",o),e().alerts.show({type:"error"},e().translator.trans("huseyinfiliz-awards.admin.nominees.upload_error"));case 5:return t.prev=5,this.uploadLoading=!1,a.value="",m.redraw(),t.finish(5);case 6:case"end":return t.stop()}},t,this,[[2,4,5,6]])}));return function(e){return t.apply(this,arguments)}}(),a.content=function(){var t=this,r="fof-upload"in(e().data.extensions||{});return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group",style:{position:"relative"}},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.name")),m("input",{className:"FormControl",value:this.name(),oninput:function(e){var r=e.target.value;t.name(r),t.searchNominees(r)},onfocus:function(){t.suggestions().length>0&&(t.showSuggestions(!0),m.redraw())},onblur:function(){setTimeout(function(){t.showSuggestions(!1),m.redraw()},200)}}),this.showSuggestions()&&this.suggestions().length>0?m("ul",{className:"Dropdown-menu",style:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,display:"block",maxHeight:"200px",overflowY:"auto"}},this.suggestions().map(function(e,r){return m("li",{key:r},m("button",{type:"button",className:"Button Button--link",onclick:function(){return t.selectSuggestion(e)},style:{width:"100%",textAlign:"left",padding:"8px 12px"}},String(e.name)))})):null),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.description")),m("textarea",{className:"FormControl",rows:2,value:this.description(),oninput:function(e){t.description(e.target.value)}}),m("div",{className:"helpText"},e().translator.trans("huseyinfiliz-awards.admin.nominees.description_help"))),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.slug")),m("input",{className:"FormControl",bidi:this.slug})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.image_url")),m("div",{style:{display:"flex",gap:"8px"}},m("input",{className:"FormControl",value:this.imageUrl(),oninput:function(e){t.imageUrl(e.target.value)},placeholder:"https://example.com/image.png",style:{flex:1}}),r?m("span",null,m("input",{id:"nominee-image-upload",type:"file",accept:"image/*",style:{display:"none"},onchange:this.handleUpload.bind(this)}),m(y(),{className:"Button Button--icon",icon:"fas fa-cloud-upload-alt",loading:this.uploadLoading,onclick:function(){var t=document.getElementById("nominee-image-upload");t&&t.click()},title:e().translator.trans("huseyinfiliz-awards.admin.nominees.upload_image"),type:"button"})):null),this.imageUrl()?m("div",{style:{marginTop:"10px"}},m("img",{src:this.imageUrl(),alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px",border:"1px solid #ddd",padding:"5px",borderRadius:"4px"},onerror:function(t){t.target.style.display="none"}})):null,m("div",{className:"helpText"},e().translator.trans("huseyinfiliz-awards.admin.nominees.image_url_help"))),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.sort_order")),m("input",{className:"FormControl",type:"number",bidi:this.sortOrder})),m("div",{className:"Form-group"},m(y(),{className:"Button Button--primary",type:"submit",loading:this.loading},e().translator.trans("huseyinfiliz-awards.lib.buttons.save")))))},a.onsubmit=function(){var t=x(k().mark(function t(r){var a,n,s,i;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),this.loading=!0,a={name:this.name(),description:this.description(),slug:this.slug()||this.name().toLowerCase().replace(/\s+/g,"-"),imageUrl:this.imageUrl(),sortOrder:this.sortOrder()},this.attrs.nominee||(a.relationships={category:{data:{type:"award-categories",id:this.attrs.categoryId}}}),t.prev=1,!this.attrs.nominee){t.next=3;break}return t.next=2,this.attrs.nominee.save(a);case 2:t.next=4;break;case 3:return t.next=4,e().store.createRecord("award-nominees").save(a);case 4:null==(n=(s=this.attrs).onsubmit)||n.call(s),e().modal.close(),t.next=6;break;case 5:throw t.prev=5,i=t.catch(1),this.loading=!1,m.redraw(),i;case 6:case"end":return t.stop()}},t,this,[[1,5]])}));return function(e){return t.apply(this,arguments)}}(),r}(F()),L=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).loading=!0,e.awards=[],e.categories=[],e.nominees=[],e.selectedAwardId="",e.selectedCategoryId="",e}i(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.loadAwards()},a.loadAwards=function(){var t=x(k().mark(function t(){var r,a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),t.prev=1,t.next=2,e().store.find("awards");case 2:if(r=t.sent,this.awards=r||[],!(this.awards.length>0)||this.selectedAwardId){t.next=3;break}return this.selectedAwardId=String(this.awards[0].id()),t.next=3,this.loadCategories();case 3:t.next=5;break;case 4:t.prev=4,a=t.catch(1),console.error("Failed to load awards:",a);case 5:this.loading=!1,m.redraw();case 6:case"end":return t.stop()}},t,this,[[1,4]])}));return function(){return t.apply(this,arguments)}}(),a.loadCategories=function(){var t=x(k().mark(function t(){var r,a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.selectedAwardId){t.next=1;break}return this.categories=[],this.nominees=[],t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-categories",{filter:{award:this.selectedAwardId}});case 2:if(r=t.sent,this.categories=r||[],!(this.categories.length>0)){t.next=4;break}return this.selectedCategoryId=String(this.categories[0].id()),t.next=3,this.loadNominees();case 3:t.next=5;break;case 4:this.selectedCategoryId="",this.nominees=[];case 5:t.next=7;break;case 6:t.prev=6,a=t.catch(1),console.error("Failed to load categories:",a);case 7:m.redraw();case 8:case"end":return t.stop()}},t,this,[[1,6]])}));return function(){return t.apply(this,arguments)}}(),a.loadNominees=function(){var t=x(k().mark(function t(){var r,a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.selectedCategoryId){t.next=1;break}return this.nominees=[],t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-nominees",{filter:{category:this.selectedCategoryId}});case 2:r=t.sent,this.nominees=(r||[]).sort(function(t,e){return(t.sortOrder()||0)-(e.sortOrder()||0)}),t.next=4;break;case 3:t.prev=3,a=t.catch(1),console.error("Failed to load nominees:",a),this.nominees=[];case 4:m.redraw();case 5:case"end":return t.stop()}},t,this,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),a.moveNominee=function(){var t=x(k().mark(function t(e,r){var a,n,s,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==(a=this.nominees.indexOf(e))){t.next=1;break}return t.abrupt("return");case 1:if(!((n="up"===r?a-1:a+1)<0||n>=this.nominees.length)){t.next=2;break}return t.abrupt("return");case 2:return s=this.nominees[a],this.nominees[a]=this.nominees[n],this.nominees[n]=s,t.prev=3,i=this.nominees.map(function(t,e){return t.save({sortOrder:e})}),t.next=4,Promise.all(i);case 4:return t.next=5,this.loadNominees();case 5:t.next=7;break;case 6:return t.prev=6,o=t.catch(3),console.error("Failed to reorder nominee:",o),t.next=7,this.loadNominees();case 7:case"end":return t.stop()}},t,this,[[3,6]])}));return function(e,r){return t.apply(this,arguments)}}(),a.view=function(){var t=this;if(this.loading)return m(C(),null);var r={};this.awards.forEach(function(t){r[String(t.id())]=t.name()+" ("+t.year()+")"});var a={};return this.categories.forEach(function(t){a[String(t.id())]=t.name()}),m("div",{className:"NomineesTab"},m("div",{className:"NomineesTab-header"},m(P(),{value:this.selectedAwardId,options:r,onchange:function(e){t.selectedAwardId=e,t.loadCategories()}}),m(P(),{value:this.selectedCategoryId,options:a,onchange:function(e){t.selectedCategoryId=e,t.loadNominees()},disabled:0===this.categories.length}),m(y(),{className:"Button Button--primary",icon:"fas fa-plus",onclick:function(){return t.openModal()},disabled:!this.selectedCategoryId},e().translator.trans("huseyinfiliz-awards.admin.nominees.create"))),m("table",{className:"NomineesTab-table Table"},m("thead",null,m("tr",null,m("th",{style:{width:"80px"}},e().translator.trans("huseyinfiliz-awards.admin.nominees.sort_order")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.image")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.name")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.votes")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.actions")))),m("tbody",null,0===this.nominees.length?m("tr",null,m("td",{colSpan:5,className:"NomineesTab-empty"},e().translator.trans("huseyinfiliz-awards.admin.nominees.empty"))):this.nominees.map(function(r,a){return m("tr",{key:r.id()},m("td",{className:"NomineesTab-sort"},m(y(),{className:"Button Button--icon",icon:"fas fa-chevron-up",onclick:function(){return t.moveNominee(r,"up")},disabled:0===a,title:e().translator.trans("huseyinfiliz-awards.admin.nominees.move_up")}),m(y(),{className:"Button Button--icon",icon:"fas fa-chevron-down",onclick:function(){return t.moveNominee(r,"down")},disabled:a===t.nominees.length-1,title:e().translator.trans("huseyinfiliz-awards.admin.nominees.move_down")})),m("td",null,r.imageUrl()?m("img",{src:r.imageUrl(),alt:r.name(),className:"NomineeImage"}):m("div",{className:"NomineeImage NomineeImage--placeholder"},m("i",{className:"fas fa-image"}))),m("td",null,m("strong",null,r.name()),r.description()?m("div",{className:"helpText"},r.description()):null),m("td",null,m("span",{className:"NomineeVotes"},(null==r.voteCount?void 0:r.voteCount())||0),m(y(),{className:"Button Button--icon Button--link",icon:"fas fa-edit",onclick:function(){return t.editVotes(r)},title:e().translator.trans("huseyinfiliz-awards.admin.nominees.edit_votes")})),m("td",{className:"NomineesTab-actions"},m(y(),{className:"Button Button--icon",icon:"fas fa-edit",onclick:function(){return t.openModal(r)}}),m(y(),{className:"Button Button--icon Button--danger",icon:"fas fa-trash",onclick:function(){return t.deleteNominee(r)}})))}))))},a.openModal=function(t){var r=this;e().modal.show(D,{nominee:t,categoryId:this.selectedCategoryId,onsubmit:function(){return r.loadNominees()}})},a.editVotes=function(){var t=x(k().mark(function t(r){var a,n,s,i;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(null==r.voteCount?void 0:r.voteCount())||0,null!==(n=prompt(e().translator.trans("huseyinfiliz-awards.admin.nominees.enter_votes"),String(a)))){t.next=1;break}return t.abrupt("return");case 1:if(s=parseInt(n,10),!(isNaN(s)||s<0)){t.next=2;break}return alert(e().translator.trans("huseyinfiliz-awards.admin.nominees.invalid_votes")),t.abrupt("return");case 2:return t.prev=2,t.next=3,e().request({method:"PATCH",url:e().forum.attribute("apiUrl")+"/award-nominees/"+r.id()+"/votes",body:{data:{attributes:{voteCount:s}}}});case 3:this.loadNominees(),t.next=5;break;case 4:t.prev=4,i=t.catch(2),console.error("Failed to update votes:",i);case 5:case"end":return t.stop()}},t,this,[[2,4]])}));return function(e){return t.apply(this,arguments)}}(),a.deleteNominee=function(){var t=x(k().mark(function t(r){var a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.nominees.delete_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,r.delete();case 2:this.loadNominees(),t.next=4;break;case 3:t.prev=3,a=t.catch(1),console.error("Failed to delete nominee:",a);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),r}(z()),V=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).loading=!0,e.nominees=[],e.selectedNomineeId=void 0,e}i(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.selectedNomineeId=T()(""),this.loadNominees()},a.className=function(){return"HFAwardsModal HFAwardsMergeModal Modal--small"},a.title=function(){return e().translator.trans("huseyinfiliz-awards.admin.suggestions.merge_title")},a.loadNominees=function(){var t=x(k().mark(function t(){var r,a,n,s;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null==(r=this.attrs.suggestion.category())||null==r.id?void 0:r.id()){t.next=1;break}return this.loading=!1,m.redraw(),t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-nominees",{filter:{category:a}});case 2:n=t.sent,this.nominees=n||[],t.next=4;break;case 3:t.prev=3,s=t.catch(1),console.error("Failed to load nominees:",s),this.nominees=[];case 4:this.loading=!1,m.redraw();case 5:case"end":return t.stop()}},t,this,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),a.content=function(){var t=this;if(this.loading)return m("div",{className:"Modal-body"},m(C(),null));if(0===this.nominees.length)return m("div",{className:"Modal-body"},m("p",{className:"MergeModal-empty"},e().translator.trans("huseyinfiliz-awards.admin.suggestions.no_nominees")));var r=this.attrs.suggestion;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("p",{className:"MergeModal-info"},e().translator.trans("huseyinfiliz-awards.admin.suggestions.merge_info",{name:m("strong",null,r.name())}))),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.suggestions.select_nominee_label")),m("select",{className:"FormControl",value:this.selectedNomineeId(),onchange:function(e){t.selectedNomineeId(e.target.value)}},m("option",{value:""},e().translator.trans("huseyinfiliz-awards.admin.suggestions.select_nominee_placeholder")),this.nominees.map(function(t){return m("option",{key:t.id(),value:String(t.id())},t.name())}))),m("div",{className:"Form-group"},m(y(),{className:"Button Button--primary",type:"submit",loading:this.loading,disabled:!this.selectedNomineeId()},e().translator.trans("huseyinfiliz-awards.admin.suggestions.merge")))))},a.onsubmit=function(){var t=x(k().mark(function t(r){var a,n,s;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),this.selectedNomineeId()){t.next=1;break}return t.abrupt("return");case 1:return this.loading=!0,m.redraw(),t.prev=2,t.next=3,e().request({method:"PATCH",url:e().forum.attribute("apiUrl")+"/award-other-suggestions/"+this.attrs.suggestion.id(),body:{data:{attributes:{action:"merge",mergeToNomineeId:parseInt(this.selectedNomineeId(),10)}}}});case 3:null==(a=(n=this.attrs).onmerge)||a.call(n),e().modal.close(),t.next=5;break;case 4:throw t.prev=4,s=t.catch(2),this.loading=!1,m.redraw(),s;case 5:case"end":return t.stop()}},t,this,[[2,4]])}));return function(e){return t.apply(this,arguments)}}(),r}(F()),E=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).loading=!0,e.awards=[],e.categories=[],e.nominees=[],e.suggestions=[],e.selectedAwardId="",e.selectedCategoryId="",e}i(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.loadAwards()},a.loadAwards=function(){var t=x(k().mark(function t(){var r,a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),t.prev=1,t.next=2,e().store.find("awards");case 2:if(r=t.sent,this.awards=r||[],!(this.awards.length>0)||this.selectedAwardId){t.next=3;break}return this.selectedAwardId=String(this.awards[0].id()),t.next=3,this.loadCategories();case 3:t.next=5;break;case 4:t.prev=4,a=t.catch(1),console.error("Failed to load awards:",a);case 5:this.loading=!1,m.redraw();case 6:case"end":return t.stop()}},t,this,[[1,4]])}));return function(){return t.apply(this,arguments)}}(),a.loadCategories=function(){var t=x(k().mark(function t(){var r,a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.selectedAwardId){t.next=1;break}return this.categories=[],t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-categories",{filter:{award:this.selectedAwardId}});case 2:return r=t.sent,this.categories=r||[],this.selectedCategoryId="",t.next=3,this.loadSuggestions();case 3:t.next=5;break;case 4:t.prev=4,a=t.catch(1),console.error("Failed to load categories:",a);case 5:m.redraw();case 6:case"end":return t.stop()}},t,this,[[1,4]])}));return function(){return t.apply(this,arguments)}}(),a.loadSuggestions=function(){var t=x(k().mark(function t(){var r,a,n;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={filter:{}},this.selectedCategoryId?r.filter.category=this.selectedCategoryId:this.selectedAwardId&&(r.filter.award=this.selectedAwardId),t.next=1,e().store.find("award-other-suggestions",r);case 1:a=t.sent,this.suggestions=a||[],t.next=3;break;case 2:t.prev=2,n=t.catch(0),console.error("Failed to load suggestions:",n),this.suggestions=[];case 3:m.redraw();case 4:case"end":return t.stop()}},t,this,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),a.view=function(){var t=this;if(this.loading)return m(C(),null);var r={"":"All Awards"};this.awards.forEach(function(t){r[String(t.id())]=t.name()+" ("+t.year()+")"});var a={"":"All Categories"};return this.categories.forEach(function(t){a[String(t.id())]=t.name()}),m("div",{className:"SuggestionsTab"},m("div",{className:"SuggestionsTab-header"},m(P(),{value:this.selectedAwardId,options:r,onchange:function(e){t.selectedAwardId=e,t.loadCategories()}}),m(P(),{value:this.selectedCategoryId,options:a,onchange:function(e){t.selectedCategoryId=e,t.loadSuggestions()},disabled:0===this.categories.length})),m("table",{className:"SuggestionsTab-table Table"},m("thead",null,m("tr",null,m("th",null,e().translator.trans("huseyinfiliz-awards.admin.suggestions.name")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.suggestions.category")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.suggestions.user")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.suggestions.actions")))),m("tbody",null,0===this.suggestions.length?m("tr",null,m("td",{colSpan:4,className:"SuggestionsTab-empty"},e().translator.trans("huseyinfiliz-awards.admin.suggestions.empty"))):this.suggestions.map(function(r){var a,n;return m("tr",{key:r.id()},m("td",null,m("strong",null,r.name())),m("td",null,null==(a=r.category())||null==a.name?void 0:a.name()),m("td",null,null==(n=r.user())||null==n.displayName?void 0:n.displayName()),m("td",{className:"SuggestionsTab-actions"},m(y(),{className:"Button Button--primary",icon:"fas fa-check",onclick:function(){return t.approveSuggestion(r)}},e().translator.trans("huseyinfiliz-awards.admin.suggestions.approve")),m(y(),{className:"Button",icon:"fas fa-times",onclick:function(){return t.rejectSuggestion(r)}},e().translator.trans("huseyinfiliz-awards.admin.suggestions.reject")),m(y(),{className:"Button",icon:"fas fa-compress-arrows-alt",onclick:function(){return t.openMergeModal(r)}},e().translator.trans("huseyinfiliz-awards.admin.suggestions.merge"))))}))))},a.approveSuggestion=function(){var t=x(k().mark(function t(r){var a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.suggestions.approve_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,e().request({method:"PATCH",url:e().forum.attribute("apiUrl")+"/award-other-suggestions/"+r.id(),body:{data:{attributes:{action:"approve"}}}});case 2:this.loadSuggestions(),t.next=4;break;case 3:t.prev=3,a=t.catch(1),console.error("Failed to approve suggestion:",a);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),a.rejectSuggestion=function(){var t=x(k().mark(function t(r){var a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.suggestions.reject_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,e().request({method:"PATCH",url:e().forum.attribute("apiUrl")+"/award-other-suggestions/"+r.id(),body:{data:{attributes:{action:"reject"}}}});case 2:this.loadSuggestions(),t.next=4;break;case 3:t.prev=3,a=t.catch(1),console.error("Failed to reject suggestion:",a);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),a.openMergeModal=function(t){var r=this;e().modal.show(V,{suggestion:t,onmerge:function(){return r.loadSuggestions()}})},r}(z()),H=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).navTitle=void 0,e.votesPerCategory=void 0,e.loading=!1,e}i(r,t);var a=r.prototype;return a.oninit=function(r){t.prototype.oninit.call(this,r),this.navTitle=T()(e().data.settings["huseyinfiliz-awards.nav_title"]||"Awards"),this.votesPerCategory=T()(parseInt(e().data.settings["huseyinfiliz-awards.votes_per_category"]||"1"))},a.view=function(){return m("div",{className:"SettingsTab"},m("div",{className:"Form-group"},m("h3",null,m("i",{className:"fas fa-cogs"}),e().translator.trans("huseyinfiliz-awards.admin.tabs.settings")),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.settings.nav_title")),m("input",{className:"FormControl",bidi:this.navTitle}),m("div",{className:"helpText"},e().translator.trans("huseyinfiliz-awards.admin.settings.nav_title_help"))),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.settings.votes_per_category")),m("input",{className:"FormControl",type:"number",min:"0",bidi:this.votesPerCategory}),m("div",{className:"helpText"},e().translator.trans("huseyinfiliz-awards.admin.settings.votes_per_category_help"))),m("div",{className:"Form-group"},m(y(),{className:"Button Button--primary",loading:this.loading,onclick:this.saveSettings.bind(this)},e().translator.trans("huseyinfiliz-awards.lib.buttons.save")))))},a.saveSettings=function(){var t=this;this.loading=!0,e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/settings",body:{"huseyinfiliz-awards.nav_title":this.navTitle(),"huseyinfiliz-awards.votes_per_category":this.votesPerCategory()}}).then(function(){t.loading=!1,m.redraw(),e().alerts.show({type:"success"},e().translator.trans("core.lib.success_message"))})},r}(z()),R=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).currentTab="awards",e}i(r,t);var a=r.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.currentTab="awards"},a.content=function(){return m("div",{className:"huseyinfiliz-awards"},m("div",{className:"AwardsPage-header"},m("div",{className:"container"},m("h2",null,e().translator.trans("huseyinfiliz-awards.admin.title")))),m("div",{className:"AwardsPage-nav"},m("div",{className:"container"},m("nav",{className:"AwardsPage-tabs"},this.tabButton("awards","fas fa-trophy","huseyinfiliz-awards.admin.tabs.awards"),this.tabButton("categories","fas fa-folder","huseyinfiliz-awards.admin.tabs.categories"),this.tabButton("nominees","fas fa-user-tie","huseyinfiliz-awards.admin.tabs.nominees"),this.tabButton("suggestions","fas fa-lightbulb","huseyinfiliz-awards.admin.tabs.suggestions"),this.tabButton("settings","fas fa-cog","huseyinfiliz-awards.admin.tabs.settings")))),m("div",{className:"AwardsPage-content"},m("div",{className:"container"},"awards"===this.currentTab&&m(B,null),"categories"===this.currentTab&&m(j,null),"nominees"===this.currentTab&&m(L,null),"suggestions"===this.currentTab&&m(E,null),"settings"===this.currentTab&&m(H,null))))},a.tabButton=function(t,r,a){var n=this;return m(y(),{className:"Button "+(this.currentTab===t?"Button--primary":""),icon:r,onclick:function(){n.currentTab=t,m.redraw()}},e().translator.trans(a))},r}(v());e().initializers.add("huseyinfiliz/awards",function(){f.forEach(function(t){return t.extend(e())}),e().extensionData.for("huseyinfiliz-awards").registerPage(R).registerPermission({icon:"fas fa-cog",label:e().translator.trans("huseyinfiliz-awards.admin.permissions.manage"),permission:"awards.manage"},"moderate").registerPermission({icon:"fas fa-vote-yea",label:e().translator.trans("huseyinfiliz-awards.admin.permissions.vote"),permission:"awards.vote"},"reply").registerPermission({icon:"fas fa-trophy",label:e().translator.trans("huseyinfiliz-awards.admin.permissions.view"),permission:"awards.view",allowGuest:!0},"view").registerPermission({icon:"fas fa-chart-bar",label:e().translator.trans("huseyinfiliz-awards.admin.permissions.view_results"),permission:"awards.viewResults"},"moderate")})})(),module.exports={}})();
//# sourceMappingURL=admin.js.map