/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={24(t,e,a){var r=a(163),n=a(110),s=a(996),i=a(312),o=a(166),l=a(766),u=a(760);function c(){"use strict";var e=n(),a=e.m(c),d=(Object.getPrototypeOf?Object.getPrototypeOf(a):a.__proto__).constructor;function m(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))}var h={throw:1,return:2,break:3,continue:3};function f(t){var e,a;return function(r){e||(e={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,h[t],e)},delegateYield:function(t,n,s){return e.resultName=n,a(r.d,u(t),s)},finish:function(t){return a(r.f,t)}},a=function(t,a,n){r.p=e.prev,r.n=e.next;try{return t(a,n)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(t.exports=c=function(){return{wrap:function(t,a,r,n){return e.w(f(t),a,r,n&&n.reverse())},isGeneratorFunction:m,mark:e.m,awrap:function(t,e){return new r(t,e)},AsyncIterator:o,async:function(t,e,a,r,n){return(m(e)?i:s)(f(t),e,a,r,n)},keys:l,values:u}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports},110(t,e,a){var r=a(397);function n(){var e,a,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",o=s.toStringTag||"@@toStringTag";function l(t,n,s,i){var o=n&&n.prototype instanceof c?n:c,l=Object.create(o.prototype);return r(l,"_invoke",function(t,r,n){var s,i,o,l=0,c=n||[],d=!1,m={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,a){return s=t,i=0,o=e,m.n=a,u}};function h(t,r){for(i=t,o=r,a=0;!d&&l&&!n&&a<c.length;a++){var n,s=c[a],h=m.p,f=s[2];t>3?(n=f===r)&&(o=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=e):s[0]<=h&&((n=t<2&&h<s[1])?(i=0,m.v=r,m.n=s[1]):h<f&&(n=t<3||s[0]>r||r>f)&&(s[4]=t,s[5]=r,m.n=f,i=0))}if(n||t>1)return u;throw d=!0,r}return function(n,c,f){if(l>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,f),i=c,o=f;(a=i<2?e:o)||!d;){s||(i?i<3?(i>1&&(m.n=-1),h(i,o)):m.n=o:m.v=o);try{if(l=2,s){if(i||(n="next"),a=s[n]){if(!(a=a.call(s,o)))throw TypeError("iterator result is not an object");if(!a.done)return a;o=a.value,i<2&&(i=0)}else 1===i&&(a=s.return)&&a.call(s),i<2&&(o=TypeError("The iterator does not provide a '"+n+"' method"),i=1);s=e}else if((a=(d=m.n<0)?o:t.call(r,m))!==u)break}catch(t){s=e,i=1,o=t}finally{l=1}}return{value:a,done:d}}}(t,s,i),!0),l}var u={};function c(){}function d(){}function m(){}a=Object.getPrototypeOf;var h=[][i]?a(a([][i]())):(r(a={},i,function(){return this}),a),f=m.prototype=c.prototype=Object.create(h);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,r(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return d.prototype=m,r(f,"constructor",m),r(m,"constructor",d),d.displayName="GeneratorFunction",r(m,o,"GeneratorFunction"),r(f),r(f,o,"Generator"),r(f,i,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(t.exports=n=function(){return{w:l,m:p}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},163(t){t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},166(t,e,a){var r=a(163),n=a(397);t.exports=function t(e,a){function s(t,n,i,o){try{var l=e[t](n),u=l.value;return u instanceof r?a.resolve(u.v).then(function(t){s("next",t,i,o)},function(t){s("throw",t,i,o)}):a.resolve(u).then(function(t){l.value=t,i(l)},function(t){return s("throw",t,i,o)})}catch(t){o(t)}}var i;this.next||(n(t.prototype),n(t.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(t,e,r){function n(){return new a(function(e,a){s(t,r,e,a)})}return i=i?i.then(n,n):n()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},183(t,e,a){var r=a(24)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},312(t,e,a){var r=a(110),n=a(166);t.exports=function(t,e,a,s,i){return new n(r().w(t,e,a,s),i||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},397(t){function e(a,r,n,s){var i=Object.defineProperty;try{i({},"",{})}catch(a){i=0}t.exports=e=function(t,a,r,n){function s(a,r){e(t,a,function(t){return this._invoke(a,r,t)})}a?i?i(t,a,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[a]=r:(s("next",0),s("throw",1),s("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(a,r,n,s)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},735(t){function e(a){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(a)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},760(t,e,a){var r=a(735).default;t.exports=function(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],a=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},766(t){t.exports=function(t){var e=Object(t),a=[];for(var r in e)a.unshift(r);return function t(){for(;a.length;)if((r=a.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},t.exports.__esModule=!0,t.exports.default=t.exports},996(t,e,a){var r=a(312);t.exports=function(t,e,a,n,s){var i=r(t,e,a,n,s);return i.next().then(function(t){return t.done?t.value:i.next()})},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function a(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,a),s.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["admin/app"];var e=a.n(t);const r=flarum.core.compat["common/extenders"];var n=a.n(r);function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}const o=flarum.core.compat["common/Model"];var l=a.n(o),u=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).name=l().attribute("name"),e.slug=l().attribute("slug"),e.year=l().attribute("year"),e.description=l().attribute("description"),e.startsAt=l().attribute("startsAt",l().transformDate),e.endsAt=l().attribute("endsAt",l().transformDate),e.status=l().attribute("status"),e.showLiveVotes=l().attribute("showLiveVotes"),e.imageUrl=l().attribute("imageUrl"),e.createdAt=l().attribute("createdAt",l().transformDate),e.updatedAt=l().attribute("updatedAt",l().transformDate),e.categories=l().hasMany("categories"),e.categoryCount=l().attribute("categoryCount"),e.nomineeCount=l().attribute("nomineeCount"),e.voteCount=l().attribute("voteCount"),e}i(e,t);var a=e.prototype;return a.isDraft=function(){return"draft"===this.status()},a.isActive=function(){return"active"===this.status()},a.hasEnded=function(){return"ended"===this.status()},a.isPublished=function(){return"published"===this.status()},a.isVotingOpen=function(){var t=new Date,e=this.startsAt(),a=this.endsAt();return this.isActive()&&e&&a&&t>=e&&t<=a},a.canShowVotes=function(){return this.isPublished()||this.isActive()&&this.showLiveVotes()},e}(l()),c=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).name=l().attribute("name"),e.slug=l().attribute("slug"),e.description=l().attribute("description"),e.sortOrder=l().attribute("sortOrder"),e.allowOther=l().attribute("allowOther"),e.createdAt=l().attribute("createdAt",l().transformDate),e.updatedAt=l().attribute("updatedAt",l().transformDate),e.award=l().hasOne("award"),e.nominees=l().hasMany("nominees"),e.votes=l().hasMany("votes"),e.otherSuggestions=l().hasMany("otherSuggestions"),e.nomineeCount=l().attribute("nomineeCount"),e.voteCount=l().attribute("voteCount"),e.userVoteIds=l().attribute("userVoteIds"),e}i(e,t);var a=e.prototype;return a.hasUserVoted=function(){var t=this.userVoteIds();return t&&t.length>0},a.getUserVotedNomineeIds=function(){return this.userVoteIds()||[]},e}(l()),d=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).name=l().attribute("name"),e.slug=l().attribute("slug"),e.imageUrl=l().attribute("imageUrl"),e.metadata=l().attribute("metadata"),e.sortOrder=l().attribute("sortOrder"),e.createdAt=l().attribute("createdAt",l().transformDate),e.updatedAt=l().attribute("updatedAt",l().transformDate),e.category=l().hasOne("category"),e.voteCount=l().attribute("voteCount"),e.votePercentage=l().attribute("votePercentage"),e.rank=l().attribute("rank"),e.isWinner=l().attribute("isWinner"),e.isRunnerUp=l().attribute("isRunnerUp"),e.isThirdPlace=l().attribute("isThirdPlace"),e}return i(e,t),e}(l()),h=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).createdAt=l().attribute("createdAt",l().transformDate),e.nominee=l().hasOne("nominee"),e.category=l().hasOne("category"),e.user=l().hasOne("user"),e}return i(e,t),e}(l()),f=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).name=l().attribute("name"),e.status=l().attribute("status"),e.createdAt=l().attribute("createdAt",l().transformDate),e.updatedAt=l().attribute("updatedAt",l().transformDate),e.category=l().hasOne("category"),e.user=l().hasOne("user"),e.mergedToNominee=l().hasOne("mergedToNominee"),e}i(e,t);var a=e.prototype;return a.isPending=function(){return"pending"===this.status()},a.isApproved=function(){return"approved"===this.status()},a.isRejected=function(){return"rejected"===this.status()},a.isMerged=function(){return"merged"===this.status()},e}(l());const p=[(new(n().Store)).add("awards",u).add("award-categories",c).add("award-nominees",d).add("award-votes",h).add("award-other-suggestions",f)],g=flarum.core.compat["admin/components/ExtensionPage"];var v=a.n(g);const w=flarum.core.compat["common/components/Button"];var y=a.n(w);function b(t,e,a,r,n,s,i){try{var o=t[s](i),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(r,n)}function x(t){return function(){var e=this,a=arguments;return new Promise(function(r,n){var s=t.apply(e,a);function i(t){b(s,r,n,i,o,"next",t)}function o(t){b(s,r,n,i,o,"throw",t)}i(void 0)})}}var N=a(183),A=a.n(N);const k=flarum.core.compat["common/Component"];var _=a.n(k);const z=flarum.core.compat["common/components/LoadingIndicator"];var C=a.n(z);const F=flarum.core.compat["common/components/Modal"];var S=a.n(F);const I=flarum.core.compat["common/utils/Stream"];var O=a.n(I),T=function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).name=void 0,e.slug=void 0,e.year=void 0,e.description=void 0,e.startsAt=void 0,e.endsAt=void 0,e.status=void 0,e.showLiveVotes=void 0,e.imageUrl=void 0,e}i(a,t);var r=a.prototype;return r.oninit=function(e){var a,r;t.prototype.oninit.call(this,e);var n=this.attrs.award;this.name=O()((null==n?void 0:n.name())||""),this.slug=O()((null==n?void 0:n.slug())||""),this.year=O()((null==n?void 0:n.year())||(new Date).getFullYear()),this.description=O()((null==n?void 0:n.description())||""),this.startsAt=O()((null==n||null==(a=n.startsAt())?void 0:a.toISOString().slice(0,16))||""),this.endsAt=O()((null==n||null==(r=n.endsAt())?void 0:r.toISOString().slice(0,16))||""),this.status=O()((null==n?void 0:n.status())||"draft"),this.showLiveVotes=O()((null==n?void 0:n.showLiveVotes())||!1),this.imageUrl=O()((null==n?void 0:n.imageUrl())||"")},r.className=function(){return"AwardModal Modal--large"},r.title=function(){return this.attrs.award?e().translator.trans("huseyinfiliz-awards.admin.awards.edit_title"):e().translator.trans("huseyinfiliz-awards.admin.awards.create_title")},r.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.name")),m("input",{className:"FormControl",bidi:this.name})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.slug")),m("input",{className:"FormControl",bidi:this.slug})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.year")),m("input",{className:"FormControl",type:"number",bidi:this.year})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.description")),m("textarea",{className:"FormControl",bidi:this.description,rows:3})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.starts_at")),m("input",{className:"FormControl",type:"datetime-local",bidi:this.startsAt})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.ends_at")),m("input",{className:"FormControl",type:"datetime-local",bidi:this.endsAt})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.status")),m("select",{className:"FormControl",value:this.status(),onchange:function(e){return t.status(e.target.value)}},m("option",{value:"draft"},e().translator.trans("huseyinfiliz-awards.admin.awards.status_draft")),m("option",{value:"active"},e().translator.trans("huseyinfiliz-awards.admin.awards.status_active")),m("option",{value:"ended"},e().translator.trans("huseyinfiliz-awards.admin.awards.status_ended")),m("option",{value:"published"},e().translator.trans("huseyinfiliz-awards.admin.awards.status_published")))),m("div",{className:"Form-group"},m("label",{className:"checkbox"},m("input",{type:"checkbox",checked:this.showLiveVotes(),onchange:function(e){return t.showLiveVotes(e.target.checked)}}),e().translator.trans("huseyinfiliz-awards.admin.awards.show_live_votes"))),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.awards.image_url")),m("input",{className:"FormControl",bidi:this.imageUrl})),m("div",{className:"Form-group"},m(y(),{className:"Button Button--primary",type:"submit",loading:this.loading},e().translator.trans("huseyinfiliz-awards.lib.buttons.save")))))},r.onsubmit=function(){var t=x(A().mark(function t(a){var r,n,s,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),this.loading=!0,r={name:this.name(),slug:this.slug()||this.name().toLowerCase().replace(/\s+/g,"-"),year:this.year(),description:this.description(),startsAt:this.startsAt()?new Date(this.startsAt()).toISOString():null,endsAt:this.endsAt()?new Date(this.endsAt()).toISOString():null,status:this.status(),showLiveVotes:this.showLiveVotes(),imageUrl:this.imageUrl()},t.prev=1,!this.attrs.award){t.next=3;break}return t.next=2,this.attrs.award.save(r);case 2:t.next=4;break;case 3:return t.next=4,e().store.createRecord("awards").save(r);case 4:null==(n=(s=this.attrs).onsubmit)||n.call(s),e().modal.close(),t.next=6;break;case 5:throw t.prev=5,i=t.catch(1),this.loading=!1,m.redraw(),i;case 6:case"end":return t.stop()}},t,this,[[1,5]])}));return function(e){return t.apply(this,arguments)}}(),a}(S()),B=function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).loading=!0,e.awards=[],e}i(a,t);var r=a.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),this.loadAwards()},r.loadAwards=function(){var t=x(A().mark(function t(){var a,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),t.prev=1,t.next=2,e().store.find("awards");case 2:a=t.sent,this.awards=a||[],t.next=4;break;case 3:t.prev=3,r=t.catch(1),console.error("Failed to load awards:",r),this.awards=[];case 4:this.loading=!1,m.redraw();case 5:case"end":return t.stop()}},t,this,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),r.view=function(){var t=this;return this.loading?m(C(),null):m("div",{className:"AwardsTab"},m("div",{className:"AwardsTab-header"},m(y(),{className:"Button Button--primary",icon:"fas fa-plus",onclick:function(){return t.openModal()}},e().translator.trans("huseyinfiliz-awards.admin.awards.create"))),m("table",{className:"AwardsTab-table Table"},m("thead",null,m("tr",null,m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.name")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.year")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.status")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.categories")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.votes")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.awards.actions")))),m("tbody",null,0===this.awards.length?m("tr",null,m("td",{colSpan:6,className:"AwardsTab-empty"},e().translator.trans("huseyinfiliz-awards.admin.awards.empty"))):this.awards.map(function(a){return m("tr",{key:a.id()},m("td",null,m("strong",null,a.name()),m("div",{className:"helpText"},a.slug())),m("td",null,a.year()),m("td",null,m("span",{className:"AwardStatus AwardStatus--"+a.status()},t.statusLabel(a.status()))),m("td",null,(null==a.categoryCount?void 0:a.categoryCount())||0),m("td",null,(null==a.voteCount?void 0:a.voteCount())||0),m("td",{className:"AwardsTab-actions"},m(y(),{className:"Button Button--icon",icon:"fas fa-edit",onclick:function(){return t.openModal(a)}}),"ended"===a.status()&&m(y(),{className:"Button Button--icon Button--primary",icon:"fas fa-bullhorn",onclick:function(){return t.publishResults(a)},title:e().translator.trans("huseyinfiliz-awards.admin.awards.publish")}),m(y(),{className:"Button Button--icon Button--danger",icon:"fas fa-trash",onclick:function(){return t.deleteAward(a)}})))}))))},r.statusLabel=function(t){return{draft:e().translator.trans("huseyinfiliz-awards.admin.awards.status_draft"),active:e().translator.trans("huseyinfiliz-awards.admin.awards.status_active"),ended:e().translator.trans("huseyinfiliz-awards.admin.awards.status_ended"),published:e().translator.trans("huseyinfiliz-awards.admin.awards.status_published")}[t]||t},r.openModal=function(t){var a=this;e().modal.show(T,{award:t,onsubmit:function(){return a.loadAwards()}})},r.publishResults=function(){var t=x(A().mark(function t(a){var r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.awards.publish_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/awards/"+a.id()+"/publish"});case 2:this.loadAwards(),t.next=4;break;case 3:t.prev=3,r=t.catch(1),console.error("Failed to publish results:",r);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),r.deleteAward=function(){var t=x(A().mark(function t(a){var r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.awards.delete_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,a.delete();case 2:this.loadAwards(),t.next=4;break;case 3:t.prev=3,r=t.catch(1),console.error("Failed to delete award:",r);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),a}(_());const P=flarum.core.compat["common/components/Select"];var M=a.n(P),U=function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).name=void 0,e.slug=void 0,e.description=void 0,e.sortOrder=void 0,e.allowOther=void 0,e}i(a,t);var r=a.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e);var a=this.attrs.category;this.name=O()((null==a?void 0:a.name())||""),this.slug=O()((null==a?void 0:a.slug())||""),this.description=O()((null==a?void 0:a.description())||""),this.sortOrder=O()((null==a?void 0:a.sortOrder())||0),this.allowOther=O()((null==a?void 0:a.allowOther())||!1)},r.className=function(){return"CategoryModal"},r.title=function(){return this.attrs.category?e().translator.trans("huseyinfiliz-awards.admin.categories.edit_title"):e().translator.trans("huseyinfiliz-awards.admin.categories.create_title")},r.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.categories.name")),m("input",{className:"FormControl",bidi:this.name})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.categories.slug")),m("input",{className:"FormControl",bidi:this.slug})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.categories.description")),m("textarea",{className:"FormControl",bidi:this.description,rows:3})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.categories.sort_order")),m("input",{className:"FormControl",type:"number",bidi:this.sortOrder})),m("div",{className:"Form-group"},m("label",{className:"checkbox"},m("input",{type:"checkbox",checked:this.allowOther(),onchange:function(e){return t.allowOther(e.target.checked)}}),e().translator.trans("huseyinfiliz-awards.admin.categories.allow_other")),m("div",{className:"helpText"},e().translator.trans("huseyinfiliz-awards.admin.categories.allow_other_help"))),m("div",{className:"Form-group"},m(y(),{className:"Button Button--primary",type:"submit",loading:this.loading},e().translator.trans("huseyinfiliz-awards.lib.buttons.save")))))},r.onsubmit=function(){var t=x(A().mark(function t(a){var r,n,s,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),this.loading=!0,r={name:this.name(),slug:this.slug()||this.name().toLowerCase().replace(/\s+/g,"-"),description:this.description(),sortOrder:this.sortOrder(),allowOther:this.allowOther()},this.attrs.category||(r.relationships={award:{data:{type:"awards",id:this.attrs.awardId}}}),t.prev=1,!this.attrs.category){t.next=3;break}return t.next=2,this.attrs.category.save(r);case 2:t.next=4;break;case 3:return t.next=4,e().store.createRecord("award-categories").save(r);case 4:null==(n=(s=this.attrs).onsubmit)||n.call(s),e().modal.close(),t.next=6;break;case 5:throw t.prev=5,i=t.catch(1),this.loading=!1,m.redraw(),i;case 6:case"end":return t.stop()}},t,this,[[1,5]])}));return function(e){return t.apply(this,arguments)}}(),a}(S()),j=function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).loading=!0,e.awards=[],e.categories=[],e.selectedAwardId="",e}i(a,t);var r=a.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),this.loadAwards()},r.loadAwards=function(){var t=x(A().mark(function t(){var a,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),t.prev=1,t.next=2,e().store.find("awards");case 2:if(a=t.sent,this.awards=a||[],!(this.awards.length>0)||this.selectedAwardId){t.next=3;break}return this.selectedAwardId=String(this.awards[0].id()),t.next=3,this.loadCategories();case 3:t.next=5;break;case 4:t.prev=4,r=t.catch(1),console.error("Failed to load awards:",r);case 5:this.loading=!1,m.redraw();case 6:case"end":return t.stop()}},t,this,[[1,4]])}));return function(){return t.apply(this,arguments)}}(),r.loadCategories=function(){var t=x(A().mark(function t(){var a,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.selectedAwardId){t.next=1;break}return this.categories=[],t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-categories",{filter:{award_id:this.selectedAwardId}});case 2:a=t.sent,this.categories=a||[],t.next=4;break;case 3:t.prev=3,r=t.catch(1),console.error("Failed to load categories:",r),this.categories=[];case 4:m.redraw();case 5:case"end":return t.stop()}},t,this,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),r.view=function(){var t=this;if(this.loading)return m(C(),null);var a={};return this.awards.forEach(function(t){a[String(t.id())]=t.name()+" ("+t.year()+")"}),m("div",{className:"CategoriesTab"},m("div",{className:"CategoriesTab-header"},m(M(),{value:this.selectedAwardId,options:a,onchange:function(e){t.selectedAwardId=e,t.loadCategories()}}),m(y(),{className:"Button Button--primary",icon:"fas fa-plus",onclick:function(){return t.openModal()},disabled:!this.selectedAwardId},e().translator.trans("huseyinfiliz-awards.admin.categories.create"))),m("table",{className:"CategoriesTab-table Table"},m("thead",null,m("tr",null,m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.name")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.nominees")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.votes")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.allow_other")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.categories.actions")))),m("tbody",null,0===this.categories.length?m("tr",null,m("td",{colSpan:5,className:"CategoriesTab-empty"},e().translator.trans("huseyinfiliz-awards.admin.categories.empty"))):this.categories.map(function(e){return m("tr",{key:e.id()},m("td",null,m("strong",null,e.name()),m("div",{className:"helpText"},e.description())),m("td",null,(null==e.nomineeCount?void 0:e.nomineeCount())||0),m("td",null,(null==e.voteCount?void 0:e.voteCount())||0),m("td",null,e.allowOther()?"Yes":"No"),m("td",{className:"CategoriesTab-actions"},m(y(),{className:"Button Button--icon",icon:"fas fa-edit",onclick:function(){return t.openModal(e)}}),m(y(),{className:"Button Button--icon Button--danger",icon:"fas fa-trash",onclick:function(){return t.deleteCategory(e)}})))}))))},r.openModal=function(t){var a=this;e().modal.show(U,{category:t,awardId:this.selectedAwardId,onsubmit:function(){return a.loadCategories()}})},r.deleteCategory=function(){var t=x(A().mark(function t(a){var r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.categories.delete_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,a.delete();case 2:this.loadCategories(),t.next=4;break;case 3:t.prev=3,r=t.catch(1),console.error("Failed to delete category:",r);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),a}(_()),V=function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).name=void 0,e.slug=void 0,e.imageUrl=void 0,e.sortOrder=void 0,e}i(a,t);var r=a.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e);var a=this.attrs.nominee;this.name=O()((null==a?void 0:a.name())||""),this.slug=O()((null==a?void 0:a.slug())||""),this.imageUrl=O()((null==a?void 0:a.imageUrl())||""),this.sortOrder=O()((null==a?void 0:a.sortOrder())||0)},r.className=function(){return"NomineeModal"},r.title=function(){return this.attrs.nominee?e().translator.trans("huseyinfiliz-awards.admin.nominees.edit_title"):e().translator.trans("huseyinfiliz-awards.admin.nominees.create_title")},r.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.name")),m("input",{className:"FormControl",bidi:this.name})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.slug")),m("input",{className:"FormControl",bidi:this.slug})),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.image_url")),m("input",{className:"FormControl",bidi:this.imageUrl}),m("div",{className:"helpText"},e().translator.trans("huseyinfiliz-awards.admin.nominees.image_url_help"))),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.sort_order")),m("input",{className:"FormControl",type:"number",bidi:this.sortOrder})),m("div",{className:"Form-group"},m(y(),{className:"Button Button--primary",type:"submit",loading:this.loading},e().translator.trans("huseyinfiliz-awards.lib.buttons.save")))))},r.onsubmit=function(){var t=x(A().mark(function t(a){var r,n,s,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),this.loading=!0,r={name:this.name(),slug:this.slug()||this.name().toLowerCase().replace(/\s+/g,"-"),imageUrl:this.imageUrl(),sortOrder:this.sortOrder()},this.attrs.nominee||(r.relationships={category:{data:{type:"award-categories",id:this.attrs.categoryId}}}),t.prev=1,!this.attrs.nominee){t.next=3;break}return t.next=2,this.attrs.nominee.save(r);case 2:t.next=4;break;case 3:return t.next=4,e().store.createRecord("award-nominees").save(r);case 4:null==(n=(s=this.attrs).onsubmit)||n.call(s),e().modal.close(),t.next=6;break;case 5:throw t.prev=5,i=t.catch(1),this.loading=!1,m.redraw(),i;case 6:case"end":return t.stop()}},t,this,[[1,5]])}));return function(e){return t.apply(this,arguments)}}(),a}(S()),D=function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).loading=!0,e.awards=[],e.categories=[],e.nominees=[],e.selectedAwardId="",e.selectedCategoryId="",e}i(a,t);var r=a.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),this.loadAwards()},r.loadAwards=function(){var t=x(A().mark(function t(){var a,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),t.prev=1,t.next=2,e().store.find("awards");case 2:if(a=t.sent,this.awards=a||[],!(this.awards.length>0)||this.selectedAwardId){t.next=3;break}return this.selectedAwardId=String(this.awards[0].id()),t.next=3,this.loadCategories();case 3:t.next=5;break;case 4:t.prev=4,r=t.catch(1),console.error("Failed to load awards:",r);case 5:this.loading=!1,m.redraw();case 6:case"end":return t.stop()}},t,this,[[1,4]])}));return function(){return t.apply(this,arguments)}}(),r.loadCategories=function(){var t=x(A().mark(function t(){var a,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.selectedAwardId){t.next=1;break}return this.categories=[],this.nominees=[],t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-categories",{filter:{award_id:this.selectedAwardId}});case 2:if(a=t.sent,this.categories=a||[],!(this.categories.length>0)){t.next=4;break}return this.selectedCategoryId=String(this.categories[0].id()),t.next=3,this.loadNominees();case 3:t.next=5;break;case 4:this.selectedCategoryId="",this.nominees=[];case 5:t.next=7;break;case 6:t.prev=6,r=t.catch(1),console.error("Failed to load categories:",r);case 7:m.redraw();case 8:case"end":return t.stop()}},t,this,[[1,6]])}));return function(){return t.apply(this,arguments)}}(),r.loadNominees=function(){var t=x(A().mark(function t(){var a,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.selectedCategoryId){t.next=1;break}return this.nominees=[],t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-nominees",{filter:{category_id:this.selectedCategoryId}});case 2:a=t.sent,this.nominees=a||[],t.next=4;break;case 3:t.prev=3,r=t.catch(1),console.error("Failed to load nominees:",r),this.nominees=[];case 4:m.redraw();case 5:case"end":return t.stop()}},t,this,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),r.view=function(){var t=this;if(this.loading)return m(C(),null);var a={};this.awards.forEach(function(t){a[String(t.id())]=t.name()+" ("+t.year()+")"});var r={};return this.categories.forEach(function(t){r[String(t.id())]=t.name()}),m("div",{className:"NomineesTab"},m("div",{className:"NomineesTab-header"},m(M(),{value:this.selectedAwardId,options:a,onchange:function(e){t.selectedAwardId=e,t.loadCategories()}}),m(M(),{value:this.selectedCategoryId,options:r,onchange:function(e){t.selectedCategoryId=e,t.loadNominees()},disabled:0===this.categories.length}),m(y(),{className:"Button Button--primary",icon:"fas fa-plus",onclick:function(){return t.openModal()},disabled:!this.selectedCategoryId},e().translator.trans("huseyinfiliz-awards.admin.nominees.create"))),m("table",{className:"NomineesTab-table Table"},m("thead",null,m("tr",null,m("th",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.image")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.name")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.votes")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.nominees.actions")))),m("tbody",null,0===this.nominees.length?m("tr",null,m("td",{colSpan:4,className:"NomineesTab-empty"},e().translator.trans("huseyinfiliz-awards.admin.nominees.empty"))):this.nominees.map(function(a){return m("tr",{key:a.id()},m("td",null,a.imageUrl()?m("img",{src:a.imageUrl(),alt:a.name(),className:"NomineeImage"}):m("div",{className:"NomineeImage NomineeImage--placeholder"},m("i",{className:"fas fa-image"}))),m("td",null,m("strong",null,a.name())),m("td",null,m("span",{className:"NomineeVotes"},(null==a.voteCount?void 0:a.voteCount())||0),m(y(),{className:"Button Button--icon Button--link",icon:"fas fa-edit",onclick:function(){return t.editVotes(a)},title:e().translator.trans("huseyinfiliz-awards.admin.nominees.edit_votes")})),m("td",{className:"NomineesTab-actions"},m(y(),{className:"Button Button--icon",icon:"fas fa-edit",onclick:function(){return t.openModal(a)}}),m(y(),{className:"Button Button--icon Button--danger",icon:"fas fa-trash",onclick:function(){return t.deleteNominee(a)}})))}))))},r.openModal=function(t){var a=this;e().modal.show(V,{nominee:t,categoryId:this.selectedCategoryId,onsubmit:function(){return a.loadNominees()}})},r.editVotes=function(){var t=x(A().mark(function t(a){var r,n,s,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(null==a.voteCount?void 0:a.voteCount())||0,null!==(n=prompt(e().translator.trans("huseyinfiliz-awards.admin.nominees.enter_votes"),String(r)))){t.next=1;break}return t.abrupt("return");case 1:if(s=parseInt(n,10),!(isNaN(s)||s<0)){t.next=2;break}return alert(e().translator.trans("huseyinfiliz-awards.admin.nominees.invalid_votes")),t.abrupt("return");case 2:return t.prev=2,t.next=3,e().request({method:"PATCH",url:e().forum.attribute("apiUrl")+"/award-nominees/"+a.id()+"/votes",body:{data:{attributes:{voteCount:s}}}});case 3:this.loadNominees(),t.next=5;break;case 4:t.prev=4,i=t.catch(2),console.error("Failed to update votes:",i);case 5:case"end":return t.stop()}},t,this,[[2,4]])}));return function(e){return t.apply(this,arguments)}}(),r.deleteNominee=function(){var t=x(A().mark(function t(a){var r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.nominees.delete_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,a.delete();case 2:this.loadNominees(),t.next=4;break;case 3:t.prev=3,r=t.catch(1),console.error("Failed to delete nominee:",r);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),a}(_()),L=function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).loading=!0,e.awards=[],e.categories=[],e.nominees=[],e.suggestions=[],e.selectedAwardId="",e.selectedCategoryId="",e}i(a,t);var r=a.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),this.loadAwards()},r.loadAwards=function(){var t=x(A().mark(function t(){var a,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),t.prev=1,t.next=2,e().store.find("awards");case 2:if(a=t.sent,this.awards=a||[],!(this.awards.length>0)||this.selectedAwardId){t.next=3;break}return this.selectedAwardId=String(this.awards[0].id()),t.next=3,this.loadCategories();case 3:t.next=5;break;case 4:t.prev=4,r=t.catch(1),console.error("Failed to load awards:",r);case 5:this.loading=!1,m.redraw();case 6:case"end":return t.stop()}},t,this,[[1,4]])}));return function(){return t.apply(this,arguments)}}(),r.loadCategories=function(){var t=x(A().mark(function t(){var a,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.selectedAwardId){t.next=1;break}return this.categories=[],t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-categories",{filter:{award_id:this.selectedAwardId}});case 2:return a=t.sent,this.categories=a||[],this.selectedCategoryId="",t.next=3,this.loadSuggestions();case 3:t.next=5;break;case 4:t.prev=4,r=t.catch(1),console.error("Failed to load categories:",r);case 5:m.redraw();case 6:case"end":return t.stop()}},t,this,[[1,4]])}));return function(){return t.apply(this,arguments)}}(),r.loadSuggestions=function(){var t=x(A().mark(function t(){var a,r,n,s;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={filter:{status:"pending"}},this.selectedCategoryId?a.filter.category_id=this.selectedCategoryId:this.selectedAwardId&&(a.filter.award_id=this.selectedAwardId),t.next=1,e().store.find("award-other-suggestions",a);case 1:if(r=t.sent,this.suggestions=r||[],!this.selectedCategoryId){t.next=3;break}return t.next=2,e().store.find("award-nominees",{filter:{category_id:this.selectedCategoryId}});case 2:n=t.sent,this.nominees=n||[];case 3:t.next=5;break;case 4:t.prev=4,s=t.catch(0),console.error("Failed to load suggestions:",s),this.suggestions=[];case 5:m.redraw();case 6:case"end":return t.stop()}},t,this,[[0,4]])}));return function(){return t.apply(this,arguments)}}(),r.view=function(){var t=this;if(this.loading)return m(C(),null);var a={"":"All Awards"};this.awards.forEach(function(t){a[String(t.id())]=t.name()+" ("+t.year()+")"});var r={"":"All Categories"};return this.categories.forEach(function(t){r[String(t.id())]=t.name()}),m("div",{className:"SuggestionsTab"},m("div",{className:"SuggestionsTab-header"},m(M(),{value:this.selectedAwardId,options:a,onchange:function(e){t.selectedAwardId=e,t.loadCategories()}}),m(M(),{value:this.selectedCategoryId,options:r,onchange:function(e){t.selectedCategoryId=e,t.loadSuggestions()},disabled:0===this.categories.length})),m("table",{className:"SuggestionsTab-table Table"},m("thead",null,m("tr",null,m("th",null,e().translator.trans("huseyinfiliz-awards.admin.suggestions.name")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.suggestions.category")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.suggestions.user")),m("th",null,e().translator.trans("huseyinfiliz-awards.admin.suggestions.actions")))),m("tbody",null,0===this.suggestions.length?m("tr",null,m("td",{colSpan:4,className:"SuggestionsTab-empty"},e().translator.trans("huseyinfiliz-awards.admin.suggestions.empty"))):this.suggestions.map(function(a){var r,n;return m("tr",{key:a.id()},m("td",null,m("strong",null,a.name())),m("td",null,null==(r=a.category())||null==r.name?void 0:r.name()),m("td",null,null==(n=a.user())||null==n.displayName?void 0:n.displayName()),m("td",{className:"SuggestionsTab-actions"},m(y(),{className:"Button Button--primary",icon:"fas fa-check",onclick:function(){return t.approveSuggestion(a)}},e().translator.trans("huseyinfiliz-awards.admin.suggestions.approve")),m(y(),{className:"Button",icon:"fas fa-times",onclick:function(){return t.rejectSuggestion(a)}},e().translator.trans("huseyinfiliz-awards.admin.suggestions.reject")),m(y(),{className:"Button",icon:"fas fa-compress-arrows-alt",onclick:function(){return t.mergeSuggestion(a)}},e().translator.trans("huseyinfiliz-awards.admin.suggestions.merge"))))}))))},r.approveSuggestion=function(){var t=x(A().mark(function t(a){var r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,e().request({method:"PATCH",url:e().forum.attribute("apiUrl")+"/award-other-suggestions/"+a.id(),body:{data:{attributes:{status:"approved"}}}});case 1:this.loadSuggestions(),t.next=3;break;case 2:t.prev=2,r=t.catch(0),console.error("Failed to approve suggestion:",r);case 3:case"end":return t.stop()}},t,this,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),r.rejectSuggestion=function(){var t=x(A().mark(function t(a){var r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm(e().translator.trans("huseyinfiliz-awards.admin.suggestions.reject_confirm"))){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,e().request({method:"PATCH",url:e().forum.attribute("apiUrl")+"/award-other-suggestions/"+a.id(),body:{data:{attributes:{status:"rejected"}}}});case 2:this.loadSuggestions(),t.next=4;break;case 3:t.prev=3,r=t.catch(1),console.error("Failed to reject suggestion:",r);case 4:case"end":return t.stop()}},t,this,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),r.mergeSuggestion=function(){var t=x(A().mark(function t(a){var r,n,s,i,o,l,u;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null==(r=a.category())||null==r.id?void 0:r.id()){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,t.next=2,e().store.find("award-nominees",{filter:{category_id:n}});case 2:if(0!==(s=t.sent).length){t.next=3;break}return alert(e().translator.trans("huseyinfiliz-awards.admin.suggestions.no_nominees")),t.abrupt("return");case 3:if(i=s.map(function(t){return t.id()+": "+t.name()}).join("\n"),o=prompt(e().translator.trans("huseyinfiliz-awards.admin.suggestions.select_nominee")+"\n\n"+i)){t.next=4;break}return t.abrupt("return");case 4:if(l=parseInt(o.split(":")[0],10),!isNaN(l)){t.next=5;break}return t.abrupt("return");case 5:return t.next=6,e().request({method:"PATCH",url:e().forum.attribute("apiUrl")+"/award-other-suggestions/"+a.id(),body:{data:{attributes:{status:"merged"},relationships:{mergedToNominee:{data:{type:"award-nominees",id:String(l)}}}}}});case 6:this.loadSuggestions(),t.next=8;break;case 7:t.prev=7,u=t.catch(1),console.error("Failed to merge suggestion:",u);case 8:case"end":return t.stop()}},t,this,[[1,7]])}));return function(e){return t.apply(this,arguments)}}(),a}(_()),E=function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).navTitle=void 0,e.votesPerCategory=void 0,e.loading=!1,e}i(a,t);var r=a.prototype;return r.oninit=function(a){t.prototype.oninit.call(this,a),this.navTitle=O()(e().data.settings["huseyinfiliz-awards.nav_title"]||"Awards"),this.votesPerCategory=O()(parseInt(e().data.settings["huseyinfiliz-awards.votes_per_category"]||"1"))},r.view=function(){return m("div",{className:"SettingsTab"},m("div",{className:"Form-group"},m("h3",null,m("i",{className:"fas fa-cogs"}),e().translator.trans("huseyinfiliz-awards.admin.tabs.settings")),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.settings.nav_title")),m("input",{className:"FormControl",bidi:this.navTitle}),m("div",{className:"helpText"},e().translator.trans("huseyinfiliz-awards.admin.settings.nav_title_help"))),m("div",{className:"Form-group"},m("label",null,e().translator.trans("huseyinfiliz-awards.admin.settings.votes_per_category")),m("input",{className:"FormControl",type:"number",min:"0",bidi:this.votesPerCategory}),m("div",{className:"helpText"},e().translator.trans("huseyinfiliz-awards.admin.settings.votes_per_category_help"))),m("div",{className:"Form-group"},m(y(),{className:"Button Button--primary",loading:this.loading,onclick:this.saveSettings.bind(this)},e().translator.trans("huseyinfiliz-awards.lib.buttons.save")))))},r.saveSettings=function(){var t=this;this.loading=!0,e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/settings",body:{"huseyinfiliz-awards.nav_title":this.navTitle(),"huseyinfiliz-awards.votes_per_category":this.votesPerCategory()}}).then(function(){t.loading=!1,m.redraw(),e().alerts.show({type:"success"},e().translator.trans("core.lib.success_message"))})},a}(_()),R=function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).currentTab="awards",e}i(a,t);var r=a.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),this.currentTab="awards"},r.content=function(){return m("div",{className:"AwardsPage"},m("div",{className:"AwardsPage-header"},m("div",{className:"container"},m("h2",null,e().translator.trans("huseyinfiliz-awards.admin.title")))),m("div",{className:"AwardsPage-nav"},m("div",{className:"container"},m("nav",{className:"AwardsPage-tabs"},this.tabButton("awards","fas fa-trophy","huseyinfiliz-awards.admin.tabs.awards"),this.tabButton("categories","fas fa-folder","huseyinfiliz-awards.admin.tabs.categories"),this.tabButton("nominees","fas fa-user-tie","huseyinfiliz-awards.admin.tabs.nominees"),this.tabButton("suggestions","fas fa-lightbulb","huseyinfiliz-awards.admin.tabs.suggestions"),this.tabButton("settings","fas fa-cog","huseyinfiliz-awards.admin.tabs.settings")))),m("div",{className:"AwardsPage-content"},m("div",{className:"container"},"awards"===this.currentTab&&m(B,null),"categories"===this.currentTab&&m(j,null),"nominees"===this.currentTab&&m(D,null),"suggestions"===this.currentTab&&m(L,null),"settings"===this.currentTab&&m(E,null))))},r.tabButton=function(t,a,r){var n=this;return m(y(),{className:"Button "+(this.currentTab===t?"Button--primary":""),icon:a,onclick:function(){n.currentTab=t,m.redraw()}},e().translator.trans(r))},a}(v());e().initializers.add("huseyinfiliz/awards",function(){p.forEach(function(t){return t.extend(e())}),e().extensionData.for("huseyinfiliz-awards").registerPage(R).registerPermission({icon:"fas fa-cog",label:e().translator.trans("huseyinfiliz-awards.admin.permissions.manage"),permission:"awards.manage"},"moderate").registerPermission({icon:"fas fa-vote-yea",label:e().translator.trans("huseyinfiliz-awards.admin.permissions.vote"),permission:"awards.vote"},"reply").registerPermission({icon:"fas fa-trophy",label:e().translator.trans("huseyinfiliz-awards.admin.permissions.view"),permission:"awards.view",allowGuest:!0},"view").registerPermission({icon:"fas fa-chart-bar",label:e().translator.trans("huseyinfiliz-awards.admin.permissions.view_results"),permission:"awards.viewResults"},"moderate")})})(),module.exports={}})();
//# sourceMappingURL=admin.js.map