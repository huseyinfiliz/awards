{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/regenerator.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/OverloadYield.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/regeneratorAsyncIterator.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/regenerator/index.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/regeneratorAsyncGen.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/regeneratorDefine.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/regeneratorValues.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/regeneratorKeys.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/regeneratorAsync.js","webpack://@huseyinfiliz/awards/webpack/bootstrap","webpack://@huseyinfiliz/awards/webpack/runtime/compat get default export","webpack://@huseyinfiliz/awards/webpack/runtime/define property getters","webpack://@huseyinfiliz/awards/webpack/runtime/hasOwnProperty shorthand","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['forum/app']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/extend']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/extenders']\"","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/Model']\"","webpack://@huseyinfiliz/awards/./src/common/models/Award.ts","webpack://@huseyinfiliz/awards/./src/common/models/Category.ts","webpack://@huseyinfiliz/awards/./src/common/models/Nominee.ts","webpack://@huseyinfiliz/awards/./src/common/models/Vote.ts","webpack://@huseyinfiliz/awards/./src/common/models/OtherSuggestion.ts","webpack://@huseyinfiliz/awards/./src/common/extend.ts","webpack://@huseyinfiliz/awards/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/components/Page']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/components/Select']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/components/Button']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/Component']\"","webpack://@huseyinfiliz/awards/./src/forum/components/NomineeCard.tsx","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@huseyinfiliz/awards/./src/forum/components/SuggestionModal.tsx","webpack://@huseyinfiliz/awards/./src/forum/components/OtherCard.tsx","webpack://@huseyinfiliz/awards/./src/forum/components/CategoryCard.tsx","webpack://@huseyinfiliz/awards/./src/forum/components/VotingProgressBar.tsx","webpack://@huseyinfiliz/awards/./src/forum/components/VotingView.tsx","webpack://@huseyinfiliz/awards/./src/forum/components/CategoryResultsModal.tsx","webpack://@huseyinfiliz/awards/./src/forum/components/CategoryResultCard.tsx","webpack://@huseyinfiliz/awards/./src/forum/components/PredictionSummary.tsx","webpack://@huseyinfiliz/awards/./src/forum/components/ResultsView.tsx","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@huseyinfiliz/awards/./src/forum/components/MyVotesView.tsx","webpack://@huseyinfiliz/awards/./src/forum/components/AwardsPage.tsx","webpack://@huseyinfiliz/awards/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@huseyinfiliz/awards/./src/forum/components/ResultsPublishedNotification.tsx","webpack://@huseyinfiliz/awards/./src/forum/index.tsx"],"sourcesContent":["var OverloadYield = require(\"./OverloadYield.js\");\nvar regenerator = require(\"./regenerator.js\");\nvar regeneratorAsync = require(\"./regeneratorAsync.js\");\nvar regeneratorAsyncGen = require(\"./regeneratorAsyncGen.js\");\nvar regeneratorAsyncIterator = require(\"./regeneratorAsyncIterator.js\");\nvar regeneratorKeys = require(\"./regeneratorKeys.js\");\nvar regeneratorValues = require(\"./regeneratorValues.js\");\nfunction _regeneratorRuntime() {\n  \"use strict\";\n\n  var r = regenerator(),\n    e = r.m(_regeneratorRuntime),\n    t = (Object.getPrototypeOf ? Object.getPrototypeOf(e) : e.__proto__).constructor;\n  function n(r) {\n    var e = \"function\" == typeof r && r.constructor;\n    return !!e && (e === t || \"GeneratorFunction\" === (e.displayName || e.name));\n  }\n  var o = {\n    \"throw\": 1,\n    \"return\": 2,\n    \"break\": 3,\n    \"continue\": 3\n  };\n  function a(r) {\n    var e, t;\n    return function (n) {\n      e || (e = {\n        stop: function stop() {\n          return t(n.a, 2);\n        },\n        \"catch\": function _catch() {\n          return n.v;\n        },\n        abrupt: function abrupt(r, e) {\n          return t(n.a, o[r], e);\n        },\n        delegateYield: function delegateYield(r, o, a) {\n          return e.resultName = o, t(n.d, regeneratorValues(r), a);\n        },\n        finish: function finish(r) {\n          return t(n.f, r);\n        }\n      }, t = function t(r, _t, o) {\n        n.p = e.prev, n.n = e.next;\n        try {\n          return r(_t, o);\n        } finally {\n          e.next = n.n;\n        }\n      }), e.resultName && (e[e.resultName] = n.v, e.resultName = void 0), e.sent = n.v, e.next = n.n;\n      try {\n        return r.call(this, e);\n      } finally {\n        n.p = e.prev, n.n = e.next;\n      }\n    };\n  }\n  return (module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return {\n      wrap: function wrap(e, t, n, o) {\n        return r.w(a(e), t, n, o && o.reverse());\n      },\n      isGeneratorFunction: n,\n      mark: r.m,\n      awrap: function awrap(r, e) {\n        return new OverloadYield(r, e);\n      },\n      AsyncIterator: regeneratorAsyncIterator,\n      async: function async(r, e, t, o, u) {\n        return (n(e) ? regeneratorAsyncGen : regeneratorAsync)(a(r), e, t, o, u);\n      },\n      keys: regeneratorKeys,\n      values: regeneratorValues\n    };\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports)();\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var regeneratorDefine = require(\"./regeneratorDefine.js\");\nfunction _regenerator() {\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */\n  var e,\n    t,\n    r = \"function\" == typeof Symbol ? Symbol : {},\n    n = r.iterator || \"@@iterator\",\n    o = r.toStringTag || \"@@toStringTag\";\n  function i(r, n, o, i) {\n    var c = n && n.prototype instanceof Generator ? n : Generator,\n      u = Object.create(c.prototype);\n    return regeneratorDefine(u, \"_invoke\", function (r, n, o) {\n      var i,\n        c,\n        u,\n        f = 0,\n        p = o || [],\n        y = !1,\n        G = {\n          p: 0,\n          n: 0,\n          v: e,\n          a: d,\n          f: d.bind(e, 4),\n          d: function d(t, r) {\n            return i = t, c = 0, u = e, G.n = r, a;\n          }\n        };\n      function d(r, n) {\n        for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) {\n          var o,\n            i = p[t],\n            d = G.p,\n            l = i[2];\n          r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0));\n        }\n        if (o || r > 1) return a;\n        throw y = !0, n;\n      }\n      return function (o, p, l) {\n        if (f > 1) throw TypeError(\"Generator is already running\");\n        for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) {\n          i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u);\n          try {\n            if (f = 2, i) {\n              if (c || (o = \"next\"), t = i[o]) {\n                if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\");\n                if (!t.done) return t;\n                u = t.value, c < 2 && (c = 0);\n              } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1);\n              i = e;\n            } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break;\n          } catch (t) {\n            i = e, c = 1, u = t;\n          } finally {\n            f = 1;\n          }\n        }\n        return {\n          value: t,\n          done: y\n        };\n      };\n    }(r, o, i), !0), u;\n  }\n  var a = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  t = Object.getPrototypeOf;\n  var c = [][n] ? t(t([][n]())) : (regeneratorDefine(t = {}, n, function () {\n      return this;\n    }), t),\n    u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c);\n  function f(e) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, regeneratorDefine(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e;\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, regeneratorDefine(u, \"constructor\", GeneratorFunctionPrototype), regeneratorDefine(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", regeneratorDefine(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), regeneratorDefine(u), regeneratorDefine(u, o, \"Generator\"), regeneratorDefine(u, n, function () {\n    return this;\n  }), regeneratorDefine(u, \"toString\", function () {\n    return \"[object Generator]\";\n  }), (module.exports = _regenerator = function _regenerator() {\n    return {\n      w: i,\n      m: f\n    };\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports)();\n}\nmodule.exports = _regenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _OverloadYield(e, d) {\n  this.v = e, this.k = d;\n}\nmodule.exports = _OverloadYield, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var OverloadYield = require(\"./OverloadYield.js\");\nvar regeneratorDefine = require(\"./regeneratorDefine.js\");\nfunction AsyncIterator(t, e) {\n  function n(r, o, i, f) {\n    try {\n      var c = t[r](o),\n        u = c.value;\n      return u instanceof OverloadYield ? e.resolve(u.v).then(function (t) {\n        n(\"next\", t, i, f);\n      }, function (t) {\n        n(\"throw\", t, i, f);\n      }) : e.resolve(u).then(function (t) {\n        c.value = t, i(c);\n      }, function (t) {\n        return n(\"throw\", t, i, f);\n      });\n    } catch (t) {\n      f(t);\n    }\n  }\n  var r;\n  this.next || (regeneratorDefine(AsyncIterator.prototype), regeneratorDefine(AsyncIterator.prototype, \"function\" == typeof Symbol && Symbol.asyncIterator || \"@asyncIterator\", function () {\n    return this;\n  })), regeneratorDefine(this, \"_invoke\", function (t, o, i) {\n    function f() {\n      return new e(function (e, r) {\n        n(t, i, e, r);\n      });\n    }\n    return r = r ? r.then(f, f) : f();\n  }, !0);\n}\nmodule.exports = AsyncIterator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","var regenerator = require(\"./regenerator.js\");\nvar regeneratorAsyncIterator = require(\"./regeneratorAsyncIterator.js\");\nfunction _regeneratorAsyncGen(r, e, t, o, n) {\n  return new regeneratorAsyncIterator(regenerator().w(r, e, t, o), n || Promise);\n}\nmodule.exports = _regeneratorAsyncGen, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _regeneratorDefine(e, r, n, t) {\n  var i = Object.defineProperty;\n  try {\n    i({}, \"\", {});\n  } catch (e) {\n    i = 0;\n  }\n  module.exports = _regeneratorDefine = function regeneratorDefine(e, r, n, t) {\n    function o(r, n) {\n      _regeneratorDefine(e, r, function (e) {\n        return this._invoke(r, n, e);\n      });\n    }\n    r ? i ? i(e, r, {\n      value: n,\n      enumerable: !t,\n      configurable: !t,\n      writable: !t\n    }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2));\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _regeneratorDefine(e, r, n, t);\n}\nmodule.exports = _regeneratorDefine, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorValues(e) {\n  if (null != e) {\n    var t = e[\"function\" == typeof Symbol && Symbol.iterator || \"@@iterator\"],\n      r = 0;\n    if (t) return t.call(e);\n    if (\"function\" == typeof e.next) return e;\n    if (!isNaN(e.length)) return {\n      next: function next() {\n        return e && r >= e.length && (e = void 0), {\n          value: e && e[r++],\n          done: !e\n        };\n      }\n    };\n  }\n  throw new TypeError(_typeof(e) + \" is not iterable\");\n}\nmodule.exports = _regeneratorValues, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _regeneratorKeys(e) {\n  var n = Object(e),\n    r = [];\n  for (var t in n) r.unshift(t);\n  return function e() {\n    for (; r.length;) if ((t = r.pop()) in n) return e.value = t, e.done = !1, e;\n    return e.done = !0, e;\n  };\n}\nmodule.exports = _regeneratorKeys, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var regeneratorAsyncGen = require(\"./regeneratorAsyncGen.js\");\nfunction _regeneratorAsync(n, e, r, t, o) {\n  var a = regeneratorAsyncGen(n, e, r, t, o);\n  return a.next().then(function (n) {\n    return n.done ? n.value : a.next();\n  });\n}\nmodule.exports = _regeneratorAsync, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\nimport Category from './Category';\n\nexport default class Award extends Model {\n  name = Model.attribute<string>('name');\n  slug = Model.attribute<string>('slug');\n  year = Model.attribute<number>('year');\n  description = Model.attribute<string>('description');\n  startsAt = Model.attribute('startsAt', Model.transformDate);\n  endsAt = Model.attribute('endsAt', Model.transformDate);\n  status = Model.attribute<string>('status');\n  effectiveStatus = Model.attribute<string>('effectiveStatus');\n  showLiveVotes = Model.attribute<boolean>('showLiveVotes');\n  imageUrl = Model.attribute<string>('imageUrl');\n  createdAt = Model.attribute('createdAt', Model.transformDate);\n  updatedAt = Model.attribute('updatedAt', Model.transformDate);\n\n  categories = Model.hasMany<Category>('categories');\n\n  categoryCount = Model.attribute<number>('categoryCount');\n  nomineeCount = Model.attribute<number>('nomineeCount');\n  voteCount = Model.attribute<number>('voteCount');\n\n  canViewResults = Model.attribute<boolean>('canViewResults');\n\n  isDraft(): boolean {\n    return this.status() === 'draft';\n  }\n\n  isActive(): boolean {\n    return this.status() === 'active';\n  }\n\n  hasEnded(): boolean {\n    return this.status() === 'ended';\n  }\n\n  isPublished(): boolean {\n    return this.status() === 'published';\n  }\n\n  isVotingOpen(): boolean {\n    const now = new Date();\n    const startsAt = this.startsAt();\n    const endsAt = this.endsAt();\n    return this.isActive() && startsAt && endsAt && now >= startsAt && now <= endsAt;\n  }\n\n  canShowVotes(): boolean {\n    return this.isPublished() || (this.isActive() && this.showLiveVotes());\n  }\n\n  /**\n   * Check if award has effectively ended (status or date-based)\n   */\n  hasEffectivelyEnded(): boolean {\n    const status = this.effectiveStatus() || this.status();\n    return status === 'ended' || status === 'published';\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Award from './Award';\nimport Nominee from './Nominee';\nimport Vote from './Vote';\nimport OtherSuggestion from './OtherSuggestion';\n\nexport default class Category extends Model {\n  name = Model.attribute<string>('name');\n  slug = Model.attribute<string>('slug');\n  description = Model.attribute<string>('description');\n  sortOrder = Model.attribute<number>('sortOrder');\n  allowOther = Model.attribute<boolean>('allowOther');\n  createdAt = Model.attribute('createdAt', Model.transformDate);\n  updatedAt = Model.attribute('updatedAt', Model.transformDate);\n\n  award = Model.hasOne<Award>('award');\n  nominees = Model.hasMany<Nominee>('nominees');\n  votes = Model.hasMany<Vote>('votes');\n  otherSuggestions = Model.hasMany<OtherSuggestion>('otherSuggestions');\n\n  nomineeCount = Model.attribute<number>('nomineeCount');\n  voteCount = Model.attribute<number>('voteCount');\n  userVoteIds = Model.attribute<number[]>('userVoteIds');\n  userPendingSuggestionsCount = Model.attribute<number>('userPendingSuggestionsCount');\n\n  hasUserVoted(): boolean {\n    const ids = this.userVoteIds();\n    return ids && ids.length > 0;\n  }\n\n  getUserVotedNomineeIds(): number[] {\n    return this.userVoteIds() || [];\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Category from './Category';\n\nexport default class Nominee extends Model {\n  name = Model.attribute<string>('name');\n  description = Model.attribute<string>('description');\n  slug = Model.attribute<string>('slug');\n  imageUrl = Model.attribute<string>('imageUrl');\n  metadata = Model.attribute<Record<string, any>>('metadata');\n  sortOrder = Model.attribute<number>('sortOrder');\n  createdAt = Model.attribute('createdAt', Model.transformDate);\n  updatedAt = Model.attribute('updatedAt', Model.transformDate);\n\n  category = Model.hasOne<Category>('category');\n\n  voteCount = Model.attribute<number>('voteCount');\n  votePercentage = Model.attribute<number>('votePercentage');\n  realVoteCount = Model.attribute<number>('realVoteCount');\n  voteAdjustment = Model.attribute<number>('voteAdjustment');\n  rank = Model.attribute<number>('rank');\n  isWinner = Model.attribute<boolean>('isWinner');\n  isRunnerUp = Model.attribute<boolean>('isRunnerUp');\n  isThirdPlace = Model.attribute<boolean>('isThirdPlace');\n}\n","import Model from 'flarum/common/Model';\nimport Nominee from './Nominee';\nimport Category from './Category';\n\nexport default class Vote extends Model {\n  createdAt = Model.attribute('createdAt', Model.transformDate);\n\n  // Direct attribute access for IDs (for when relationships aren't loaded)\n  nomineeId = Model.attribute<number>('nomineeId');\n  categoryId = Model.attribute<number>('categoryId');\n\n  // Relationship accessors\n  nominee = Model.hasOne<Nominee>('nominee');\n  category = Model.hasOne<Category>('category');\n  user = Model.hasOne('user');\n}\n","import Model from 'flarum/common/Model';\nimport Category from './Category';\nimport Nominee from './Nominee';\n\nexport default class OtherSuggestion extends Model {\n  name = Model.attribute<string>('name');\n  status = Model.attribute<string>('status');\n  createdAt = Model.attribute('createdAt', Model.transformDate);\n  updatedAt = Model.attribute('updatedAt', Model.transformDate);\n\n  category = Model.hasOne<Category>('category');\n  user = Model.hasOne('user');\n  mergedToNominee = Model.hasOne<Nominee>('mergedToNominee');\n\n  isPending(): boolean {\n    return this.status() === 'pending';\n  }\n\n  isApproved(): boolean {\n    return this.status() === 'approved';\n  }\n\n  isRejected(): boolean {\n    return this.status() === 'rejected';\n  }\n\n  isMerged(): boolean {\n    return this.status() === 'merged';\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport Award from './models/Award';\nimport Category from './models/Category';\nimport Nominee from './models/Nominee';\nimport Vote from './models/Vote';\nimport OtherSuggestion from './models/OtherSuggestion';\n\nexport default [\n  new Extend.Store()\n    .add('awards', Award)\n    .add('award-categories', Category)\n    .add('award-nominees', Nominee)\n    .add('award-votes', Vote)\n    .add('award-other-suggestions', OtherSuggestion),\n];\n","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Nominee from '../../common/models/Nominee';\nimport Category from '../../common/models/Category';\nimport Award from '../../common/models/Award';\nimport Vote from '../../common/models/Vote';\n\nexport default class NomineeCard extends Component {\n  loading = false;\n\n  view() {\n    const nominee = this.attrs.nominee as Nominee;\n    const category = this.attrs.category as Category;\n    const award = this.attrs.award as Award;\n\n    const userVotes = app.store.all<Vote>('award-votes');\n    const nomineeId = nominee.id();\n    const categoryId = category.id();\n\n    const userVote = userVotes.find((v) => {\n      const vNomineeId = v.nomineeId?.() || v.data?.relationships?.nominee?.data?.id;\n      const vCategoryId = v.categoryId?.() || v.data?.relationships?.category?.data?.id;\n      return String(vNomineeId) === String(nomineeId) && String(vCategoryId) === String(categoryId);\n    });\n\n    const isVoted = !!userVote;\n    const canVote = award.isVotingOpen() && app.session.user;\n    const showVotes = award.canShowVotes();\n\n    // Tklanabilir mi kontrol\n    const isClickable = canVote && !this.loading;\n\n    return (\n      <div\n        className={`NomineeCard ${isVoted ? 'NomineeCard--voted' : ''} ${isClickable ? 'NomineeCard--clickable' : ''} ${this.loading ? 'NomineeCard--loading' : ''}`}\n        onclick={isClickable ? () => this.toggleVote(nominee, category, userVote) : undefined}\n        role={isClickable ? 'button' : undefined}\n        tabindex={isClickable ? 0 : undefined}\n        onkeydown={\n          isClickable\n            ? (e: KeyboardEvent) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  e.preventDefault();\n                  this.toggleVote(nominee, category, userVote);\n                }\n              }\n            : undefined\n        }\n      >\n        <div className=\"NomineeCard-image\">\n          {nominee.imageUrl() ? (\n            <img src={nominee.imageUrl()} alt={nominee.name()} loading=\"lazy\" />\n          ) : (\n            <div className=\"NomineeCard-placeholder\">\n              <i className=\"fas fa-user\" />\n            </div>\n          )}\n          {isVoted ? (\n            <div className=\"NomineeCard-check\">\n              <i className=\"fas fa-check\" />\n            </div>\n          ) : null}\n        </div>\n\n        <div className=\"NomineeCard-content\">\n          <h3 className=\"NomineeCard-title\">{nominee.name()}</h3>\n\n          {nominee.description() ? <p className=\"NomineeCard-description\">{nominee.description()}</p> : null}\n\n          {showVotes ? (\n            <div className=\"NomineeCard-stats\">\n              <span className=\"NomineeCard-votes\">\n                {app.translator.trans('huseyinfiliz-awards.forum.results.votes', { count: nominee.voteCount() || 0 })}\n              </span>\n            </div>\n          ) : null}\n\n          {this.loading ? (\n            <div className=\"NomineeCard-loading\">\n              <i className=\"fas fa-spinner fa-spin\" />\n            </div>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n\n  updateCategoryUserVoteIds(category: Category) {\n    // Update the category's userVoteIds based on current votes in store\n    const categoryId = category.id();\n    const userVotesInCategory = app.store.all<Vote>('award-votes').filter((v) => {\n      const vCategoryId = v.categoryId?.() || v.data?.relationships?.category?.data?.id;\n      return String(vCategoryId) === String(categoryId);\n    });\n\n    const userVoteIds = userVotesInCategory\n      .map((v) => {\n        return v.nomineeId?.() || v.data?.relationships?.nominee?.data?.id;\n      })\n      .filter(Boolean);\n\n    category.pushData({\n      attributes: {\n        userVoteIds: userVoteIds,\n      },\n    });\n  }\n\n  toggleVote(nominee: Nominee, category: Category, userVote?: Vote) {\n    if (!app.session.user) {\n      return;\n    }\n\n    const categoryId = category.id();\n    const votesLimit = parseInt(app.forum.attribute('awardsVotesPerCategory') || '1', 10);\n\n    // If user already voted for this nominee, remove the vote\n    if (userVote) {\n      this.loading = true;\n      m.redraw();\n\n      userVote\n        .delete()\n        .then(() => {\n          // Decrement vote count for the nominee\n          const currentVoteCount = nominee.voteCount?.() || 0;\n          if (currentVoteCount > 0) {\n            nominee.pushData({ attributes: { voteCount: currentVoteCount - 1 } });\n          }\n\n          // Update category's userVoteIds\n          this.updateCategoryUserVoteIds(category);\n\n          app.alerts.show({ type: 'success' }, app.translator.trans('huseyinfiliz-awards.forum.voting.vote_removed'));\n          this.loading = false;\n          m.redraw();\n        })\n        .catch((e: any) => {\n          this.loading = false;\n          m.redraw();\n          throw e;\n        });\n      return;\n    }\n\n    // Adding a new vote - check limits for multi-vote mode\n    const existingVotesInCategory = app.store.all<Vote>('award-votes').filter((v) => {\n      const vCategoryId = v.categoryId?.() || v.data?.relationships?.category?.data?.id;\n      return String(vCategoryId) === String(categoryId);\n    });\n\n    // Check if at limit (votesLimit > 0 means there's a limit, 0 = unlimited)\n    if (votesLimit > 0 && existingVotesInCategory.length >= votesLimit && votesLimit !== 1) {\n      app.alerts.show({ type: 'error' }, app.translator.trans('huseyinfiliz-awards.forum.error.vote_limit_reached', { limit: votesLimit }));\n      return;\n    }\n\n    this.loading = true;\n    m.redraw();\n\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/award-votes',\n        body: {\n          data: {\n            attributes: {\n              nomineeId: nominee.id(),\n            },\n          },\n        },\n      })\n      .then((response: any) => {\n        // Only remove existing votes in single-vote mode (votesLimit === 1)\n        if (votesLimit === 1) {\n          existingVotesInCategory.forEach((v) => {\n            const prevNomineeId = v.nomineeId?.() || v.data?.relationships?.nominee?.data?.id;\n            if (prevNomineeId && String(prevNomineeId) !== String(nominee.id())) {\n              const prevNominee = app.store.getById('award-nominees', String(prevNomineeId));\n              if (prevNominee) {\n                const currentCount = (prevNominee as any).voteCount?.() || 0;\n                if (currentCount > 0) {\n                  (prevNominee as any).pushData({ attributes: { voteCount: currentCount - 1 } });\n                }\n              }\n            }\n            app.store.remove(v);\n          });\n        }\n\n        // Increment vote count for newly voted nominee\n        const currentVoteCount = nominee.voteCount?.() || 0;\n        nominee.pushData({ attributes: { voteCount: currentVoteCount + 1 } });\n\n        app.store.pushPayload(response);\n\n        // Update category's userVoteIds\n        this.updateCategoryUserVoteIds(category);\n\n        app.alerts.show({ type: 'success' }, app.translator.trans('huseyinfiliz-awards.forum.voting.vote_saved'));\n        this.loading = false;\n        m.redraw();\n      })\n      .catch((e: any) => {\n        this.loading = false;\n        m.redraw();\n        throw e;\n      });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport Alert from 'flarum/common/components/Alert';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Category from '../../common/models/Category';\nimport OtherSuggestion from '../../common/models/OtherSuggestion';\n\nexport default class SuggestionModal extends Modal {\n  category!: Category;\n  name!: Stream<string>;\n  suggestions: OtherSuggestion[] = [];\n  loadingSuggestions: boolean = true;\n  cancellingId: string | null = null;\n\n  oninit(vnode: any) {\n    super.oninit(vnode);\n\n    this.category = this.attrs.category;\n    this.name = Stream('');\n    this.loadSuggestions();\n  }\n\n  className() {\n    return 'HFAwardsModal HFAwardsSuggestionModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('huseyinfiliz-awards.forum.other.suggest');\n  }\n\n  async loadSuggestions() {\n    this.loadingSuggestions = true;\n    m.redraw();\n\n    try {\n      const response = await app.request<any>({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + '/award-other-suggestions/mine',\n        params: { 'filter[category]': this.category.id() },\n      });\n\n      this.suggestions = (response.data || []).map((item: any) => {\n        return app.store.pushObject(item);\n      });\n    } catch (error) {\n      console.error('Failed to load suggestions:', error);\n      this.suggestions = [];\n    }\n\n    this.loadingSuggestions = false;\n    m.redraw();\n  }\n\n  getRemainingSlots(): number {\n    const userVoteCount = (this.category.userVoteIds() || []).length;\n    const votesPerCategory = parseInt(app.forum.attribute('awardsVotesPerCategory') || '1', 10);\n\n    if (votesPerCategory === 0) return Infinity;\n\n    // Use the locally loaded suggestions list for accurate pending count\n    const pendingCount = this.suggestions.filter((s) => s.isPending()).length;\n\n    return Math.max(0, votesPerCategory - userVoteCount - pendingCount);\n  }\n\n  updateCategoryPendingCount() {\n    // Update the category model in the store with the new pending count\n    const pendingCount = this.suggestions.filter((s) => s.isPending()).length;\n\n    // Update the category's data in the store\n    this.category.pushData({\n      attributes: {\n        userPendingSuggestionsCount: pendingCount,\n      },\n    });\n  }\n\n  content() {\n    // Show loading state while suggestions are being fetched\n    if (this.loadingSuggestions) {\n      return (\n        <div className=\"Modal-body\">\n          <LoadingIndicator />\n        </div>\n      );\n    }\n\n    const remainingSlots = this.getRemainingSlots();\n    const isUnlimited = parseInt(app.forum.attribute('awardsVotesPerCategory') || '1', 10) === 0;\n    const canSubmit = isUnlimited || remainingSlots > 0;\n\n    return (\n      <div className=\"Modal-body\">\n        {/* Submission Form */}\n        {canSubmit ? (\n          <div className=\"SuggestionModal-form\">\n            <div className=\"Form-group\">\n              <label>{app.translator.trans('huseyinfiliz-awards.forum.other.placeholder')}</label>\n              <input className=\"FormControl\" bidi={this.name} required />\n            </div>\n            <div className=\"Form-group\">\n              <Button className=\"Button Button--primary\" type=\"submit\" loading={this.loading} disabled={!this.name()}>\n                {app.translator.trans('huseyinfiliz-awards.forum.other.submit')}\n              </Button>\n              {!isUnlimited && (\n                <span className=\"SuggestionModal-remaining\">\n                  {app.translator.trans('huseyinfiliz-awards.forum.other.remaining', { count: remainingSlots })}\n                </span>\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className=\"Form-group\">\n            <Alert type=\"warning\" dismissible={false}>\n              {app.translator.trans('huseyinfiliz-awards.forum.other.no_remaining')}\n            </Alert>\n          </div>\n        )}\n\n        {/* User's Suggestions List */}\n        <div className=\"SuggestionModal-list\">\n          <h4 className=\"SuggestionModal-listTitle\">{app.translator.trans('huseyinfiliz-awards.forum.other.my_suggestions')}</h4>\n\n          {this.suggestions.length === 0 ? (\n            <p className=\"SuggestionModal-empty\">{app.translator.trans('huseyinfiliz-awards.forum.other.no_suggestions')}</p>\n          ) : (\n            <ul className=\"SuggestionModal-suggestions\">{this.suggestions.map((suggestion) => this.renderSuggestionItem(suggestion))}</ul>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  renderSuggestionItem(suggestion: OtherSuggestion) {\n    const status = suggestion.status();\n    const statusLabels: Record<string, string> = {\n      pending: app.translator.trans('huseyinfiliz-awards.forum.other.status_pending') as string,\n      approved: app.translator.trans('huseyinfiliz-awards.forum.other.status_approved') as string,\n      rejected: app.translator.trans('huseyinfiliz-awards.forum.other.status_rejected') as string,\n      merged: app.translator.trans('huseyinfiliz-awards.forum.other.status_merged') as string,\n    };\n\n    return (\n      <li className=\"SuggestionModal-item\" key={suggestion.id()}>\n        <span className=\"SuggestionModal-itemName\">{suggestion.name()}</span>\n        <span className={`SuggestionModal-itemStatus SuggestionModal-itemStatus--${status}`}>{statusLabels[status] || status}</span>\n        {suggestion.isPending() && (\n          <Button\n            className=\"Button Button--icon Button--link SuggestionModal-itemCancel\"\n            icon=\"fas fa-times\"\n            onclick={() => this.cancelSuggestion(suggestion)}\n            loading={this.cancellingId === suggestion.id()}\n            title={app.translator.trans('huseyinfiliz-awards.forum.other.cancel') as string}\n          />\n        )}\n      </li>\n    );\n  }\n\n  async cancelSuggestion(suggestion: OtherSuggestion) {\n    if (!confirm(app.translator.trans('huseyinfiliz-awards.forum.other.cancel_confirm') as string)) {\n      return;\n    }\n\n    this.cancellingId = suggestion.id() as string;\n    m.redraw();\n\n    try {\n      await app.request({\n        method: 'DELETE',\n        url: app.forum.attribute('apiUrl') + '/award-other-suggestions/' + suggestion.id(),\n      });\n\n      // Remove from local list\n      this.suggestions = this.suggestions.filter((s) => s.id() !== suggestion.id());\n\n      // Update the category model in the store so OtherCard reflects the change\n      this.updateCategoryPendingCount();\n    } catch (error) {\n      console.error('Failed to cancel suggestion:', error);\n    }\n\n    this.cancellingId = null;\n    m.redraw();\n  }\n\n  onsubmit(e: any) {\n    e.preventDefault();\n    this.loading = true;\n\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/award-other-suggestions',\n        body: {\n          data: {\n            attributes: {\n              categoryId: this.category.id(),\n              name: this.name(),\n            },\n          },\n        },\n        errorHandler: this.onerror.bind(this),\n      })\n      .then((response: any) => {\n        // Add to local list\n        const newSuggestion = app.store.pushObject(response.data);\n        this.suggestions.unshift(newSuggestion);\n        this.name('');\n        this.loading = false;\n\n        // Update the category model in the store\n        this.updateCategoryPendingCount();\n\n        m.redraw();\n      })\n      .catch(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Category from '../../common/models/Category';\nimport SuggestionModal from './SuggestionModal';\n\nexport default class OtherCard extends Component {\n  openModal(category: Category) {\n    app.modal.show(SuggestionModal, { category });\n  }\n\n  view() {\n    const category = this.attrs.category as Category;\n    const userPendingCount = category.userPendingSuggestionsCount() || 0;\n    const userVoteCount = (category.userVoteIds() || []).length;\n    const votesPerCategory = parseInt(app.forum.attribute('awardsVotesPerCategory') || '1', 10);\n    const isUnlimited = votesPerCategory === 0;\n    const remainingSlots = isUnlimited ? Infinity : votesPerCategory - userVoteCount - userPendingCount;\n    const hasNoRemaining = !isUnlimited && remainingSlots <= 0;\n\n    return (\n      <div\n        className={`NomineeCard NomineeCard--other NomineeCard--clickable ${hasNoRemaining ? 'NomineeCard--exhausted' : ''}`}\n        onclick={() => this.openModal(category)}\n        role=\"button\"\n        tabindex={0}\n        onkeydown={(e: KeyboardEvent) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            this.openModal(category);\n          }\n        }}\n      >\n        <div className=\"NomineeCard-image\">\n          <div className=\"NomineeCard-placeholder\">\n            <i className={hasNoRemaining ? 'fas fa-list' : 'fas fa-plus'} />\n          </div>\n        </div>\n\n        <div className=\"NomineeCard-content\">\n          <h3 className=\"NomineeCard-title\">{app.translator.trans('huseyinfiliz-awards.forum.other.suggest')}</h3>\n          <p className=\"NomineeCard-description\">\n            {userPendingCount > 0\n              ? app.translator.trans('huseyinfiliz-awards.forum.other.pending_count', { count: userPendingCount })\n              : hasNoRemaining\n                ? app.translator.trans('huseyinfiliz-awards.forum.other.no_remaining')\n                : isUnlimited\n                  ? app.translator.trans('huseyinfiliz-awards.forum.other.click_to_suggest')\n                  : app.translator.trans('huseyinfiliz-awards.forum.other.remaining', { count: remainingSlots })}\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Category from '../../common/models/Category';\nimport Award from '../../common/models/Award';\nimport Vote from '../../common/models/Vote';\nimport NomineeCard from './NomineeCard';\nimport OtherCard from './OtherCard';\n\nexport default class CategoryCard extends Component {\n  view() {\n    const category = this.attrs.category as Category;\n    const award = this.attrs.award as Award;\n    const nominees = category.nominees() || [];\n    const nomineeCount = nominees.length;\n\n    // Calculate user's votes in this category\n    const categoryId = category.id();\n    const userVotes = app.store.all<Vote>('award-votes');\n    const votesInCategory = userVotes.filter((v) => {\n      const vCategoryId = v.categoryId?.() || v.data?.relationships?.category?.data?.id;\n      return String(vCategoryId) === String(categoryId);\n    });\n    const userVoteCount = votesInCategory.length;\n    const votesLimit = parseInt(app.forum.attribute('awardsVotesPerCategory') || '1', 10);\n    const isVotingOpen = award.isVotingOpen();\n    const showVoteBadge = isVotingOpen && app.session.user && userVoteCount > 0;\n\n    return (\n      <div className=\"CategoryCard\" id={`category-${category.id()}`}>\n        <div className=\"CategoryCard-header\">\n          <div className=\"CategoryCard-headerMain\">\n            <h2>{category.name()}</h2>\n            {category.description() ? <p>{category.description()}</p> : null}\n          </div>\n          <div className=\"CategoryCard-badges\">\n            {showVoteBadge ? (\n              <div className=\"CategoryCard-voteBadge\">\n                <i className=\"fas fa-check\" />\n                {votesLimit === 0\n                  ? app.translator.trans('huseyinfiliz-awards.forum.category.votes_unlimited', {\n                      count: userVoteCount,\n                    })\n                  : app.translator.trans('huseyinfiliz-awards.forum.category.votes_used', {\n                      used: userVoteCount,\n                      limit: votesLimit,\n                    })}\n              </div>\n            ) : null}\n            {nomineeCount > 0 ? (\n              <div className=\"CategoryCard-badge\">\n                {app.translator.trans('huseyinfiliz-awards.forum.category.nominees_count', { count: nomineeCount })}\n              </div>\n            ) : null}\n          </div>\n        </div>\n\n        <div className=\"CategoryCard-grid\">\n          {nominees.map((nominee) => (\n            <NomineeCard nominee={nominee} category={category} award={award} />\n          ))}\n\n          {category.allowOther() && award.isVotingOpen() && app.session.user ? <OtherCard category={category} /> : null}\n        </div>\n\n        {nominees.length === 0 && !category.allowOther() ? (\n          <div className=\"EmptyState\">\n            <p>{app.translator.trans('huseyinfiliz-awards.forum.empty.no_nominees')}</p>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\n\nexport default class VotingProgressBar extends Component {\n  currentCategoryIndex: number = 0;\n  showConfetti: boolean = false;\n  confettiShown: boolean = false;\n\n  oninit(vnode: any) {\n    super.oninit(vnode);\n    this.checkCompletion();\n  }\n\n  onupdate(vnode: any) {\n    super.onupdate(vnode);\n    this.checkCompletion();\n  }\n\n  checkCompletion() {\n    const votedCount = this.attrs.votedCount as number;\n    const totalCount = this.attrs.totalCount as number;\n\n    if (votedCount === totalCount && totalCount > 0 && !this.confettiShown) {\n      this.showConfetti = true;\n      this.confettiShown = true;\n\n      // Hide confetti after animation\n      setTimeout(() => {\n        this.showConfetti = false;\n        m.redraw();\n      }, 4000);\n    }\n  }\n\n  view() {\n    const votedCount = this.attrs.votedCount as number;\n    const totalCount = this.attrs.totalCount as number;\n    const categoryIds = this.attrs.categoryIds as string[];\n    const onNavigate = this.attrs.onNavigate as (categoryId: string) => void;\n    const selectedCategoryId = this.attrs.selectedCategoryId as string | null;\n    const onCategoryChange = this.attrs.onCategoryChange as ((categoryId: string | null) => void) | undefined;\n\n    const isComplete = votedCount === totalCount && totalCount > 0;\n    const progressPercent = totalCount > 0 ? (votedCount / totalCount) * 100 : 0;\n    const isFilterMode = !!selectedCategoryId && !!onCategoryChange;\n\n    return (\n      <div\n        className={`VotingProgressBar ${isComplete ? 'VotingProgressBar--complete' : ''} ${this.showConfetti ? 'VotingProgressBar--confetti' : ''}`}\n      >\n        {this.showConfetti ? this.renderConfetti() : null}\n\n        <div className=\"VotingProgressBar-content\">\n          <div className=\"VotingProgressBar-progress\">\n            <div className=\"VotingProgressBar-progressTrack\">\n              <div className=\"VotingProgressBar-progressFill\" style={{ width: `${progressPercent}%` }} />\n            </div>\n            <span className=\"VotingProgressBar-text\">\n              {isComplete\n                ? app.translator.trans('huseyinfiliz-awards.forum.progress.complete')\n                : app.translator.trans('huseyinfiliz-awards.forum.progress.voted', {\n                    count: votedCount,\n                    total: totalCount,\n                  })}\n            </span>\n          </div>\n\n          <div className=\"VotingProgressBar-nav\">\n            <Button\n              className=\"Button Button--icon\"\n              icon=\"fas fa-chevron-left\"\n              onclick={() => this.navigate(-1, categoryIds, onNavigate, selectedCategoryId, onCategoryChange)}\n              disabled={categoryIds.length === 0}\n              title={app.translator.trans('huseyinfiliz-awards.forum.progress.prev') as string}\n            >\n              {app.translator.trans('huseyinfiliz-awards.forum.progress.prev')}\n            </Button>\n            <Button\n              className=\"Button Button--icon\"\n              icon=\"fas fa-chevron-right\"\n              onclick={() => this.navigate(1, categoryIds, onNavigate, selectedCategoryId, onCategoryChange)}\n              disabled={categoryIds.length === 0}\n              title={app.translator.trans('huseyinfiliz-awards.forum.progress.next') as string}\n            >\n              {app.translator.trans('huseyinfiliz-awards.forum.progress.next')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  navigate(\n    direction: number,\n    categoryIds: string[],\n    onNavigate: (categoryId: string) => void,\n    selectedCategoryId?: string | null,\n    onCategoryChange?: (categoryId: string | null) => void\n  ) {\n    if (categoryIds.length === 0) return;\n\n    // Filter navigation mode: navigate between category filters\n    if (selectedCategoryId && onCategoryChange) {\n      const currentIndex = categoryIds.indexOf(selectedCategoryId);\n      if (currentIndex === -1) return;\n\n      let newIndex = currentIndex + direction;\n      if (newIndex < 0) newIndex = categoryIds.length - 1;\n      if (newIndex >= categoryIds.length) newIndex = 0;\n\n      onCategoryChange(categoryIds[newIndex]);\n      return;\n    }\n\n    // Scroll mode: scroll between categories on the page\n    let visibleCategoryId: string | null = null;\n    for (const id of categoryIds) {\n      const element = document.getElementById(`category-${id}`);\n      if (element) {\n        const rect = element.getBoundingClientRect();\n        if (rect.top >= 0 && rect.top < window.innerHeight / 2) {\n          visibleCategoryId = id;\n          break;\n        }\n      }\n    }\n\n    let currentIndex = visibleCategoryId ? categoryIds.indexOf(visibleCategoryId) : 0;\n    if (currentIndex === -1) currentIndex = 0;\n\n    let newIndex = currentIndex + direction;\n    if (newIndex < 0) newIndex = categoryIds.length - 1;\n    if (newIndex >= categoryIds.length) newIndex = 0;\n\n    onNavigate(categoryIds[newIndex]);\n  }\n\n  renderConfetti() {\n    const colors = ['#ffd700', '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dfe6e9'];\n    const pieces: any[] = [];\n\n    for (let i = 0; i < 30; i++) {\n      const color = colors[Math.floor(Math.random() * colors.length)];\n      const left = Math.random() * 100;\n      const delay = Math.random() * 0.5;\n      const size = 6 + Math.random() * 6;\n      const rotation = Math.random() * 360;\n\n      pieces.push(\n        <div\n          key={i}\n          className=\"VotingProgressBar-confettiPiece\"\n          style={{\n            left: `${left}%`,\n            animationDelay: `${delay}s`,\n            backgroundColor: color,\n            width: `${size}px`,\n            height: `${size}px`,\n            transform: `rotate(${rotation}deg)`,\n          }}\n        />\n      );\n    }\n\n    return <div className=\"VotingProgressBar-confettiContainer\">{pieces}</div>;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Award from '../../common/models/Award';\nimport Category from '../../common/models/Category';\nimport Vote from '../../common/models/Vote';\nimport CategoryCard from './CategoryCard';\nimport VotingProgressBar from './VotingProgressBar';\n\nexport default class VotingView extends Component {\n  getVotedCategoryIds(categories: Category[]): string[] {\n    const userVotes = app.store.all<Vote>('award-votes');\n    const votedCategoryIds: string[] = [];\n\n    categories.forEach((category) => {\n      const categoryId = category.id();\n      const hasVote = userVotes.some((v) => {\n        const vCategoryId = v.categoryId?.() || v.data?.relationships?.category?.data?.id;\n        return String(vCategoryId) === String(categoryId);\n      });\n      if (hasVote) {\n        votedCategoryIds.push(String(categoryId));\n      }\n    });\n\n    return votedCategoryIds;\n  }\n\n  view() {\n    const award = this.attrs.award as Award;\n    const selectedCategoryId = this.attrs.selectedCategoryId as string | null;\n    const onCategoryChange = this.attrs.onCategoryChange as ((categoryId: string | null) => void) | undefined;\n    const allCategories = (award.categories() || []) as Category[];\n\n    // Filter categories if a specific category is selected\n    const categories = selectedCategoryId ? allCategories.filter((cat) => String(cat.id()) === selectedCategoryId) : allCategories;\n\n    // Calculate voting progress\n    const votedCategoryIds = this.getVotedCategoryIds(allCategories);\n    const totalCategories = allCategories.length;\n    const votedCount = votedCategoryIds.length;\n\n    // Get ordered category IDs for navigation\n    const categoryIds = allCategories.map((cat) => String(cat.id()));\n\n    return (\n      <div className=\"VotingView\">\n        <div className=\"VotingView-content\">\n          {categories.length === 0 ? (\n            <div className=\"EmptyState\">\n              <p>{app.translator.trans('huseyinfiliz-awards.forum.empty.no_categories')}</p>\n            </div>\n          ) : (\n            categories.map((category) => <CategoryCard category={category} award={award} />)\n          )}\n        </div>\n\n        {award.isVotingOpen() && app.session.user ? (\n          <VotingProgressBar\n            votedCount={votedCount}\n            totalCount={totalCategories}\n            categoryIds={categoryIds}\n            selectedCategoryId={selectedCategoryId}\n            onCategoryChange={onCategoryChange}\n            onNavigate={(categoryId: string) => {\n              const element = document.getElementById(`category-${categoryId}`);\n              if (element) {\n                element.scrollIntoView({ behavior: 'smooth', block: 'start' });\n              }\n            }}\n          />\n        ) : null}\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Category from '../../common/models/Category';\nimport Nominee from '../../common/models/Nominee';\nimport Award from '../../common/models/Award';\n\nexport default class CategoryResultsModal extends Modal {\n  className() {\n    return 'HFAwardsModal CategoryResultsModal';\n  }\n\n  title() {\n    const category = this.attrs.category as Category;\n    return (\n      <span>\n        {category.name()} - {app.translator.trans('huseyinfiliz-awards.forum.results.full_results')}\n      </span>\n    );\n  }\n\n  content() {\n    const category = this.attrs.category as Category;\n    const award = this.attrs.award as Award;\n    const nominees = (category.nominees() || []) as Nominee[];\n\n    // Sort by vote count descending\n    const sortedNominees = [...nominees].sort((a, b) => (b.voteCount() || 0) - (a.voteCount() || 0));\n\n    // Calculate total votes for percentages\n    const totalVotes = sortedNominees.reduce((sum, n) => sum + (n.voteCount() || 0), 0);\n\n    const canShowVotes = award.canShowVotes();\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"CategoryResultsModal-list\">\n          {sortedNominees.map((nominee, index) => {\n            const voteCount = nominee.voteCount() || 0;\n            const percentage = totalVotes > 0 ? Math.round((voteCount / totalVotes) * 100) : 0;\n            const isWinner = index === 0;\n            const isRunnerUp = index === 1;\n            const isThird = index === 2;\n\n            return (\n              <div className={`CategoryResultsModal-item ${isWinner ? 'CategoryResultsModal-item--winner' : ''}`} key={nominee.id()}>\n                <div className=\"CategoryResultsModal-item-rank\">\n                  {isWinner ? (\n                    <span className=\"CategoryResultsModal-medal CategoryResultsModal-medal--gold\">\n                      <i className=\"fas fa-medal\" />\n                    </span>\n                  ) : isRunnerUp ? (\n                    <span className=\"CategoryResultsModal-medal CategoryResultsModal-medal--silver\">\n                      <i className=\"fas fa-medal\" />\n                    </span>\n                  ) : isThird ? (\n                    <span className=\"CategoryResultsModal-medal CategoryResultsModal-medal--bronze\">\n                      <i className=\"fas fa-medal\" />\n                    </span>\n                  ) : (\n                    <span className=\"CategoryResultsModal-rankNumber\">{index + 1}</span>\n                  )}\n                </div>\n\n                <div className=\"CategoryResultsModal-item-nominee\">\n                  {nominee.imageUrl() ? (\n                    <img className=\"CategoryResultsModal-item-image\" src={nominee.imageUrl()} alt={nominee.name() as string} />\n                  ) : (\n                    <div className=\"CategoryResultsModal-item-placeholder\">\n                      <i className=\"fas fa-user\" />\n                    </div>\n                  )}\n                  <span className=\"CategoryResultsModal-item-name\">{nominee.name()}</span>\n                </div>\n\n                {canShowVotes ? (\n                  <div className=\"CategoryResultsModal-item-stats\">\n                    <span className=\"CategoryResultsModal-item-votes\">{voteCount}</span>\n                    <div className=\"CategoryResultsModal-item-bar\">\n                      <div className=\"CategoryResultsModal-item-barFill\" style={{ width: `${percentage}%` }} />\n                    </div>\n                    <span className=\"CategoryResultsModal-item-percentage\">{percentage}%</span>\n                  </div>\n                ) : null}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport Category from '../../common/models/Category';\nimport Award from '../../common/models/Award';\nimport CategoryResultsModal from './CategoryResultsModal';\n\nexport default class CategoryResultCard extends Component {\n  view() {\n    const category = this.attrs.category as Category;\n    const award = this.attrs.award as Award;\n    const allNominees = category.nominees() || [];\n    // Sort by vote count and show only top 3\n    const nominees = [...allNominees].sort((a, b) => (b.voteCount() || 0) - (a.voteCount() || 0)).slice(0, 3);\n\n    const canShowVotes = award.canShowVotes();\n    const hasMoreNominees = allNominees.length > 3;\n\n    return (\n      <div className=\"CategoryCard CategoryResultCard\" id={`category-${category.id()}`}>\n        <div className=\"CategoryCard-header\">\n          <div className=\"CategoryCard-headerMain\">\n            <h2>{category.name()}</h2>\n            {category.description() ? <p>{category.description()}</p> : null}\n          </div>\n          {hasMoreNominees ? (\n            <Button\n              className=\"Button Button--text CategoryResultCard-viewAll\"\n              onclick={() => {\n                app.modal.show(CategoryResultsModal, { category, award });\n              }}\n            >\n              {app.translator.trans('huseyinfiliz-awards.forum.results.view_all')}\n            </Button>\n          ) : null}\n        </div>\n\n        <div className=\"CategoryCard-grid\">\n          {nominees.map((nominee, index) => {\n            const isWinner = index === 0;\n            const isRunnerUp = index === 1;\n            const isThird = index === 2;\n\n            return (\n              <div className={`NomineeCard ${isWinner ? 'NomineeCard--winner' : ''}`} key={nominee.id()}>\n                <div className=\"NomineeCard-image\">\n                  {nominee.imageUrl() ? (\n                    <img src={nominee.imageUrl()} alt={nominee.name() as string} />\n                  ) : (\n                    <div className=\"NomineeCard-placeholder\">\n                      <i className=\"fas fa-user\" />\n                    </div>\n                  )}\n\n                  {isWinner ? (\n                    <div className=\"NomineeCard-badge NomineeCard-badge--gold\">\n                      <i className=\"fas fa-medal\" />\n                    </div>\n                  ) : null}\n                  {isRunnerUp ? (\n                    <div className=\"NomineeCard-badge NomineeCard-badge--silver\">\n                      <i className=\"fas fa-medal\" />\n                    </div>\n                  ) : null}\n                  {isThird ? (\n                    <div className=\"NomineeCard-badge NomineeCard-badge--bronze\">\n                      <i className=\"fas fa-medal\" />\n                    </div>\n                  ) : null}\n                </div>\n\n                <div className=\"NomineeCard-content\">\n                  <h3 className=\"NomineeCard-title\">{nominee.name()}</h3>\n\n                  {nominee.description() ? <p className=\"NomineeCard-description\">{nominee.description()}</p> : null}\n\n                  {isWinner ? (\n                    <div className=\"TagLabel Label--success\">{app.translator.trans('huseyinfiliz-awards.forum.results.winner')}</div>\n                  ) : null}\n                  {isRunnerUp ? (\n                    <div className=\"TagLabel Label--info\">{app.translator.trans('huseyinfiliz-awards.forum.results.runner_up')}</div>\n                  ) : null}\n\n                  {canShowVotes ? (\n                    <div className=\"NomineeCard-stats\">\n                      <span className=\"NomineeCard-votes\">\n                        {app.translator.trans('huseyinfiliz-awards.forum.results.votes', { count: nominee.voteCount() })}\n                      </span>\n                      <span className=\"NomineeCard-percentage\">\n                        {app.translator.trans('huseyinfiliz-awards.forum.results.percentage', { percent: nominee.votePercentage() })}\n                      </span>\n                    </div>\n                  ) : null}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Award from '../../common/models/Award';\nimport Category from '../../common/models/Category';\nimport Nominee from '../../common/models/Nominee';\nimport Vote from '../../common/models/Vote';\n\ninterface PredictionResult {\n  category: Category;\n  userVotedNominee: Nominee | null;\n  winner: Nominee | null;\n  isCorrect: boolean;\n}\n\nexport default class PredictionSummary extends Component {\n  showDetails: boolean = false;\n\n  getPredictionResults(award: Award, categories: Category[]): PredictionResult[] {\n    const userVotes = app.store.all<Vote>('award-votes');\n    const results: PredictionResult[] = [];\n\n    categories.forEach((category) => {\n      const categoryId = category.id();\n      const nominees = (category.nominees() || []) as Nominee[];\n\n      // Find user's vote for this category\n      const userVote = userVotes.find((v) => {\n        const vCategoryId = v.categoryId?.() || v.data?.relationships?.category?.data?.id;\n        return String(vCategoryId) === String(categoryId);\n      });\n\n      let userVotedNominee: Nominee | null = null;\n      if (userVote) {\n        const vNomineeId = userVote.nomineeId?.() || userVote.data?.relationships?.nominee?.data?.id;\n        userVotedNominee = nominees.find((n) => String(n.id()) === String(vNomineeId)) || null;\n      }\n\n      // Find winner (nominee with highest vote count)\n      const winner = nominees.length > 0 ? nominees.reduce((a, b) => ((b.voteCount() || 0) > (a.voteCount() || 0) ? b : a)) : null;\n\n      // Check if user predicted correctly\n      const isCorrect = userVotedNominee && winner && String(userVotedNominee.id()) === String(winner.id());\n\n      results.push({\n        category,\n        userVotedNominee,\n        winner,\n        isCorrect: !!isCorrect,\n      });\n    });\n\n    return results;\n  }\n\n  view() {\n    const award = this.attrs.award as Award;\n    const categories = this.attrs.categories as Category[];\n\n    const results = this.getPredictionResults(award, categories);\n    const votedResults = results.filter((r) => r.userVotedNominee !== null);\n\n    // Only show if user has voted in at least one category\n    if (votedResults.length === 0) {\n      return null;\n    }\n\n    const correctCount = votedResults.filter((r) => r.isCorrect).length;\n    const totalVoted = votedResults.length;\n    const progressPercent = totalVoted > 0 ? (correctCount / totalVoted) * 100 : 0;\n\n    const correctPredictions = votedResults.filter((r) => r.isCorrect);\n    const wrongPredictions = votedResults.filter((r) => !r.isCorrect);\n\n    return (\n      <div className=\"PredictionSummary\">\n        <div className=\"PredictionSummary-header\">\n          <i className=\"fas fa-bullseye\" />\n          <h3>{app.translator.trans('huseyinfiliz-awards.forum.prediction.title')}</h3>\n        </div>\n\n        <div className=\"PredictionSummary-content\">\n          <div className=\"PredictionSummary-progress\">\n            <div className=\"PredictionSummary-progressTrack\">\n              <div className=\"PredictionSummary-progressFill\" style={{ width: `${progressPercent}%` }} />\n            </div>\n            <span className=\"PredictionSummary-score\">\n              {app.translator.trans('huseyinfiliz-awards.forum.prediction.score', {\n                correct: correctCount,\n                total: totalVoted,\n              })}\n            </span>\n          </div>\n\n          <button\n            className=\"PredictionSummary-toggle\"\n            onclick={() => {\n              this.showDetails = !this.showDetails;\n              m.redraw();\n            }}\n          >\n            {this.showDetails ? (\n              <span>\n                <i className=\"fas fa-chevron-up\" /> Hide details\n              </span>\n            ) : (\n              <span>\n                <i className=\"fas fa-chevron-down\" /> Show details\n              </span>\n            )}\n          </button>\n\n          {this.showDetails ? (\n            <div className=\"PredictionSummary-details\">\n              {correctPredictions.length > 0 ? (\n                <div className=\"PredictionSummary-section PredictionSummary-section--correct\">\n                  <span className=\"PredictionSummary-section-label\">\n                    <i className=\"fas fa-check\" /> {app.translator.trans('huseyinfiliz-awards.forum.prediction.correct')}\n                  </span>\n                  <div className=\"PredictionSummary-categories\">\n                    {correctPredictions.map((r) => (\n                      <span key={r.category.id()} className=\"PredictionSummary-category\">\n                        {r.category.name()}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              ) : null}\n\n              {wrongPredictions.length > 0 ? (\n                <div className=\"PredictionSummary-section PredictionSummary-section--wrong\">\n                  <span className=\"PredictionSummary-section-label\">\n                    <i className=\"fas fa-times\" /> {app.translator.trans('huseyinfiliz-awards.forum.prediction.wrong')}\n                  </span>\n                  <div className=\"PredictionSummary-categories\">\n                    {wrongPredictions.map((r) => (\n                      <span key={r.category.id()} className=\"PredictionSummary-category\">\n                        {r.category.name()}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Award from '../../common/models/Award';\nimport Category from '../../common/models/Category';\nimport CategoryResultCard from './CategoryResultCard';\nimport PredictionSummary from './PredictionSummary';\n\nexport default class ResultsView extends Component {\n  view() {\n    const award = this.attrs.award as Award;\n    const selectedCategoryId = this.attrs.selectedCategoryId as string | null;\n    const allCategories = (award.categories() || []) as Category[];\n\n    // Filter categories if a specific category is selected\n    const categories = selectedCategoryId ? allCategories.filter((cat) => String(cat.id()) === selectedCategoryId) : allCategories;\n\n    // Check if this is an early preview (ended but not published)\n    const isEarlyPreview = award.hasEnded() && !award.isPublished();\n\n    return (\n      <div className=\"ResultsView\">\n        {/* Early preview alert */}\n        {isEarlyPreview ? (\n          <div className=\"Alert Alert--info AwardsPage-previewAlert\">\n            <i className=\"fas fa-eye\" /> {app.translator.trans('huseyinfiliz-awards.forum.preview.admin_only')}\n          </div>\n        ) : null}\n\n        {/* Prediction Summary - only shown when viewing all categories */}\n        {app.session.user && !selectedCategoryId ? <PredictionSummary award={award} categories={allCategories} /> : null}\n\n        <div className=\"ResultsView-content\">\n          {categories.length === 0 ? (\n            <div className=\"EmptyState\">\n              <p>{app.translator.trans('huseyinfiliz-awards.forum.empty.no_categories')}</p>\n            </div>\n          ) : (\n            categories.map((category) => <CategoryResultCard category={category} award={award} />)\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport Award from '../../common/models/Award';\nimport Category from '../../common/models/Category';\nimport Nominee from '../../common/models/Nominee';\nimport Vote from '../../common/models/Vote';\n\ninterface VoteEntry {\n  nominee: Nominee;\n  vote: Vote;\n}\n\ninterface CategoryVoteInfo {\n  category: Category;\n  votes: VoteEntry[];\n  votesLimit: number;\n  canAddMore: boolean;\n}\n\nexport default class MyVotesView extends Component {\n  expandUnvoted: boolean = true;\n  removingVotes: Set<string> = new Set();\n\n  getVotesInfo(award: Award): { votedCategories: CategoryVoteInfo[]; unvoted: Category[]; lastVoteTime: Date | null; totalVotes: number } {\n    const categories = (award.categories() || []) as Category[];\n    const userVotes = app.store.all<Vote>('award-votes');\n    const votesLimit = parseInt(app.forum.attribute('awardsVotesPerCategory') || '1', 10);\n\n    const votedCategories: CategoryVoteInfo[] = [];\n    const unvoted: Category[] = [];\n    let lastVoteTime: Date | null = null;\n    let totalVotes = 0;\n\n    categories.forEach((category) => {\n      const categoryId = category.id();\n      const nominees = (category.nominees() || []) as Nominee[];\n\n      // Find ALL votes for this category (multi-vote support)\n      const categoryVotes = userVotes.filter((v) => {\n        const vCategoryId = v.categoryId?.() || v.data?.relationships?.category?.data?.id;\n        return String(vCategoryId) === String(categoryId);\n      });\n\n      if (categoryVotes.length > 0) {\n        const voteEntries: VoteEntry[] = [];\n\n        categoryVotes.forEach((vote) => {\n          const vNomineeId = vote.nomineeId?.() || vote.data?.relationships?.nominee?.data?.id;\n          const nominee = nominees.find((n) => String(n.id()) === String(vNomineeId));\n\n          if (nominee) {\n            voteEntries.push({ nominee, vote });\n            totalVotes++;\n\n            // Track last vote time\n            const voteTime = vote.createdAt?.();\n            if (voteTime && (!lastVoteTime || voteTime > lastVoteTime)) {\n              lastVoteTime = voteTime;\n            }\n          }\n        });\n\n        if (voteEntries.length > 0) {\n          // Can add more if: unlimited (0) OR below limit\n          const canAddMore = votesLimit === 0 || voteEntries.length < votesLimit;\n          votedCategories.push({ category, votes: voteEntries, votesLimit, canAddMore });\n        }\n      } else {\n        unvoted.push(category);\n      }\n    });\n\n    return { votedCategories, unvoted, lastVoteTime, totalVotes };\n  }\n\n  removeVote(vote: Vote, nominee: Nominee) {\n    const voteId = String(vote.id());\n    if (this.removingVotes.has(voteId)) return;\n\n    this.removingVotes.add(voteId);\n    m.redraw();\n\n    vote\n      .delete()\n      .then(() => {\n        // Decrement vote count for the nominee\n        const currentVoteCount = nominee.voteCount?.() || 0;\n        if (currentVoteCount > 0) {\n          nominee.pushData({ attributes: { voteCount: currentVoteCount - 1 } });\n        }\n\n        app.alerts.show({ type: 'success' }, app.translator.trans('huseyinfiliz-awards.forum.voting.vote_removed'));\n        this.removingVotes.delete(voteId);\n        m.redraw();\n      })\n      .catch((e: any) => {\n        this.removingVotes.delete(voteId);\n        m.redraw();\n        throw e;\n      });\n  }\n\n  view() {\n    const award = this.attrs.award as Award;\n    const onNavigateToCategory = this.attrs.onNavigateToCategory as (categoryId: string) => void;\n    const categories = (award.categories() || []) as Category[];\n    const isVotingOpen = award.isVotingOpen();\n\n    const { votedCategories, unvoted, lastVoteTime, totalVotes } = this.getVotesInfo(award);\n    const totalCategories = categories.length;\n    const votedCategoryCount = votedCategories.length;\n\n    return (\n      <div className=\"MyVotesView\">\n        {/* Summary Card */}\n        <div className=\"MyVotesView-summary\">\n          <div className=\"MyVotesView-summary-content\">\n            <div className=\"MyVotesView-summary-stats\">\n              <span className=\"MyVotesView-summary-count\">\n                {app.translator.trans('huseyinfiliz-awards.forum.my_votes.summary', {\n                  voted: votedCategoryCount,\n                  total: totalCategories,\n                })}\n              </span>\n              <span className=\"MyVotesView-summary-totalVotes\">\n                {app.translator.trans('huseyinfiliz-awards.forum.my_votes.total_votes', {\n                  count: totalVotes,\n                })}\n              </span>\n              {lastVoteTime ? (\n                <span className=\"MyVotesView-summary-time\">\n                  {app.translator.trans('huseyinfiliz-awards.forum.my_votes.last_vote', {\n                    time: humanTime(lastVoteTime),\n                  })}\n                </span>\n              ) : null}\n            </div>\n            <div className=\"MyVotesView-summary-progress\">\n              <div\n                className=\"MyVotesView-summary-progressBar\"\n                style={{ width: `${totalCategories > 0 ? (votedCategoryCount / totalCategories) * 100 : 0}%` }}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Voted Categories */}\n        {votedCategories.length > 0 ? (\n          <div className=\"MyVotesView-section\">\n            <h3 className=\"MyVotesView-section-title\">{app.translator.trans('huseyinfiliz-awards.forum.my_votes.title')}</h3>\n            <div className=\"MyVotesView-list\">\n              {votedCategories.map(({ category, votes, votesLimit, canAddMore }) => (\n                <div className=\"MyVotesView-categoryGroup\" key={category.id()}>\n                  <div className=\"MyVotesView-categoryHeader\">\n                    <span className=\"MyVotesView-categoryName\">{category.name()}</span>\n                    <span className=\"MyVotesView-categoryVoteCount\">\n                      {votesLimit === 0\n                        ? app.translator.trans('huseyinfiliz-awards.forum.my_votes.votes_unlimited', {\n                            count: votes.length,\n                          })\n                        : app.translator.trans('huseyinfiliz-awards.forum.my_votes.votes_used', {\n                            used: votes.length,\n                            limit: votesLimit,\n                          })}\n                    </span>\n                  </div>\n                  {votes.map(({ nominee, vote }) => (\n                    <div className=\"MyVotesView-item\" key={vote.id()}>\n                      <div className=\"MyVotesView-item-nominee\">\n                        {nominee.imageUrl() ? (\n                          <img className=\"MyVotesView-item-image\" src={nominee.imageUrl()} alt={nominee.name() as string} />\n                        ) : (\n                          <div className=\"MyVotesView-item-placeholder\">\n                            <i className=\"fas fa-user\" />\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"MyVotesView-item-info\">\n                        <div className=\"MyVotesView-item-name\">{nominee.name()}</div>\n                      </div>\n                      <div className=\"MyVotesView-item-meta\">\n                        {vote.createdAt?.() ? <span className=\"MyVotesView-item-date\">{humanTime(vote.createdAt())}</span> : null}\n                      </div>\n                      <div className=\"MyVotesView-item-actions\">\n                        {isVotingOpen ? (\n                          <Button\n                            className=\"Button Button--text Button--danger\"\n                            onclick={() => this.removeVote(vote, nominee)}\n                            loading={this.removingVotes.has(String(vote.id()))}\n                          >\n                            {app.translator.trans('huseyinfiliz-awards.forum.my_votes.remove')}\n                          </Button>\n                        ) : null}\n                      </div>\n                    </div>\n                  ))}\n                  {/* Add more votes button if allowed */}\n                  {isVotingOpen && canAddMore ? (\n                    <div className=\"MyVotesView-addMore\">\n                      <Button className=\"Button Button--text\" icon=\"fas fa-plus\" onclick={() => onNavigateToCategory(String(category.id()))}>\n                        {app.translator.trans('huseyinfiliz-awards.forum.my_votes.add_vote')}\n                      </Button>\n                    </div>\n                  ) : null}\n                </div>\n              ))}\n            </div>\n          </div>\n        ) : (\n          <div className=\"MyVotesView-empty\">\n            <i className=\"fas fa-vote-yea\" />\n            <p>{app.translator.trans('huseyinfiliz-awards.forum.my_votes.no_votes')}</p>\n          </div>\n        )}\n\n        {/* Unvoted Categories */}\n        {unvoted.length > 0 ? (\n          <div className=\"MyVotesView-section MyVotesView-section--unvoted\">\n            <button\n              className=\"MyVotesView-section-header\"\n              onclick={() => {\n                this.expandUnvoted = !this.expandUnvoted;\n                m.redraw();\n              }}\n            >\n              <h3 className=\"MyVotesView-section-title\">\n                {app.translator.trans('huseyinfiliz-awards.forum.my_votes.categories_remaining')}\n                <span className=\"MyVotesView-section-count\">({unvoted.length})</span>\n              </h3>\n              <i className={`fas fa-chevron-${this.expandUnvoted ? 'up' : 'down'}`} />\n            </button>\n\n            {this.expandUnvoted ? (\n              <div className=\"MyVotesView-unvotedList\">\n                {unvoted.map((category) => (\n                  <div className=\"MyVotesView-unvotedItem\" key={category.id()}>\n                    <span className=\"MyVotesView-unvotedItem-name\">{category.name()}</span>\n                    <Button className=\"Button Button--primary Button--small\" onclick={() => onNavigateToCategory(String(category.id()))}>\n                      {app.translator.trans('huseyinfiliz-awards.forum.my_votes.vote_now')}\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            ) : null}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Select from 'flarum/common/components/Select';\nimport Button from 'flarum/common/components/Button';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport listItems from 'flarum/common/helpers/listItems';\nimport extractText from 'flarum/common/utils/extractText';\nimport Award from '../../common/models/Award';\nimport Category from '../../common/models/Category';\nimport Vote from '../../common/models/Vote';\nimport VotingView from './VotingView';\nimport ResultsView from './ResultsView';\nimport MyVotesView from './MyVotesView';\n\ntype ViewType = 'categories' | 'my_votes' | 'results';\n\nexport default class AwardsPage extends Page {\n  loading: boolean = true;\n  awards: Award[] = [];\n  selectedAward: Award | null = null;\n  selectedCategoryId: string | null = null; // null means \"All Categories\"\n  currentView: ViewType = 'categories';\n  countdownInterval: number | null = null;\n  countdownText: string = '';\n  refreshInterval: number | null = null;\n  routeAwardId: string | null = null;\n  routeCategoryId: string | null = null;\n\n  oninit(vnode: any) {\n    super.oninit(vnode);\n\n    // Parse route params (format: /awards/{id}-{slug} or /awards/{id}-{slug}/{category})\n    const idParam = m.route.param('id');\n    const categoryParam = m.route.param('category');\n\n    if (idParam) {\n      // Extract numeric ID from \"{id}-{slug}\" format\n      const match = idParam.match(/^(\\d+)/);\n      this.routeAwardId = match ? match[1] : null;\n    }\n\n    if (categoryParam) {\n      this.routeCategoryId = categoryParam;\n    }\n\n    this.loadAwards();\n  }\n\n  oncreate(vnode: any) {\n    super.oncreate(vnode);\n    const navTitle = app.forum.attribute('awardsNavTitle') || 'Awards';\n    app.setTitle(extractText(navTitle));\n    this.startCountdown();\n  }\n\n  onremove(vnode: any) {\n    super.onremove(vnode);\n    if (this.countdownInterval) {\n      clearInterval(this.countdownInterval);\n    }\n    this.stopAutoRefresh();\n  }\n\n  startCountdown() {\n    this.updateCountdown();\n    this.countdownInterval = window.setInterval(() => {\n      this.updateCountdown();\n      m.redraw();\n    }, 1000);\n  }\n\n  updateCountdown() {\n    if (!this.selectedAward) {\n      this.countdownText = '';\n      return;\n    }\n\n    const endsAt = this.selectedAward.endsAt();\n    if (!endsAt) {\n      this.countdownText = '';\n      return;\n    }\n\n    const now = new Date();\n    const diff = endsAt.getTime() - now.getTime();\n\n    if (diff <= 0) {\n      this.countdownText = app.translator.trans('huseyinfiliz-awards.forum.hero.voting_ended') as string;\n      return;\n    }\n\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n    const seconds = Math.floor((diff % (1000 * 60)) / 1000);\n\n    let timeStr = '';\n    if (days > 0) timeStr += `${days}d `;\n    if (hours > 0 || days > 0) timeStr += `${hours}h `;\n    if (minutes > 0 || hours > 0 || days > 0) timeStr += `${minutes}m `;\n    timeStr += `${seconds}s`;\n\n    this.countdownText = app.translator.trans('huseyinfiliz-awards.forum.hero.countdown', { time: timeStr }) as string;\n  }\n\n  async loadAwards() {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      const awards = await app.store.find<Award[]>('awards', {\n        include: 'categories,categories.nominees',\n      });\n\n      // Admins can see drafts (for preview), others only see active/ended/published\n      const canManage = app.forum.attribute('canManageAwards');\n      this.awards = (awards || []).filter((a) => {\n        if (canManage) return true; // Admins see all\n        return a.isActive() || a.isPublished() || a.hasEnded();\n      });\n\n      // If route has award ID, select that award; otherwise use default selection\n      if (this.routeAwardId) {\n        this.selectedAward = this.awards.find((a) => String(a.id()) === this.routeAwardId) || null;\n      }\n\n      // Fallback to default selection if route award not found\n      if (!this.selectedAward) {\n        this.selectedAward = this.awards.find((a) => a.isActive()) || this.awards.find((a) => a.isPublished()) || this.awards[0] || null;\n      }\n\n      // Set default view based on award status\n      if (this.selectedAward?.canViewResults()) {\n        this.currentView = 'results';\n      } else {\n        this.currentView = 'categories';\n      }\n\n      // If route has category ID, set the category filter\n      if (this.routeCategoryId && this.selectedAward) {\n        const categories = (this.selectedAward.categories?.() || []) as Category[];\n        const categoryExists = categories.some((c) => String(c.id()) === this.routeCategoryId);\n        if (categoryExists) {\n          this.selectedCategoryId = this.routeCategoryId;\n        }\n      }\n\n      if (app.session.user) {\n        await this.loadUserVotes();\n      }\n    } catch (error) {\n      console.error('Failed to load awards:', error);\n    }\n\n    this.loading = false;\n    this.startAutoRefresh();\n\n    // Update URL to reflect current selection (normalizes URL format)\n    this.updateUrl();\n\n    m.redraw();\n\n    // Scroll to category after DOM updates if category was specified in route\n    if (this.routeCategoryId && this.selectedCategoryId) {\n      setTimeout(() => this.scrollToCategory(this.routeCategoryId), 100);\n    }\n  }\n\n  startAutoRefresh() {\n    if (!this.selectedAward) return;\n\n    // Only refresh if voting is open and live votes are shown\n    if (this.selectedAward.isVotingOpen() && this.selectedAward.showLiveVotes()) {\n      this.stopAutoRefresh(); // Clear any existing interval\n      this.refreshInterval = window.setInterval(() => {\n        this.refreshVoteCounts();\n      }, 60000); // 60 seconds\n    }\n  }\n\n  stopAutoRefresh() {\n    if (this.refreshInterval) {\n      clearInterval(this.refreshInterval);\n      this.refreshInterval = null;\n    }\n  }\n\n  async refreshVoteCounts() {\n    if (!this.selectedAward) return;\n\n    try {\n      await app.store.find('awards', this.selectedAward.id(), {\n        include: 'categories,categories.nominees',\n      });\n      m.redraw();\n    } catch (error) {\n      console.error('Failed to refresh vote counts:', error);\n    }\n  }\n\n  async loadUserVotes() {\n    try {\n      await app.store.find<Vote[]>('award-votes');\n    } catch (error) {\n      console.error('Failed to load user votes:', error);\n    }\n  }\n\n  view() {\n    const navTitle = app.forum.attribute('awardsNavTitle') || 'Awards';\n    const navIcon = app.forum.attribute('awardsNavIcon') || 'fas fa-trophy';\n\n    return (\n      <div className=\"IndexPage huseyinfiliz-awards\">\n        {this.hero(navTitle, navIcon)}\n\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n            </nav>\n\n            <div className=\"IndexPage-results sideNavOffset\">{this.loading ? <LoadingIndicator /> : this.content()}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  hero(navTitle: string, navIcon: string) {\n    const imageUrl = this.selectedAward?.imageUrl?.();\n    const hasImage = imageUrl && imageUrl.length > 0;\n\n    return (\n      <header\n        className={`Hero AwardsHero ${hasImage ? 'AwardsHero--withImage' : ''}`}\n        style={hasImage ? { backgroundImage: `url(${imageUrl})` } : undefined}\n      >\n        {hasImage ? <div className=\"AwardsHero-overlay\" /> : null}\n        <div className=\"container\">\n          <div className=\"containerNarrow\">\n            <h1 className=\"Hero-title\">\n              <i className={`icon ${navIcon}`} /> {navTitle}\n            </h1>\n            {this.selectedAward ? <div className=\"Hero-subtitle\">{this.selectedAward.description()}</div> : null}\n            {this.selectedAward && this.selectedAward.isVotingOpen() && this.countdownText ? (\n              <div className=\"AwardsHero-countdown\">\n                <i className=\"fas fa-clock\" /> {this.countdownText}\n              </div>\n            ) : null}\n            {this.selectedAward && !this.selectedAward.isVotingOpen() && this.selectedAward.hasEnded() && !this.selectedAward.isPublished() ? (\n              <div className=\"AwardsHero-countdown AwardsHero-countdown--ended\">\n                {app.translator.trans('huseyinfiliz-awards.forum.hero.voting_ended')}\n              </div>\n            ) : null}\n            {this.selectedAward && this.selectedAward.isPublished() ? (\n              <div className=\"AwardsHero-countdown AwardsHero-countdown--published\">\n                {app.translator.trans('huseyinfiliz-awards.forum.hero.results_published')}\n              </div>\n            ) : null}\n            {this.selectedAward && this.selectedAward.isDraft() ? (\n              <div className=\"AwardsHero-countdown AwardsHero-countdown--draft\">\n                <i className=\"fas fa-eye\" /> {app.translator.trans('huseyinfiliz-awards.forum.hero.draft_preview')}\n              </div>\n            ) : null}\n            {this.selectedAward && this.selectedAward.hasEnded() && !this.selectedAward.isPublished() && this.selectedAward.canViewResults() ? (\n              <div className=\"AwardsHero-countdown AwardsHero-countdown--preview\">\n                <i className=\"fas fa-eye\" /> {app.translator.trans('huseyinfiliz-awards.forum.hero.results_preview')}\n              </div>\n            ) : null}\n          </div>\n        </div>\n      </header>\n    );\n  }\n\n  content() {\n    const navIcon = app.forum.attribute('awardsNavIcon') || 'fas fa-trophy';\n\n    if (this.awards.length === 0) {\n      return (\n        <div className=\"EmptyState\">\n          <i className={navIcon} />\n          <h2>{app.translator.trans('huseyinfiliz-awards.forum.empty.no_awards')}</h2>\n          <p>{app.translator.trans('huseyinfiliz-awards.forum.empty.no_awards_description')}</p>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"AwardsPage-content\">\n        {this.renderFilterBar()}\n        {this.renderAwardView()}\n      </div>\n    );\n  }\n\n  renderFilterBar() {\n    const categories = (this.selectedAward?.categories?.() || []) as Category[];\n    const showResultsTab = this.selectedAward?.isPublished();\n    const showMyVotesTab = app.session.user;\n\n    // Build category filter options with 'cat_' prefix to prevent numeric key sorting\n    // (JS objects sort integer-index keys first, so \"1\", \"2\" would come before \"all\")\n    const categoryOptions: Record<string, string> = {\n      all: app.translator.trans('huseyinfiliz-awards.forum.nav.all_categories') as string,\n    };\n    categories.forEach((cat) => {\n      categoryOptions[`cat_${cat.id()}`] = cat.name() as string;\n    });\n\n    return (\n      <div className=\"AwardsPage-filterBar\">\n        <div className=\"AwardsPage-filterBar-left\">\n          {/* Award selector (if multiple awards) */}\n          {this.awards.length > 1 ? this.renderAwardSelector() : null}\n\n          {/* Category filter dropdown */}\n          {categories.length > 0 && this.currentView !== 'my_votes' ? (\n            <div className=\"AwardsPage-categoryFilter\">\n              <Select\n                value={this.selectedCategoryId ? `cat_${this.selectedCategoryId}` : 'all'}\n                options={categoryOptions}\n                onchange={(value: string) => {\n                  this.selectedCategoryId = value === 'all' ? null : value.replace('cat_', '');\n                  this.updateUrl();\n                  m.redraw();\n                }}\n              />\n            </div>\n          ) : null}\n        </div>\n\n        <div className=\"AwardsPage-filterBar-right\">\n          {/* Tab buttons */}\n          <div className=\"AwardsPage-tabs\">\n            <Button\n              className={`Button ${this.currentView === 'categories' || (this.currentView === 'results' && !showResultsTab) ? 'Button--primary' : ''}`}\n              onclick={() => {\n                this.currentView = showResultsTab ? 'results' : 'categories';\n                m.redraw();\n              }}\n            >\n              {showResultsTab\n                ? app.translator.trans('huseyinfiliz-awards.forum.tabs.results')\n                : app.translator.trans('huseyinfiliz-awards.forum.tabs.categories')}\n            </Button>\n\n            {showMyVotesTab ? (\n              <Button\n                className={`Button ${this.currentView === 'my_votes' ? 'Button--primary' : ''}`}\n                onclick={() => {\n                  this.currentView = 'my_votes';\n                  m.redraw();\n                }}\n                icon=\"fas fa-clipboard-list\"\n              >\n                {app.translator.trans('huseyinfiliz-awards.forum.tabs.my_votes')}\n              </Button>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderAwardSelector() {\n    const awardOptions: Record<string, string> = {};\n    this.awards.forEach((award) => {\n      awardOptions[String(award.id())] = `${award.name()} (${award.year()})`;\n    });\n\n    return (\n      <div className=\"AwardsPage-selector\">\n        <Select\n          value={String(this.selectedAward?.id())}\n          options={awardOptions}\n          onchange={(value: string) => {\n            this.selectedAward = this.awards.find((a) => String(a.id()) === value) || null;\n            this.selectedCategoryId = null;\n            // Update view based on new award status\n            if (this.selectedAward?.canViewResults()) {\n              this.currentView = 'results';\n            } else {\n              this.currentView = 'categories';\n            }\n            this.updateUrl();\n            m.redraw();\n          }}\n        />\n      </div>\n    );\n  }\n\n  scrollToCategory(categoryId: string | number | undefined) {\n    if (!categoryId) return;\n    const element = document.getElementById(`category-${categoryId}`);\n    if (element) {\n      element.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    }\n  }\n\n  updateUrl() {\n    if (!this.selectedAward) return;\n\n    const awardId = this.selectedAward.id();\n    const awardSlug = this.selectedAward.slug() || 'award';\n\n    let path: string;\n    if (this.selectedCategoryId) {\n      path = app.route('awards.category', { id: `${awardId}-${awardSlug}`, category: this.selectedCategoryId });\n    } else {\n      path = app.route('awards.show', { id: `${awardId}-${awardSlug}` });\n    }\n\n    // Use history.replaceState to update URL without navigation\n    history.replaceState(null, '', path);\n  }\n\n  renderAwardView() {\n    const award = this.selectedAward!;\n\n    // My Votes view\n    if (this.currentView === 'my_votes' && app.session.user) {\n      return (\n        <MyVotesView\n          award={award}\n          onNavigateToCategory={(categoryId: string) => {\n            this.currentView = 'categories';\n            this.selectedCategoryId = categoryId;\n            this.updateUrl();\n            m.redraw();\n            // Delay scroll to allow DOM update\n            setTimeout(() => this.scrollToCategory(categoryId), 100);\n          }}\n        />\n      );\n    }\n\n    // Results view\n    if (award.canViewResults()) {\n      return <ResultsView award={award} selectedCategoryId={this.selectedCategoryId} />;\n    }\n\n    // Voting view (including draft preview for admins)\n    if (award.isActive() || award.hasEnded() || award.isDraft()) {\n      return (\n        <div>\n          {award.isDraft() ? (\n            <div className=\"Alert Alert--warning AwardsPage-draftAlert\">\n              <i className=\"fas fa-eye\" /> {app.translator.trans('huseyinfiliz-awards.forum.preview.admin_only')}\n            </div>\n          ) : null}\n          <VotingView\n            award={award}\n            selectedCategoryId={this.selectedCategoryId}\n            onCategoryChange={(categoryId: string | null) => {\n              this.selectedCategoryId = categoryId;\n              this.updateUrl();\n              m.redraw();\n            }}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"EmptyState\">\n        <p>{app.translator.trans('huseyinfiliz-awards.forum.error.not_available')}</p>\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\n\nexport default class ResultsPublishedNotification extends Notification {\n  icon() {\n    return 'fas fa-trophy';\n  }\n\n  href() {\n    const content = this.attrs.notification.content() || {};\n    const awardId = content.awardId;\n    const awardSlug = content.awardSlug || 'award';\n\n    if (awardId) {\n      return app.route('awards.show', { id: `${awardId}-${awardSlug}` });\n    }\n\n    return app.route('awards');\n  }\n\n  content() {\n    const content = this.attrs.notification.content() || {};\n    const awardName = content.awardName || 'Awards';\n\n    return app.translator.trans('huseyinfiliz-awards.forum.notification.results_published', {\n      awardName,\n    });\n  }\n\n  excerpt() {\n    return null;\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport commonExtenders from '../common/extend';\nimport AwardsPage from './components/AwardsPage';\nimport ResultsPublishedNotification from './components/ResultsPublishedNotification';\n\napp.initializers.add('huseyinfiliz/awards', () => {\n  commonExtenders.forEach((extender) => extender.extend(app));\n\n  // Awards routes - discussion-style URLs with optional category deep linking\n  app.routes.awards = { path: '/awards', component: AwardsPage };\n  app.routes['awards.show'] = { path: '/awards/:id', component: AwardsPage };\n  app.routes['awards.category'] = { path: '/awards/:id/:category', component: AwardsPage };\n\n  // Register notification component\n  app.notificationComponents.awardsResultsPublished = ResultsPublishedNotification;\n\n  extend(IndexPage.prototype, 'navItems', function (items) {\n    if (app.forum.attribute('canViewAwards') !== false) {\n      const navTitle = app.forum.attribute('awardsNavTitle') || 'Awards';\n      const navIcon = app.forum.attribute('awardsNavIcon') || 'fas fa-trophy';\n      items.add(\n        'awards',\n        LinkButton.component(\n          {\n            href: app.route('awards'),\n            icon: navIcon,\n          },\n          navTitle\n        ),\n        85\n      );\n    }\n  });\n});\n"],"names":["OverloadYield","require","regenerator","regeneratorAsync","regeneratorAsyncGen","regeneratorAsyncIterator","regeneratorKeys","regeneratorValues","_regeneratorRuntime","r","e","m","t","Object","getPrototypeOf","__proto__","constructor","n","displayName","name","o","a","stop","v","abrupt","delegateYield","resultName","d","finish","f","_t","p","prev","next","sent","call","this","module","exports","wrap","w","reverse","isGeneratorFunction","mark","awrap","AsyncIterator","async","u","keys","values","__esModule","regeneratorDefine","_regenerator","Symbol","iterator","toStringTag","i","c","prototype","Generator","create","y","G","bind","length","l","TypeError","done","value","GeneratorFunction","GeneratorFunctionPrototype","setPrototypeOf","k","resolve","then","asyncIterator","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","Promise","_regeneratorDefine","defineProperty","_invoke","enumerable","configurable","writable","_typeof","isNaN","unshift","pop","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","key","get","obj","prop","hasOwnProperty","flarum","core","compat","_setPrototypeOf","_inheritsLoose","Award","_Model","_this","_len","arguments","args","Array","_key","apply","concat","Model","slug","year","description","startsAt","endsAt","status","effectiveStatus","showLiveVotes","imageUrl","createdAt","updatedAt","categories","categoryCount","nomineeCount","voteCount","canViewResults","_proto","isDraft","isActive","hasEnded","isPublished","isVotingOpen","now","Date","canShowVotes","hasEffectivelyEnded","Category","sortOrder","allowOther","award","nominees","votes","otherSuggestions","userVoteIds","userPendingSuggestionsCount","hasUserVoted","ids","getUserVotedNomineeIds","Nominee","metadata","category","votePercentage","realVoteCount","voteAdjustment","rank","isWinner","isRunnerUp","isThirdPlace","Vote","nomineeId","categoryId","nominee","user","OtherSuggestion","mergedToNominee","isPending","isApproved","isRejected","isMerged","Extend","add","asyncGeneratorStep","_asyncToGenerator","_next","_throw","NomineeCard","_Component","loading","view","_this2","attrs","userVotes","app","all","id","userVote","find","_v$data","_v$data2","vNomineeId","data","relationships","vCategoryId","String","isVoted","canVote","showVotes","isClickable","className","onclick","toggleVote","role","tabindex","onkeydown","preventDefault","src","alt","trans","count","updateCategoryUserVoteIds","filter","_v$data3","map","_v$data4","Boolean","pushData","attributes","_this3","votesLimit","parseInt","attribute","redraw","currentVoteCount","show","type","existingVotesInCategory","_v$data5","limit","method","url","body","response","forEach","_v$data6","prevNomineeId","prevNominee","getById","currentCount","remove","pushPayload","Component","SuggestionModal","_Modal","suggestions","loadingSuggestions","cancellingId","oninit","vnode","Stream","loadSuggestions","title","_loadSuggestions","_callee","_context","params","item","pushObject","console","error","getRemainingSlots","userVoteCount","votesPerCategory","Infinity","pendingCount","s","Math","max","updateCategoryPendingCount","content","LoadingIndicator","remainingSlots","isUnlimited","bidi","required","Button","disabled","Alert","dismissible","suggestion","renderSuggestionItem","statusLabels","pending","approved","rejected","merged","icon","cancelSuggestion","_cancelSuggestion","_callee2","_t2","_context2","confirm","_x","onsubmit","_this4","errorHandler","onerror","newSuggestion","Modal","OtherCard","openModal","userPendingCount","hasNoRemaining","CategoryCard","showVoteBadge","used","VotingProgressBar","currentCategoryIndex","showConfetti","confettiShown","checkCompletion","onupdate","votedCount","totalCount","setTimeout","categoryIds","onNavigate","selectedCategoryId","onCategoryChange","isComplete","progressPercent","renderConfetti","style","width","total","navigate","direction","currentIndex","indexOf","newIndex","_step","visibleCategoryId","_iterator","_createForOfIteratorHelperLoose","element","document","getElementById","rect","getBoundingClientRect","top","window","innerHeight","colors","pieces","color","floor","random","left","delay","size","rotation","push","animationDelay","backgroundColor","height","transform","VotingView","getVotedCategoryIds","votedCategoryIds","some","allCategories","cat","totalCategories","scrollIntoView","behavior","block","CategoryResultsModal","sortedNominees","sort","b","totalVotes","reduce","sum","index","percentage","round","isThird","CategoryResultCard","allNominees","slice","hasMoreNominees","percent","PredictionSummary","showDetails","getPredictionResults","results","userVotedNominee","_userVote$data","winner","isCorrect","votedResults","correctCount","totalVoted","correctPredictions","wrongPredictions","correct","ResultsView","isEarlyPreview","MyVotesView","expandUnvoted","removingVotes","Set","getVotesInfo","votedCategories","unvoted","lastVoteTime","categoryVotes","voteEntries","vote","_vote$data","voteTime","canAddMore","removeVote","voteId","has","onNavigateToCategory","_this$getVotesInfo","votedCategoryCount","voted","time","humanTime","_ref","_ref2","AwardsPage","_Page","awards","selectedAward","currentView","countdownInterval","countdownText","refreshInterval","routeAwardId","routeCategoryId","idParam","route","param","categoryParam","match","loadAwards","oncreate","navTitle","extractText","startCountdown","onremove","clearInterval","stopAutoRefresh","updateCountdown","setInterval","diff","getTime","days","hours","minutes","timeStr","_loadAwards","_this$selectedAward","canManage","_this$selectedAward$c","_this$selectedAward2","include","loadUserVotes","startAutoRefresh","updateUrl","scrollToCategory","refreshVoteCounts","_refreshVoteCounts","_loadUserVotes","_callee3","_t3","_context3","navIcon","hero","listItems","IndexPage","sidebarItems","toArray","_this$selectedAward3","hasImage","backgroundImage","renderFilterBar","renderAwardView","_this$selectedAward4","_this$selectedAward5","_this5","showResultsTab","showMyVotesTab","categoryOptions","renderAwardSelector","Select","options","onchange","replace","_this$selectedAward6","_this6","awardOptions","_this6$selectedAward","path","awardId","awardSlug","history","replaceState","_this7","Page","ResultsPublishedNotification","_Notification","href","notification","awardName","excerpt","Notification","commonExtenders","extender","extend","component","awardsResultsPublished","items","LinkButton"],"ignoreList":[],"sourceRoot":""}